(function(){var t={6700:function(t,e,a){var r={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":6956,"./oc-lnc.js":6956,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":9304,"./th.js":9304,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function s(t){var e=i(t);return a(e)}function i(t){if(!a.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}s.keys=function(){return Object.keys(r)},s.resolve=i,t.exports=s,s.id=6700},5279:function(t,e,a){"use strict";var r=a(9242),s=a(3396),i=a(7718);function l(t,e,a,r,l,o){const n=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(i.q,{class:"my-application"},{default:(0,s.w5)((()=>[(0,s.Wm)(n)])),_:1})}var o=a(7139),n={name:"App",data:()=>({theme:"light"}),methods:{...(0,o.nv)("user",["setIsLoggedIn","setPermissions"])},mounted(){}},d=a(89);const w=(0,d.Z)(n,[["render",l],["__scopeId","data-v-e47c86e2"]]);var c=w,u=a(2483);let p={roles:localStorage.getItem("roles")?JSON.parse(localStorage.getItem("roles")):[],user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):[],isLoggedIn:"true"==localStorage.getItem("isLoggedIn"),permissions:localStorage.getItem("permissions")?JSON.parse(localStorage.getItem("permissions")):[],users:[],agents:[],deliveries:[],fetched:!1,fetchedRoles:!1};var m={name:"user",namespaced:!0,state:p,getters:{fetched:t=>t.fetched,fetchedRoles:t=>t.fetchedRoles,isLoggedIn:t=>t.isLoggedIn,permissions:t=>t.permissions,user:t=>t.user,users:t=>t.users,roles:t=>t.roles,agents:t=>t.agents,deliveries:t=>t.deliveries},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FETCHED_ROLES:(t,e)=>{t.fetchedRoles=e},SET_IS_LOGGED_IN:(t,e)=>{localStorage.setItem("isLoggedIn",e),t.isLoggedIn=e},SET_USER:(t,e)=>{localStorage.setItem("user",JSON.stringify(e)),t.user=e},SET_USERS:(t,e)=>{t.users=e},SET_PERMISSIONS:(t,e)=>{localStorage.setItem("permissions",JSON.stringify(e)),t.permissions=e},SET_ROLES:(t,e)=>{localStorage.setItem("roles",JSON.stringify(e)),t.roles=e},SET_DELIVERIES:(t,e)=>{t.deliveries=e},SET_AGENTS:(t,e)=>{t.agents=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFetchedRoles:({commit:t},e)=>{t("SET_FETCHED_ROLES",e)},setUser:({commit:t},e)=>{t("SET_USER",e)},setUsers:({commit:t},e)=>{t("SET_USERS",e)},setAgents:({commit:t},e)=>{t("SET_AGENTS",e)},setDeliveries:({commit:t},e)=>{t("SET_DELIVERIES",e)},setIsLoggedIn:({commit:t},e)=>{t("SET_IS_LOGGED_IN",e)},setPermissions:({commit:t},e)=>{t("SET_PERMISSIONS",e)},setRoles:({commit:t},e)=>{t("SET_ROLES",e)},logout:({commit:t})=>{t("SET_USER",{}),t("SET_IS_LOGGED_IN",!1),t("SET_PERMISSIONS",[]),t("SET_ROLES",[])}}},h={name:"alert",namespaced:!0,state:{active:!1,alert:{type:"success",title:"Toast",body:"Hello body"}},getters:{alert:t=>t},mutations:{TOGGLE_TOAST:(t,e)=>{t.alert=e,t.active=!0,setTimeout((()=>{t.active=!1}),4500)}},actions:{toggleAlert:({commit:t},e)=>{t("TOGGLE_TOAST",e)}}};a(7658);let g={products:[],fetched:!1};var f={name:"product",namespaced:!0,state:g,getters:{products:t=>t.products,fetched:t=>t.fetched},mutations:{SET_PRODUCTS:(t,e)=>{t.products=e},ADD_PRODUCT:(t,e)=>{t.products.push(e)},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setProducts:({commit:t},e)=>{t("SET_PRODUCTS",e)},addProduct:({commit:t},e)=>{t("ADD_PRODUCT",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};a(541);let v={fetched:!1,sales:[],count:0};var y={name:"sale",namespaced:!0,state:v,getters:{sales:t=>t.sales,count:t=>t.count,fetched:t=>t.fetched},mutations:{SET_SALES:(t,e)=>{t.sales=e},SET_COUNT:(t,e)=>{t.count=e},SET_FETCHED:(t,e)=>{t.fetched=e},UPDATE_SALE:(t,e)=>{t.sales=t.sales.map((t=>t.id===e.id?e.sale:t))},ADD_SALE:(t,e)=>{t.sales.unshift(e)},ADD_SALES:(t,e)=>{t.sales=[...e,...t.sales]},UPDATE_CONFIRMATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,console.log("sale updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.affectation=e.affectation,null!=e.affectation?t.delivery="dispatch":t.delivery=null,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,console.log("order updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.sales=t.sales.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))},RESET_SALES:(t,e)=>{t.sales=t.sales.map((t=>(e.includes(t.id)&&(t.agente_id=null,t.upsell=null,t.confirmation=null,t.affectation=null,t.note=null,t.note_d=null,t.delivery=null,t.reported_agente_date=null,t.reported_agente_note=null,t.reported_delivery_date=null,t.reported_delivery_note=null),t)))}},actions:{setSales:({commit:t},e)=>{t("SET_SALES",e)},setCount:({commit:t},e)=>{t("SET_COUNT",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},update:({commit:t},e)=>{t("UPDATE_SALE",e)},add:({commit:t},e)=>{t("ADD_SALE",e)},addSales:({commit:t},e)=>{t("ADD_SALES",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)},resetSales:({commit:t},e)=>{t("RESET_SALES",e)}}};let x={orders:[],order:null,all_orders:[],fetched:!1};var _={name:"order",namespaced:!0,state:x,getters:{fetched:t=>t.fetched,orders:t=>t.orders,order:t=>t.order,allOrders:t=>t.all_orders},mutations:{SET_ORDERS:(t,e)=>{t.orders=e},ADD_ORDER:(t,e)=>{t.orders.unshift(e),t.all_orders.unshift(e)},SET_FETCHED:(t,e)=>{t.fetched=e},SET_ALL_ORDERS:(t,e)=>{t.all_orders=e},SET_ORDER:(t,e)=>{t.order=e},UPDATE_ORDER:(t,e)=>{t.orders=t.orders.map((t=>t.id===e.id?e.order:t)),t.all_orders=t.all_orders.map((t=>t.id===e.id?e.order:t))},UPDATE_CONFIRMATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_CONFIRMATION_WITH_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.confirmation=e.confirmation,t.note=e.note,"confirmer"==e.confirmation&&(t.delivery="dispatch"),console.log("order updated")),t)))},UPDATE_UPSELL:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.upsell=e.upsell,console.log("sale updated")),t)))},UPDATE_AFFECTATION:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.affectation=e.affectation,console.log("sale updated")),t)))},UPDATE_NOTE:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.note=e.note,console.log("sale updated")),t)))},UPDATE_DELIVERY:(t,e)=>{t.orders=t.orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t))),t.all_orders=t.all_orders.map((t=>(t.id==e.id&&(t.delivery=e.delivery,console.log("sale updated")),t)))}},actions:{setOrders:({commit:t},e)=>{t("SET_ORDERS",e)},addOrder:({commit:t},e)=>{t("ADD_ORDER",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setAllOrders:({commit:t},e)=>{t("SET_ALL_ORDERS",e)},setOrder:({commit:t},e)=>{t("SET_ORDER",e)},update:({commit:t},e)=>{t("UPDATE_ORDER",e)},updateConfirmation:({commit:t},e)=>{t("UPDATE_CONFIRMATION",e)},updateConfirmationWithNote:({commit:t},e)=>{t("UPDATE_CONFIRMATION_WITH_NOTE",e)},updateUpsell:({commit:t},e)=>{t("UPDATE_UPSELL",e)},updateAffectation:({commit:t},e)=>{t("UPDATE_AFFECTATION",e)},updateNote:({commit:t},e)=>{t("UPDATE_NOTE",e)},updateDelivery:({commit:t},e)=>{t("UPDATE_DELIVERY",e)}}};let b={fetcehd:!1,inventoryList:[],inventoryState:[],inventoryMovements:[]};var k={name:"inventory",namespaced:!0,state:b,getters:{fetched:t=>t.fetched,inventoryList:t=>t.inventoryList,inventoryState:t=>t.inventoryState,inventoryMovements:t=>t.inventoryMovements},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_INVENTORY_LIST:(t,e)=>{t.inventoryList=e},SET_INVENTORY_STATE:(t,e)=>{t.inventoryState=e},SET_INVENTORY_MOVEMENTS:(t,e)=>{t.inventoryMovements=e}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setInventoryList:({commit:t},e)=>{t("SET_INVENTORY_LIST",e)},setInventoryState:({commit:t},e)=>{t("SET_INVENTORY_STATE",e)},setInventoryMovements:({commit:t},e)=>{t("SET_INVENTORY_MOVEMENTS",e)}}};const C=localStorage.getItem("cities");let D={fetched:!1,cities:C?JSON.parse(C):[]};var S={name:"city",namespaced:!0,state:D,getters:{cities:t=>t.cities,fetched:t=>t.fetched},mutations:{SET_CITIES:(t,e)=>{localStorage.setItem("cities",JSON.stringify(e)),t.cities=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setCities:({commit:t},e)=>{t("SET_CITIES",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let z={shops:[]};var U={name:"shop",namespaced:!0,state:z,getters:{shops:t=>t.shops},mutations:{SET_SHOPS:(t,e)=>{t.shops=e}},actions:{setShops:({commit:t},e)=>{t("SET_SHOPS",e)}}};let L={fetched:!1,notifications:{productStockAlert:[],reportedSale:[],reportedOrderAgente:[],reportedOrderDelivery:[]}};var P={name:"notification",namespaced:!0,state:L,getters:{notifications:t=>t.notifications,fetched:t=>t.fetched},mutations:{SET_NOTIFICATIONS:(t,e)=>{t.notifications=e},SET_FETCHED:(t,e)=>{t.fetched=e}},actions:{setNotifications:({commit:t},e)=>{t("SET_NOTIFICATIONS",e)},setFetched:({commit:t},e)=>{t("SET_FETCHED",e)}}};let A={fetched:!1,warehouses:[]};var W={name:"warehouse",namespaced:!0,state:A,getters:{fetched:t=>t.fetched,warehouses:t=>t.warehouses},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_WAREHOUSES:(t,e)=>{t.warehouses=e},ADD_WAREHOUSE:(t,e)=>{t.warehouses.push(e)},DELETE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.filter((t=>t.id!=e))},UPDATE_WAREHOUSE:(t,e)=>{t.warehouses=t.warehouses.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setWarehouses:({commit:t},e)=>{t("SET_WAREHOUSES",e)},addWarehouse:({commit:t},e)=>{t("ADD_WAREHOUSE",e)},update:({commit:t},e)=>{t("UPDATE_WAREHOUSE",e)},delete:({commit:t},e)=>{t("DELETE_WAREHOUSE",e)}}};let $={fetched:!1,factorisations:[]};var E={name:"factorisation",namespaced:!0,state:$,getters:{fetched:t=>t.fetched,factorisations:t=>t.factorisations},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_FACTORISATIONS:(t,e)=>{t.factorisations=e},ADD_FACTORISATION:(t,e)=>{t.factorisations.push(e)},DELETE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.filter((t=>t.id!=e))},UPDATE_FACTORISATION:(t,e)=>{t.factorisations=t.factorisations.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setFactorisations:({commit:t},e)=>{t("SET_FACTORISATIONS",e)},addFactorisation:({commit:t},e)=>{t("ADD_FACTORISATION",e)},update:({commit:t},e)=>{t("UPDATE_FACTORISATION",e)},delete:({commit:t},e)=>{t("DELETE_FACTORISATION",e)}}};let q={fetched:!1,sheets:[]};var O={name:"sheet",namespaced:!0,state:q,getters:{fetched:t=>t.fetched,sheets:t=>t.sheets},mutations:{SET_FETCHED:(t,e)=>{t.fetched=e},SET_SHEETS:(t,e)=>{t.sheets=e},ADD_SHEET:(t,e)=>{t.sheets.push(e)},DELETE_SHEET:(t,e)=>{t.sheets=t.sheets.filter((t=>t.id!=e))},UPDATE_SHEET:(t,e)=>{t.sheets=t.sheets.map((t=>t.id==e.id?{...e}:t))}},actions:{setFetched:({commit:t},e)=>{t("SET_FETCHED",e)},setSheets:({commit:t},e)=>{t("SET_SHEETS",e)},addSheet:({commit:t},e)=>{t("ADD_SHEET",e)},update:({commit:t},e)=>{t("UPDATE_SHEET",e)},delete:({commit:t},e)=>{t("DELETE_SHEET",e)}}},T=(0,o.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:m,product:f,alert:h,sale:y,order:_,inventory:k,city:S,shop:U,notification:P,warehouse:W,factorisation:E,sheet:O}}),V=a(6943);const F="https://seller.vldo.shop/",I="https://apiseller.vldo.shop/",R="$",j=V.Z.create({baseURL:I}),N=V.Z.create({baseURL:I});N.defaults.withCredentials=!0,N.defaults.headers={"Content-Type":"multipart/form-data",Accept:"application/json"},j.defaults.withCredentials=!0,j.defaults.headers={"Content-Type":"application/json",Accept:"application/json"};var M=j,H=a(680),Y={getCookie(){let t=H.Z.get("XSRF-TOKEN");return t?new Promise((t=>{t()})):M.get("sanctum/csrf-cookie")}};class Z{async login(t){return await Y.getCookie(),M.post("api/auth/login",{email:t.email,password:t.password})}async register(t){return await Y.getCookie(),M.post("api/users/new",{email:t.email,password:t.password,phone:t.phone,status:t.status,role:t.role,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,city:t?.city,deliverycity:t?.deliveryCities,having_all:t.having_all})}async update(t,e){return await Y.getCookie(),M.post("api/users/update/"+t.id,{email:t.email,password:t.password,phone:t.phone,status:t.status,firstname:t.firstname,lastname:t.lastname,product_id:t.product_id,role:t.role,city:t?.city,deliverycity:t?.deliveryCities,updatePassword:e,having_all:t.having_all})}async updateProfile(t,e){return await Y.getCookie(),M.post("api/users/profile",{password:t.password,phone:t.phone,firstname:t.firstname,lastname:t.lastname,updatePassword:e})}async online(){return await Y.getCookie(),M.get("api/user")}async profile(){return await Y.getCookie(),M.get("api/users/profile")}async logout(){return await Y.getCookie(),M.get("api/auth/logout")}async clear(){return await Y.getCookie(),M.get("api/auth/clear")}async permession(){return await Y.getCookie(),M.get("api/auth/permission")}async roles(){return await Y.getCookie(),M.get("api/auth/roles")}async all(){return await Y.getCookie(),M.get("api/users")}async updateStatus({id:t,status:e}){return await Y.getCookie(),M.post("api/users/status/"+t,{status:e})}async delete(t){return await Y.getCookie(),M["delete"]("api/users/delete/"+t)}async getUser(t){return await Y.getCookie(),M.get("api/users/"+t)}async createRole({name:t,permissions:e}){return await Y.getCookie(),M.post("api/roles/new",{name:t,permissions:e})}async updateRole(t,{name:e,permissions:a}){return await Y.getCookie(),M.post("api/roles/update/"+t,{name:e,permissions:a})}async deleteRole(t){return await Y.getCookie(),M["delete"]("api/roles/delete/"+t)}async getRole(t){return await Y.getCookie(),M.get("api/roles/"+t)}async agents(){return await Y.getCookie(),M.get("api/agents")}async deliveries(){return await Y.getCookie(),M.get("api/delevries")}async allDeliveries(){return await Y.getCookie(),M.get("api/deliveries")}async cities(){return await Y.getCookie(),M.get("api/cities")}}var K=new Z;function B(t){if(document.title=t.meta?.title+" | Vldo Shop",console.log(t),!T.getters["user/isLoggedIn"])return"/login"==t.path||{name:"login"};if(K.online(),"/login"==t.path)return{name:"404"};const{gate:e}=t.meta,a=T.getters["user/permissions"];return"all"===e||((e||"/404"===t.path)&&!(!a.includes(e)&&"/404"!==t.path)||{name:"404"})}var Q=a(2268),G=a(7312),J=a(3369),X=a(3289),tt=a(165);const et={class:"tw-min-h-screen tw-overflow-auto tw-bg-slate-50"},at={class:"tw-grid tw-h-fit tw-overflow-hidden md:tw-grid-cols-2 tw-grid-cols-1"},rt={class:"py-md-5 py-10 pb-0 tw-flex tw-justify-center md:tw-items-center"},st={class:"px-md-10 tw-w-full"},it={class:"tw-w-[150px]"},lt=["src"],ot={class:"mt-md-10 mt-15 pt-5 px-md-5 px-lg-16 tw-w-full d-felx justify-center align-center"},nt={class:"pa-5 py-7 tw-border bg-white tw-rounded-lg tw-mx-auto tw-max-w-[450px]"},dt=(0,s._)("h1",{class:"text-h5 font-weight-medium !tw-text-gray-600"},"Login",-1),wt=(0,s._)("p",{class:"text-body-1 mt-2 !tw-text-gray-500"},"Please login to your account",-1),ct={key:0,class:"text-body-2 mt-2 !tw-text-red-500"},ut={class:"mt-5"},pt=(0,s._)("p",{class:"mb-1"},"Email",-1),mt=(0,s._)("p",{class:"mb-1"},"Password",-1),ht={class:"mt-5"},gt=(0,s._)("span",{class:"text-capitalize text-white"},"Login",-1),ft={class:"bg-primary-color tw-min-h-screen tw-hidden md:tw-flex tw-items-center tw-justify-center"},vt=["src"];function yt(t,e,a,i,l,o){const n=(0,s.up)("Alert");return(0,s.wg)(),(0,s.iD)("div",et,[(0,s.Wm)(n),(0,s._)("div",at,[(0,s._)("div",rt,[(0,s.Wm)(J.K,{class:"py-0"},{default:(0,s.w5)((()=>[(0,s._)("div",st,[(0,s._)("div",it,[(0,s._)("img",{class:"tw-w-full",src:l.localUrl+"assets/img/logo.png"},null,8,lt)]),(0,s._)("div",ot,[(0,s._)("div",nt,[dt,wt,l.error.active?((0,s.wg)(),(0,s.iD)("p",ct,(0,Q.zw)(l.error.message),1)):(0,s.kq)("",!0),(0,s._)("div",ut,[(0,s._)("div",null,[pt,(0,s.Wm)(tt.hw,{name:"email",onKeyup:e[0]||(e[0]=t=>o.resetError("email")),modelValue:l.email,"onUpdate:modelValue":e[1]||(e[1]=t=>l.email=t),error:!l.emailStatus.valid,"error-messages":l.emailStatus.valid?"":l.emailStatus.message,autofocus:"",onBlur:e[2]||(e[2]=t=>l.emailFocus=!1),onFocus:e[3]||(e[3]=t=>l.emailFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:l.emailFocus?l.emailStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-email-outline")])),_:1},8,["color"])])),_:1},8,["modelValue","error","error-messages"])]),(0,s._)("div",null,[mt,(0,s.Wm)(tt.hw,{name:"password",onKeyup:(0,r.D2)(o.login,["enter"]),modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=t=>l.password=t),error:!l.passwordStatus.valid,"error-messages":l.passwordStatus.valid?"":l.passwordStatus.message,type:l.showPassword?"text":"password",onBlur:e[6]||(e[6]=t=>l.passwordFocus=!1),onFocus:e[7]||(e[7]=t=>l.passwordFocus=!0),color:"primary-color",variant:"outlined",class:"tw-w-full",density:"compact"},{"append-inner":(0,s.w5)((()=>[(0,s.Wm)(X.t,{onClick:e[4]||(e[4]=t=>l.showPassword=!l.showPassword),class:"tw-relative tw-z-50 tw-cursor-pointer",color:l.passwordFocus?l.passwordStatus.valid?"primary-color":"error":"grey-darken-3"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(l.showPassword?"mdi-eye-off-outline":"mdi-eye-outline"),1)])),_:1},8,["color"])])),_:1},8,["onKeyup","modelValue","error","error-messages","type"])]),(0,s._)("div",ht,[(0,s.Wm)(G.T,{disabled:l.isLoading||!l.cookiesCleared,loading:l.isLoading||!l.cookiesCleared,onClick:o.login,block:"",size:"large",color:"primary-color",variant:"flat",class:"!tw-text-white disabled:!tw-bg-gray-200"},{default:(0,s.w5)((()=>[gt])),_:1},8,["disabled","loading","onClick"])])])])])])])),_:1})]),(0,s._)("div",ft,[(0,s._)("img",{src:l.localUrl+"assets/img/login.jpg",class:"tw-w-full tw-h-full tw-object-cover",alt:""},null,8,vt)])])])}function xt(t){var e=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;return t?new RegExp(e).test(t)?{valid:!0}:{valid:!1,message:"Email is not valid."}:{valid:!1,message:"Email is required."}}function _t(t){return t?t.length<=4||t.length>=16?{valid:!1,message:"Password length must be between 4 and 16."}:{valid:!0}:{valid:!1,message:"This field is required"}}function bt(t,e="This field"){return t?{valid:!0}:{valid:!1,message:`${e} is required`}}function kt(t,e="This field"){return t?isNaN(t)?{valid:!1,message:`${e} must be a valid number`}:{valid:!0}:{valid:!1,message:`${e} is required`}}function Ct(t,e){return t?t!==e?{valid:!1,message:"Passwords doesn't match"}:{valid:!0}:{valid:!1,message:"This field is required."}}function Dt(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one variant to create a product !"}}function St(t){return t.length?{valid:!0}:{valid:!1,message:"You need at least one permission to create a role !"}}var zt=a(7771),Ut=a(8952);const Lt={key:0,class:"pa-2 tw-absolute !tw-z-[510000]"},Pt={class:"tw-text-sm"};function At(t,e,a,r,i,l){return(0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s.Wm)(Ut.V,null,{default:(0,s.w5)((()=>[l.state.active?((0,s.wg)(),(0,s.iD)("div",Lt,[(0,s.Wm)(zt.w,{closable:"",density:"compact",variant:"flat",type:l.state.alert.type,position:"fixed",location:"bottom right",class:"ma-2"},{default:(0,s.w5)((()=>[(0,s._)("div",Pt,(0,Q.zw)(l.state.alert.title),1)])),_:1},8,["type"])])):(0,s.kq)("",!0)])),_:1})])}var Wt={computed:{state(){return this.$store.getters["alert/alert"]}}};const $t=(0,d.Z)(Wt,[["render",At]]);var Et=$t,qt={components:{Alert:Et},data(){return{localUrl:F,isLoading:!1,cookiesCleared:!1,error:{active:!1,message:""},email:"",password:"",emailStatus:{valid:!0,message:""},passwordStatus:{valid:!0,message:""},emailFocus:!1,passwordFocus:!1,showPassword:!1}},methods:{...(0,o.nv)("user",["setIsLoggedIn","setPermissions","setUser"]),validateForm(){return this.emailStatus=xt(this.email),this.passwordStatus=_t(this.password),this.passwordStatus.valid&&this.emailStatus.valid},login(){this.validateForm()&&(this.isLoading=!0,this.error={active:!1,message:""},K.login({email:this.email,password:this.password}).then((t=>{if("AUTHENTICATION_SUCCESSFUL"==t.data.code){this.setUser(t.data.data.user),this.setIsLoggedIn(!0);const e=t.data.data.user.permissions;this.setPermissions(e),this.$router.push("/")}})).catch((t=>{this.$handleApiError(t),"INVALID_CREDENTIALS"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"NOT_ACTIVE_ERROR"==t.response?.data.code&&(this.error={active:!0,message:t.response.data.message}),"VALIDATION_ERROR"==t.response?.data.code&&(this.emailStatus={valid:!1,message:t.response.data.error["email"][0]},this.passwordStatus={valid:!1,message:t.response.data.error["password"][0]})})).finally((()=>{this.isLoading=!1})),console.log("login..."))},resetError(t){"email"==t&&(this.emailStatus={valid:!0,message:""}),"password"==t&&(this.passwordStatus={valid:!0,message:""})}},mounted(){K.clear().then((()=>{this.cookiesCleared=!0}))}};const Ot=(0,d.Z)(qt,[["render",yt]]);var Tt=Ot,Vt={name:"login",path:"/login",component:Tt,meta:{title:"Login"}},Ft=a(4454),It=a(3140);function Rt(t,e,a,r,i,l){const o=(0,s.up)("AppSidebar"),n=(0,s.up)("AppHeader"),d=(0,s.up)("Alert"),w=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",null,[l.isLoggedIn?((0,s.wg)(),(0,s.j4)(Ft.s,{key:0,"full-height":!0},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{active:i.drawer},null,8,["active"]),(0,s.Wm)(n,{onToggleSidebar:l.toggleSidebar},null,8,["onToggleSidebar"]),(0,s.Wm)(d),(0,s.Wm)(It.O,{class:"tw-bg-gray-50 tw-min-h-screen tw-overflow-y-auto"},{default:(0,s.w5)((()=>[(0,s.Wm)(J.K,{fluid:"",class:"py-6 px-6"},{default:(0,s.w5)((()=>[(0,s.Wm)(w)])),_:1})])),_:1}),i.showScrollUpButton?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>l.scrollToTop&&l.scrollToTop(...t)),class:"tw-fixed tw-shadow tw-text-sm tw-bottom-5 tw-right-3 tw-w-10 tw-h-10 tw-z-10 tw-rounded-full tw-bg-orange-400 tw-text-white"},[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-transfer-up")])),_:1})])):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0)])}var jt=a(6439),Nt=a(9156);const Mt={class:"tw-flex tw-items-center tw-gap-2"};function Ht(t,e,a,i,l,o){const n=(0,s.up)("Notification"),d=(0,s.up)("HeaderMenu");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(jt.L,{color:"white",density:"default",elevation:"0",class:"tw-border-b-0 !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-0 !tw-fixed tw-overflow-visible",absolute:!1},(0,s.Nv)({append:(0,s.w5)((()=>[(0,s._)("div",Mt,[(0,s.Wm)(n),(0,s.Wm)(d)])])),default:(0,s.w5)((()=>[(0,s.Wm)(Nt.g,{variant:"text",onClick:e[0]||(e[0]=(0,r.iM)((t=>o.handleClick()),["stop"]))})])),_:2},[void 0]),1024)])}var Yt=a(652),Zt=a(4075),Kt=a(8694),Bt=a(8793);const Qt={class:"tw-relative"},Gt=(0,s._)("div",{class:"tw-absolute tw-bottom-0 tw-border-2 tw-border-solid tw-border-white tw-right-0 tw-w-3 tw-h-3 tw-rounded-full tw-bg-green-500"},null,-1),Jt={key:0,class:"!tw-duration-100"},Xt={class:"tw-absolute tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[200px] tw-min-h-[50px]"},te={class:"pa-2 d-flex tw-items-center tw-gap-2 tw-border-b tw-border-b-neutral-100"},ee={class:"d-flex flex-column justify-center"},ae={class:"tw-text-sm tw-text-neutral-800 text-capitalize"},re={class:"tw-text-xs tw-rounded-lg tw-text-green-500 text-capitalize"},se=(0,s._)("span",{class:"text-capitalize tw-text-neutral-700 tw-text-xs"}," Profile ",-1),ie={class:"d-flex tw-items-center tw-gap-2"},le=(0,s._)("span",{class:"text-capitalize tw-text-red-700 tw-text-xs"}," Logout ",-1);function oe(t,e,a,r,i,l){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Qt,[(0,s.Wm)(G.T,{onClick:l.toggleMenu,icon:"","max-width":"35","max-height":"35"},{default:(0,s.w5)((()=>[(0,s.Wm)(Yt.V,{size:"32"},{default:(0,s.w5)((()=>[(0,s.Wm)(Kt.f,{src:i.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),Gt])),_:1},8,["onClick"]),(0,s.Wm)(Ut.Z5,null,{default:(0,s.w5)((()=>[i.isActive?((0,s.wg)(),(0,s.iD)("div",Jt,[(0,s._)("div",Xt,[(0,s._)("div",te,[(0,s.Wm)(Yt.V,{size:"35"},{default:(0,s.w5)((()=>[(0,s.Wm)(Kt.f,{eager:"",src:i.localUrl+"assets/img/profiles/avatar.webp"},null,8,["src"])])),_:1}),(0,s._)("div",ee,[(0,s._)("div",ae,(0,Q.zw)(l.user.firstname)+" "+(0,Q.zw)(l.user.lastname),1),(0,s._)("div",re,(0,Q.zw)(l.user.role),1)])]),(0,s.Wm)(Zt.J),(0,s._)("div",{onClick:e[0]||(e[0]=(...t)=>l.closeMenu&&l.closeMenu(...t)),class:"d-flex tw-items-center tw-gap-2"},[(0,s.Wm)(G.T,{block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"mr-2 tw-text-neutral-700"},{default:(0,s.w5)((()=>[(0,s.Uk)(" mdi-account-outline ")])),_:1}),se])),_:1})]),(0,s.Wm)(Zt.J),(0,s._)("div",ie,[(0,s.Wm)(G.T,{onClick:l.logout,block:"",class:"justify-start",variant:"text",color:"gray",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:(0,Q.C_)([{"tw-animate-pulse":i.loginOut},"mr-2 tw-text-red-700"])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.loginOut?"mdi-power-settings":"mdi-power"),1)])),_:1},8,["class"]),le])),_:1},8,["onClick"])])])])):(0,s.kq)("",!0)])),_:1})])),[[Bt.L,l.closeMenu]])}var ne={data(){return{localUrl:F,isActive:!1,loginOut:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},logout(){this.loginOut=!0,K.logout().then((()=>{this.$store.dispatch("user/logout"),this.$router.push("/login")})).finally((()=>{this.loginOut=!1}))}},computed:{user(){return this.$store.getters["user/user"]}}};const de=(0,d.Z)(ne,[["render",oe]]);var we=de;function ce(t,e,a,r,i,l){const o=(0,s.up)("AdminNotification"),n=(0,s.up)("UserNotification");return(0,s.wg)(),(0,s.iD)("div",null,["admin"==l.user.role?((0,s.wg)(),(0,s.j4)(o,{key:0})):(0,s.kq)("",!0),["agente","delivery"].includes(l.user.role)?((0,s.wg)(),(0,s.j4)(n,{key:1})):(0,s.kq)("",!0)])}const ue={class:"tw-relative"},pe={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},me={key:0,class:"!tw-duration-100"},he={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},ge=(0,s._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),fe={key:0},ve={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},ye={key:1},xe=(0,s._)("p",{class:""},"Stock Alert",-1),_e=(0,s._)("p",{class:""},"Delivery Reported",-1),be=(0,s._)("p",{class:""},"Confirmation Reported",-1);function ke(t,e,a,r,i,l){const o=(0,s.up)("router-link");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",ue,[(0,s.Wm)(G.T,{onClick:l.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,s.w5)((()=>[(0,s.Wm)(Kt.f,{width:"22",height:"22",src:i.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),l.stockAlert.length||l.reportedDeliveries.length||l.reportedConfirmations.length?((0,s.wg)(),(0,s.iD)("div",pe)):(0,s.kq)("",!0)])),_:1},8,["onClick"]),(0,s.Wm)(Ut.Z5,null,{default:(0,s.w5)((()=>[i.isActive?((0,s.wg)(),(0,s.iD)("div",me,[(0,s._)("div",he,[ge,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",fe,[(0,s._)("div",ve,[(0,s.Wm)(X.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})])])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",ye,[(0,s.Wm)(o,{to:"/notifications/stock",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-alert-outline")])),_:1}),(0,s._)("div",null,[xe,(0,s._)("p",{class:(0,Q.C_)([[l.stockAlert.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.stockAlert.length)+" "+(0,Q.zw)(l.stockAlert.length>1?"products":"product"),3)])])),_:1}),(0,s.Wm)(o,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[_e,(0,s._)("p",{class:(0,Q.C_)([[l.reportedDeliveries.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedDeliveries.length)+" today",3)])])),_:1}),(0,s.Wm)(o,{to:"/sales",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[be,(0,s._)("p",{class:(0,Q.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])),_:1})])),[[Bt.L,l.closeMenu]])}class Ce{async all(){return await Y.getCookie(),M.get("api/notifications")}async agente(){return await Y.getCookie(),M.get("api/notifications/agente")}async delivery(){return await Y.getCookie(),M.get("api/notifications/delivery")}}var De=new Ce,Se={data(){return{localUrl:F,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getNotifications(){De.all().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){this.getNotifications()}};const ze=(0,d.Z)(Se,[["render",ke]]);var Ue=ze;const Le={class:"tw-relative"},Pe={key:0,class:"tw-absolute tw-border-2 tw-border-solid tw-border-white tw-top-1 tw-right-1 tw-w-3 tw-h-3 tw-rounded-full tw-bg-red-500"},Ae={key:0,class:"!tw-duration-100"},We={class:"tw-absolute tw-text-sm tw-bg-white tw-border tw-border-solid tw-border-neutral-200 tw-rounded-md tw-bordesr !tw-shadow-lg !tw-shadow-gray-400/10 tw-top-14 tw-right-0 tw-w-[230px] tw-min-h-[50px]"},$e=(0,s._)("p",{class:"tw-p-2 tw-text-sm"},"Notifications",-1),Ee={key:0},qe={class:"tw-py-10 tw-flex tw-items-center tw-justify-center"},Oe={key:1},Te=(0,s._)("p",{class:""},"Confirmation Reported",-1),Ve=(0,s._)("p",{class:""},"Delivery Reported",-1);function Fe(t,e,a,r,i,l){const o=(0,s.up)("router-link");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",Le,[(0,s.Wm)(G.T,{onClick:l.toggleMenu,icon:"",width:"35",height:"35",class:"tw-relative"},{default:(0,s.w5)((()=>[(0,s.Wm)(Kt.f,{width:"22",height:"22",src:i.localUrl+"assets/img/icons/notification-bing.svg"},null,8,["src"]),l.reportedDeliveries.length||l.reportedConfirmations.length?((0,s.wg)(),(0,s.iD)("div",Pe)):(0,s.kq)("",!0)])),_:1},8,["onClick"]),(0,s.Wm)(Ut.Z5,null,{default:(0,s.w5)((()=>[i.isActive?((0,s.wg)(),(0,s.iD)("div",Ae,[(0,s._)("div",We,[$e,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ee,[(0,s._)("div",qe,[(0,s.Wm)(X.t,{size:"large",class:"tw-animate-spin",color:"primary-color"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})])])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Oe,["agente"==l.user.role?((0,s.wg)(),(0,s.j4)(o,{key:0,to:"/orders",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[Te,(0,s._)("p",{class:(0,Q.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})):(0,s.kq)("",!0),"delivery"==l.user.role?((0,s.wg)(),(0,s.j4)(o,{key:1,to:"/deliveries",class:"hover:tw-bg-black/5 tw-p-2 tw-border-y tw-flex tw-gap-2 tw-items-start tw-border-neutral-100"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:"tw-mt-1 tw-text-neutral-400",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("div",null,[Ve,(0,s._)("p",{class:(0,Q.C_)([[l.reportedConfirmations.length>0?"tw-text-red-400 ":"tw-text-green-400 "],"tw-text-xs"])},(0,Q.zw)(l.reportedConfirmations.length)+" today",3)])])),_:1})):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])),_:1})])),[[Bt.L,l.closeMenu]])}var Ie={data(){return{localUrl:F,isActive:!1,isLoaded:!1}},methods:{toggleMenu(){this.isActive=!this.isActive},closeMenu(){this.isActive=!1},getAgenteNotifications(){De.agente().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getDeliveryNotifications(){De.delivery().then((t=>{"SUCCESS"==t.data.code&&(console.log("success"),this.$store.dispatch("notification/setNotifications",t.data.data),this.$store.dispatch("notification/setFetched",!0))}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},computed:{user(){return this.$store.getters["user/user"]},notifications(){return this.$store.getters["notification/notifications"]},stockAlert(){return this.notifications["productStockAlert"]||[]},reportedConfirmations(){return this.notifications["reportedOrderAgente"]||[]},reportedDeliveries(){return this.notifications["reportedOrderDelivery"]||[]}},mounted(){"agente"==this.user.role&&this.getAgenteNotifications(),"delivery"==this.user.role&&this.getDeliveryNotifications()}};const Re=(0,d.Z)(Ie,[["render",Fe]]);var je=Re,Ne={components:{AdminNotification:Ue,UserNotification:je},computed:{user(){return this.$store.getters["user/user"]}}};const Me=(0,d.Z)(Ne,[["render",ce]]);var He=Me,Ye={emits:["toggleSidebar"],components:{HeaderMenu:we,Notification:He},data(){return{localUrl:F}},computed:{},methods:{handleClick(){this.$emit("toggleSidebar")}}};const Ze=(0,d.Z)(Ye,[["render",Ht]]);var Ke=Ze,Be=a(9457),Qe=a(2329),Ge=a(9657);function Je(t,e,a,r,i,l){const o=(0,s.up)("SidebarItem");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(Ge.V,{modelValue:i.drawer,"onUpdate:modelValue":e[0]||(e[0]=t=>i.drawer=t),location:"left",absolute:!1,class:"!tw-top-0 !tw-fixed"},{default:(0,s.w5)((()=>[(0,s.Wm)(Be.l,{class:"tw-py-3"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(Kt.f,{width:"140",src:i.localUrl+"assets/img/logo.png"},null,8,["src"])])])),_:1}),(0,s.Wm)(Qe.i,{class:"mt-2",nav:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.links,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,link:t},null,8,["link"])))),128))])),_:1})])),_:1},8,["modelValue"])])}const Xe=[4,6,7],ta=[{id:1,title:"Dashboard",module:"dashboard",to:"/",hasChildren:!1,gate:"all",icon:{type:"svg",value:"assets/img/icons/dashboard.svg"}},{id:2,module:"product",title:"Product",hasChildren:!0,gate:"access_to_products",icon:{type:"svg",value:"assets/img/icons/product.svg"},children:[{id:1,title:"Products List",subModule:"product/list",gate:"show_all_products",to:"/products"},{id:2,title:"Add Product",subModule:"product/add",gate:"create_product",to:"/products/add"}]},{id:3,module:"track",title:"Tracking",hasChildren:!0,gate:"none",icon:{type:"icon",value:"mdi-radar"},children:[{id:1,title:"Deliveries",subModule:"track/delivery",gate:"none",to:"/tracking/delivery"}]},{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"}]},{id:10,module:"sellersale",title:"Seller Sales",hasChildren:!0,gate:"access_to_seller_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Seller Sales",subModule:"seller/list",gate:"show_seller_sales",to:"/seller/list"}]},{id:5,module:"factorisation",title:"Factorisation",hasChildren:!0,gate:"access_to_factorisations",icon:{type:"icon",value:"mdi-note-multiple"},children:[{id:1,title:"Factorisation list",subModule:"factorisation/list",gate:"show_all_factorisations",to:"/factorisations"}]},{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed"}]},{id:7,module:"delivery",title:"Orders",hasChildren:!0,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders List",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries"},{id:2,title:"Orders Delivered",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered"}]},{id:8,module:"inventory",title:"Inventory",hasChildren:!0,gate:"access_to_inventory",icon:{type:"icon",value:"mdi-warehouse"},children:[{id:1,title:"Inventory State",gate:"show_all_inventory_states",subModule:"inventory/state",to:"/inventories"},{id:2,title:"Inventory Movements",gate:"show_all_inventory_movements",subModule:"inventory/movements",to:"/inventories/movements"},{id:4,title:"Add Movement",gate:"create_inventory_movement",subModule:"inventory/add",to:"/inventories/add"}]},{id:9,module:"shop",title:"Shop",hasChildren:!0,gate:"access_to_shop",icon:{type:"icon",value:"mdi-store"},children:[{id:1,title:"Shop List",gate:"show_all_shops",subModule:"shop/list",to:"/shops"},{id:2,title:"Add Shop",gate:"create_shop",subModule:"shop/add",to:"/shops/add"}]},{id:10,module:"warehouse",title:"Warehouses",hasChildren:!0,gate:"access_to_warehouse",icon:{type:"icon",value:"mdi-home-group"},children:[{id:1,title:"Warehouses list",subModule:"warehouse/list",gate:"show_all_warehouses",to:"/warehouses"}]},{id:11,title:"Users",module:"user",gate:"access_to_users",hasChildren:!0,icon:{type:"svg",value:"assets/img/icons/users1.svg"},children:[{id:1,title:"Users List",subModule:"user/list",gate:"show_all_users",to:"/users"},{id:2,title:"Add User",subModule:"user/add",gate:"create_user",to:"/users/add"},{id:3,title:"Roles List",subModule:"user/roles",gate:"show_all_roles",to:"/users/roles"},{id:4,title:"Add Role",subModule:"user/addRole",gate:"create_role",to:"/users/addRole"}]},{id:15,title:"Sheets",module:"sheets",to:"/sheets",gate:"access_to_sheets",hasChildren:!1,icon:{type:"icon",value:"mdi-note-text-outline"}},{id:12,title:"Settings",module:"settings",to:"/settings",gate:"access_to_account",hasChildren:!1,icon:{type:"svg",value:"assets/img/icons/settings.svg"}},{id:13,title:"Orders",module:"followup",to:"/followup",hasChildren:!1,gate:"follow_up_orders",icon:{type:"icon",value:"mdi-package-variant-closed"}}];var ea=a(9234),aa=a(2127);const ra={key:0},sa={class:"d-flex align-center"},ia={class:"tw-rounded-md tw-bg-gray-50"},la={class:"tw-h-full py-2"},oa={key:1},na={key:2},da={key:3};function wa(t,e,a,r,i,l){const o=(0,s.up)("SidebarSales"),n=(0,s.up)("SidebarDelivery"),d=(0,s.up)("SidebarAgente");return(0,s.wg)(),(0,s.iD)("div",null,[!t.$can(a.link.gate)&&"all"!=a.link.gate||i.disabled_links.includes(a.link.id)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ra,[(0,s.Wm)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":i.isActive}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:a.link.hasChildren?"":a.link.to,link:""},{default:(0,s.w5)((()=>[(0,s._)("div",sa,["icon"==a.link.icon.type?((0,s.wg)(),(0,s.j4)(X.t,{key:0,icon:a.link.icon.value,color:i.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,s.kq)("",!0),"svg"==a.link.icon.type?((0,s.wg)(),(0,s.j4)(Kt.f,{key:1,src:i.localUrl+a.link.icon.value,"max-width":"18",class:(0,Q.C_)([{active:i.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,s.kq)("",!0),(0,s.Wm)(aa.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":i.isActive}]),textContent:(0,Q.zw)(a.link.title)},null,8,["class","textContent"]),(0,s.Wm)(ea.C),a.link.hasChildren?((0,s.wg)(),(0,s.j4)(X.t,{key:2,class:(0,Q.C_)(["item-icon",{activeRotate:i.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,s.kq)("",!0)])])),_:1},8,["class","to"]),a.link.hasChildren?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":i.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,s._)("div",ia,[(0,s.Wm)(Qe.i,{density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedChildren,(t=>((0,s.wg)(),(0,s.j4)(Be.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,s.w5)((()=>[(0,s._)("div",la,[(0,s.Wm)(X.t,{size:"x-small",class:"mr-2",color:l.isSublinkActive(t)?"primary-color":"secondary-color",icon:l.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,s._)("span",{class:(0,Q.C_)(["tw-text-sm",{"text-primary-color":l.isSublinkActive(t)}])},(0,Q.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,s.kq)("",!0)])),4==a.link.id?((0,s.wg)(),(0,s.iD)("div",oa,[(0,s.Wm)(o)])):(0,s.kq)("",!0),7==a.link.id?((0,s.wg)(),(0,s.iD)("div",na,[(0,s.Wm)(n)])):(0,s.kq)("",!0),8==a.link.id?((0,s.wg)(),(0,s.iD)("div",da,[(0,s.Wm)(d)])):(0,s.kq)("",!0)])}const ca={key:0},ua={class:"d-flex align-center"},pa={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},ma={key:1,class:"tw-text-xs"},ha={class:"tw-rounded-md tw-bg-gray-50"},ga={class:"tw-h-full py-2"};function fa(t,e,a,r,i,l){return t.$can(i.link.gate)||"all"==i.link.gate?((0,s.wg)(),(0,s.iD)("div",ca,[(0,s.Wm)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":i.isActive}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:i.link.hasChildren?"":i.link.to,link:""},{default:(0,s.w5)((()=>[(0,s._)("div",ua,["icon"==i.link.icon.type?((0,s.wg)(),(0,s.j4)(X.t,{key:0,icon:i.link.icon.value,color:i.isActive?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"])):(0,s.kq)("",!0),"svg"==i.link.icon.type?((0,s.wg)(),(0,s.j4)(Kt.f,{key:1,src:i.localUrl+i.link.icon.value,"max-width":"18",class:(0,Q.C_)([{active:i.isActive},"mr-2 tw-fill-white"]),size:"small"},null,8,["src","class"])):(0,s.kq)("",!0),(0,s.Wm)(aa.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":i.isActive}]),textContent:(0,Q.zw)(i.link.title)},null,8,["class","textContent"]),(0,s._)("div",pa,[(i.isLoaded,(0,s.kq)("",!0)),(i.isLoaded,(0,s.wg)(),(0,s.iD)("p",ma,(0,Q.zw)(l.count),1))]),(0,s.Wm)(ea.C),i.link.hasChildren?((0,s.wg)(),(0,s.j4)(X.t,{key:2,class:(0,Q.C_)(["item-icon",{activeRotate:i.isActive}]),icon:"mdi-chevron-right"},null,8,["class"])):(0,s.kq)("",!0)])])),_:1},8,["class","to"]),i.link.hasChildren?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([{"!tw-max-h-[1000px] mb-2 mt-n3":i.isActive},"tw-max-h-0 tw-w-auto mx-3 tw-overflow-hidden tw-duration-300"])},[(0,s._)("div",ha,[(0,s.Wm)(Qe.i,{density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedChildren,(t=>((0,s.wg)(),(0,s.j4)(Be.l,{key:t.id,link:"",exact:"",active:!1,to:t.to,height:"10",class:"!tw-h-fit !tw-py-0"},{default:(0,s.w5)((()=>[(0,s._)("div",ga,[(0,s.Wm)(X.t,{size:"x-small",class:"mr-2",color:l.isSublinkActive(t)?"primary-color":"secondary-color",icon:l.isSublinkActive(t)?"mdi-chevron-double-right":"mdi-circle-medium"},null,8,["color","icon"]),(0,s._)("span",{class:(0,Q.C_)(["tw-text-sm",{"text-primary-color":l.isSublinkActive(t)}])},(0,Q.zw)(t.title),3)])])),_:2},1032,["to"])))),128))])),_:1})])],2)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)}var va={props:[],data(){return{localUrl:F,isActive:!1,isLoaded:!1,link:{id:4,module:"sale",title:"Sales",hasChildren:!0,gate:"access_to_sales",icon:{type:"icon",value:"mdi-sale"},children:[{id:1,title:"Sales list",subModule:"sale/list",gate:"show_all_sales",to:"/sales"},{id:4,title:"New Sales list",subModule:"sale/newlist",gate:"show_all_sales",to:"/sales/new"},{id:2,title:"Expidation",subModule:"sale/expidation",gate:"show_all_expidations",to:"/sales/expidation"},{id:3,title:"Shipping",subModule:"sale/shipping",gate:"show_all_expidations",to:"/sales/shipping"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},sales(){return this.$store.getters["sale/sales"]},count(){return this.$store.getters["sale/count"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const ya=(0,d.Z)(va,[["render",fa],["__scopeId","data-v-d76ba86a"]]);var xa=ya;const _a={key:0},ba={class:"d-flex align-center"},ka={class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Ca={key:1,class:"tw-text-xs"};function Da(t,e,a,r,i,l){return t.$can(i.link.gate)||"all"==i.link.gate?((0,s.wg)(),(0,s.iD)("div",_a,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.link.children,(a=>((0,s.wg)(),(0,s.j4)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==a.to}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:a.to,link:"",key:a.id},{default:(0,s.w5)((()=>[(0,s._)("div",ba,[(0,s.Wm)(X.t,{icon:a.icon,color:t.$route.path==a.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,s.Wm)(aa.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==a.to}]),textContent:(0,Q.zw)(a.title)},null,8,["class","textContent"]),(0,s.Wm)(ea.C),(0,s._)("div",ka,[l.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})),l.fetched?((0,s.wg)(),(0,s.iD)("p",Ca,(0,Q.zw)(1==a.id?l.orders.length-l.deliveredOrders.length:l.deliveredOrders.length),1)):(0,s.kq)("",!0)])])])),_:2},1032,["class","to"])))),128))])):(0,s.kq)("",!0)}class Sa{async delivery(){return await Y.getCookie(),M.get("api/dashboard/delivery")}async agente(){return await Y.getCookie(),M.get("api/dashboard/agente")}}var za=new Sa,Ua={props:[],data(){return{localUrl:F,isActive:!1,isLoaded:!1,link:{id:7,module:"delivery",title:"Orders",hasChildren:!1,gate:"access_to_delivery",icon:{type:"icon",value:"mdi-bike"},children:[{id:1,title:"Orders",subModule:"delivery/list",gate:"show_all_deliveries",to:"/deliveries",icon:"mdi-truck"},{id:2,title:"Delivered Orders",subModule:"delivery/delivered",gate:"show_all_deliveries",to:"/delivered",icon:"mdi-truck-check"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,za.delivery().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"].filter((t=>"confirmer"==t.confirmation))},deliveredOrders(){return this.orders.filter((t=>"livrer"==t.delivery))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&this.getOrders()}};const La=(0,d.Z)(Ua,[["render",Da],["__scopeId","data-v-69fa82e9"]]);var Pa=La;const Aa={key:0},Wa={class:"d-flex align-center"},$a={key:0,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Ea={key:1,class:"tw-text-xs"},qa={key:1,class:"tw-w-fit tw-h-[24px] tw-flex tw-items-center tw-justify-center tw-px-1 tw-bg-orange-500 tw-text-sm tw-text-white tw-rounded tw-ml-2"},Oa={key:1,class:"tw-text-xs"};function Ta(t,e,a,r,i,l){return t.$can(i.link.gate)||"all"==i.link.gate?((0,s.wg)(),(0,s.iD)("div",Aa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.link.children,(a=>((0,s.wg)(),(0,s.j4)(Be.l,{class:(0,Q.C_)(["mx-3 mb-2",{"bg-secondary-color":t.$route.path==a.to}]),onClick:e[0]||(e[0]=t=>l.handleClick()),density:"comfortable",active:!1,ripple:!1,to:a.to,link:"",key:a.id},{default:(0,s.w5)((()=>[(0,s._)("div",Wa,[(0,s.Wm)(X.t,{icon:a.icon,color:t.$route.path==a.to?"white":"grey-darken-2",class:"mr-2",size:"small"},null,8,["icon","color"]),(0,s.Wm)(aa.V,{class:(0,Q.C_)(["text-body-2 font-weight-regular",{"text-white":t.$route.path==a.to}]),textContent:(0,Q.zw)(a.title)},null,8,["class","textContent"]),(0,s.Wm)(ea.C),1!=a.id?((0,s.wg)(),(0,s.iD)("div",$a,[l.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})),l.fetched?((0,s.wg)(),(0,s.iD)("p",Ea,(0,Q.zw)(2==a.id?l.myOrders.length:l.confirmedOrders.length),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),1==a.id?((0,s.wg)(),(0,s.iD)("div",qa,[i.isCountLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"white",class:"tw-animate-spin",size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0),i.isCountLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",Oa,(0,Q.zw)(i.available),1))])):(0,s.kq)("",!0)])])),_:2},1032,["class","to"])))),128))])):(0,s.kq)("",!0)}class Va{async all(){return await Y.getCookie(),M.get("api/sales")}async delete(t){return await Y.getCookie(),M.get("api/sales/delete/"+t)}async update(t,e){return await Y.getCookie(),M.post("api/orders/update/"+t,e)}async create(t){return await Y.getCookie(),M.post("api/sales/new",t)}async getNewOrders(t){return await Y.getCookie(),M.post("api/sales/fresh",{ids:t})}async agenteOrders(){return await Y.getCookie(),M.get("api/orders")}async agenteConfirmedOrders(){return await Y.getCookie(),M.get("api/orders/confirmer")}async agenteAddOrder(){return await Y.getCookie(),M.get("api/orders/add")}async agenteGetOrder(){return await Y.getCookie(),M.get("api/orders/toconfirmate")}async agenteUpdateConfirmation(t,e,a={}){return await Y.getCookie(),M.post("api/orders/update/confirmation/"+t,{confirmation:e,...a})}async agenteUpdateConfirmationWithNote(t,e,a){return await Y.getCookie(),M.post("api/orders/update/confirmationandnote/"+t,{confirmation:e,note:a})}async agenteUpdateUpsell(t,e){return await Y.getCookie(),M.post("api/orders/update/upsell/"+t,{upsell:e})}async agenteUpdateAffectaion(t,e){return await Y.getCookie(),M.post("api/orders/update/affectation/"+t,{affectation:e})}async agenteUpdateNote(t,e){return await Y.getCookie(),M.post("api/orders/update/note/"+t,{note:e})}async deliveryOrders(){return await Y.getCookie(),M.get("api/orders/todelivery")}async deliveryDeliveredOrders(){return await Y.getCookie(),M.get("api/orders/delivred")}async deliveryUpdateDelivery(t,e,a){return await Y.getCookie(),M.post("api/orders/update/delivery/"+t,{delivery:e,...a})}async history(t){return await Y.getCookie(),M.get("api/orders/history/show/"+t)}async resetSale(t){return await Y.getCookie(),M.post("api/sales/reset",{ids:t})}async scanSale(t){return await Y.getCookie(),M.post("api/sales/scan",t)}async availableOrders(){return await Y.getCookie(),M.get("api/orders/count")}}var Fa=new Va,Ia={props:[],data(){return{localUrl:F,isActive:!1,isLoaded:!1,isCountLoading:!1,available:0,link:{id:6,module:"order",title:"Orders",hasChildren:!0,gate:"access_to_orders",icon:{type:"icon",value:"mdi-barcode-scan"},children:[{id:1,title:"Order",subModule:"order/show",gate:"show_all_orders",to:"/order",icon:"mdi-plus-box"},{id:2,title:"My Orders",subModule:"order/list",gate:"show_all_orders",to:"/orders",icon:"mdi-package-variant-closed"},{id:3,title:"Confirmed Orders",subModule:"order/confirmed",gate:"show_all_orders",to:"/orders/confirmed",icon:"mdi-checkbox-marked"}]}}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path},getOrders(){return this.isLoaded=!1,za.agente().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setAllOrders",e),this.$store.dispatch("order/setFetched",!0),this.isLoaded=!0}console.log(t)})).catch(this.$handleApiError)},getCountOrders(){this.isCountLoading=!0,Fa.availableOrders().then((t=>{console.log(t),"SUCCESS"==t.data.code&&(this.available=t.data.data.availble)}),this.$handleApiError).finally((()=>{this.isCountLoading=!1}))}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))},orders(){return this.$store.getters["order/allOrders"]},myOrders(){return this.orders.filter((t=>"confirmer"!=t.confirmation))},confirmedOrders(){return this.orders.filter((t=>"confirmer"==t.confirmation))},fetched(){return this.$store.getters["order/fetched"]}},watch:{$route(){this.isActive=this.isLinkActive()},orders(){this.getCountOrders()}},mounted(){this.isActive=this.isLinkActive(),this.$can(this.link.gate)&&(this.getOrders(),this.getCountOrders())}};const Ra=(0,d.Z)(Ia,[["render",Ta],["__scopeId","data-v-0cd1b9c4"]]);var ja=Ra,Na={props:["link"],components:{SidebarSales:xa,SidebarDelivery:Pa,SidebarAgente:ja},data(){return{localUrl:F,disabled_links:Xe,isActive:!1}},methods:{handleClick(){this.$route.path!==this.link.to?this.isActive=!this.isActive:this.isActive=!0},isSublinkActive(t){return this.$route.path==t.to},isLinkActive(){return this.link.hasChildren?this.link.module==this.$route.meta.module:this.link.to===this.$route.path}},computed:{allowedChildren(){return this.link?.children.filter((t=>this.$can(t.gate)||"all"===t.gate))}},watch:{$route(){this.isActive=this.isLinkActive()}},mounted(){this.isActive=this.isLinkActive()}};const Ma=(0,d.Z)(Na,[["render",wa],["__scopeId","data-v-35ca0437"]]);var Ha=Ma,Ya={components:{SidebarItem:Ha},props:["active"],data(){return{localUrl:F,drawer:!0,links:ta}},computed:{},watch:{active(){this.drawer=!this.drawer}},methods:{},mounted(){this.$vuetify.display.mdAndDown&&(this.drawer=!1)}};const Za=(0,d.Z)(Ya,[["render",Je]]);var Ka=Za,Ba=a(4410),Qa=a.n(Ba),Ga=a(6027);class Ja{async all(){return await Y.getCookie(),M.get("api/sheets")}async create(t){await Y.getCookie();const e={name:t.name,sheet_id:t.sheet_id,sheet_name:t.sheet_name,auto_fetch:t.auto_fetch};return M.post("api/sheets",e)}async update(t,e){await Y.getCookie();const a={name:e.name,sheet_id:e.sheet_id,sheet_name:e.sheet_name,auto_fetch:e.auto_fetch};return M.post("api/sheets/"+t,a)}async delete(t){return await Y.getCookie(),M["delete"]("api/sheets/"+t)}async updateAutoFetch(t,e){return await Y.getCookie(),M.post("api/sheets/"+t+"/auto-fetch",{autoFetch:e})}async sync(t){return await Y.getCookie(),M.get("api/sync/"+t)}async sync_all(){return await Y.getCookie(),M.get("api/sync")}async auto(){return await Y.getCookie(),M.post("api/sync")}async saveOrders(t){return await Y.getCookie(),M.get("api/sync/"+t+"/save")}}var Xa=new Ja;class tr{async create(t){await Y.getCookie();const e=new FormData;return e.append("name",t.name),e.append("buying_price",t.buyingPrice),e.append("selling_price",t.sellingPrice),e.append("ref",t.reference),e.append("variations",JSON.stringify(t.variants)),e.append("offers",JSON.stringify(t.offers)),e.append("description",t.description),e.append("image",t.image),e.append("deliveries",JSON.stringify(t.selectedDeliveries)),e.append("status",1),N.post("api/products/new",e)}async update(t,e){await Y.getCookie();const a=new FormData;return a.append("name",e.name),a.append("buying_price",e.buyingPrice),a.append("selling_price",e.sellingPrice),a.append("ref",e.reference),a.append("variations",JSON.stringify(e.variants)),a.append("offers",JSON.stringify(e.offers)),a.append("description",e.description),a.append("image",e.image),a.append("deliveries",JSON.stringify(e.selectedDeliveries)),a.append("status",1),N.post("api/products/update/"+t,a)}async all(){return await Y.getCookie(),M.get("api/products")}async allForOrder(t){return await Y.getCookie(),M.get("api/products/for-order/"+t)}async getProduct(t){return await Y.getCookie(),M.get("api/products/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/products/delete/"+t)}async stockAlert(){return await Y.getCookie(),M.get("api/product/stockAlert")}}var er=new tr,ar={components:{AppHeader:Ke,AppSidebar:Ka,Alert:Et},data(){return{drawer:!1,subscribed:!1,fetching:null,delay:6e4,showScrollUpButton:!1,firstFetch:!1}},computed:{isLoggedIn(){return this.$store.getters["user/isLoggedIn"]},cities(){return this.$store.getters["city/cities"]},user(){return this.$store.getters["user/user"]},sales(){return this.$store.getters["sale/sales"]},salesFetched(){return this.$store.getters["sale/fetched"]}},methods:{toggleSidebar(){this.drawer=!this.drawer},checkScroll(){this.showScrollUpButton=window.scrollY>100},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},async getCities(){if(0==this.cities.length||1!=localStorage.getItem("update_cities"))return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e),localStorage.setItem("update_cities",1)}))},subscribe(){console.log(Qa());const t=new Ga.Z({broadcaster:"pusher",key:"ABCDEFG",wsHost:"127.0.0.1",wsPort:6001,forceTLS:!1,disableStats:!0,cluster:"mt1"});window.Echo=t,t.channel("notification").listenToAll((t=>{console.log(t)})),this.subscribed=!0},sync_sheets(){"admin"==this.user.role?Xa.sync_all().then((t=>{if("SUCCESS"==t.data.code){const e=[...t.data.data.orders,...this.sales];this.$store.dispatch("sale/setSales",e),t.data.data.orders.length>0&&this.$alert({type:"info",title:t.data.data.orders.length+" New orders has been added"})}})):Xa.auto()},getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return er.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},fetchNewOrders(){if(this.salesFetched||!this.firstFetch){const t=this.sales.map((t=>t.id));return Fa.getNewOrders(t).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.orders,a=t.data.data.count;this.$store.dispatch("sale/setCount",a),e.length>0&&(this.$store.dispatch("sale/addSales",e),this.$alert({type:"info",title:e.length+" New orders has been added"})),this.firstFetch=!0}}))}},getSales(){return this.isLoaded=!1,Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}},mounted(){this.getCities(),"admin"==this.user.role&&(this.fetchNewOrders().finally((()=>{this.$can("access_to_sales")&&this.getSales()})),this.fetching=setInterval(this.fetchNewOrders,this.delay)),this.$can("show_all_products")&&this.getProducts(),this.getUsers(),window.addEventListener("scroll",this.checkScroll)},unmounted(){window.removeEventListener("scroll",this.checkScroll)}};const rr=(0,d.Z)(ar,[["render",Rt]]);var sr=rr;const ir={key:0};function lr(t,e,a,r,i,l){return i.exists?((0,s.wg)(),(0,s.iD)("div",ir,[((0,s.wg)(),(0,s.j4)((0,s.LL)(l.dashboard)))])):(0,s.kq)("",!0)}var or=a(6824),nr=a(8521);const dr={key:0},wr={key:1},cr=(0,s._)("div",{class:"mb-2 mt-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Online")])],-1),ur={class:"py-2 px-2 tw-border bg-white tw-w-full tw-rounded"},pr={class:"mb-2 mt-2 tw-flex tw-justify-between tw-items-center tw-w-full"},mr={class:"tw-flex tw-items-center tw-justify-between tw-w-full"},hr=(0,s._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Statistiques",-1),gr=["disabled"],fr={key:0,class:"tw-flex tw-items-center tw-gap-2"},vr={key:1},yr=(0,s._)("svg",{"aria-hidden":"true",role:"status",class:"tw-inline tw-w-4 tw-h-4 tw-mr-3 tw-text-white tw-animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,s._)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),xr={class:"px-5 tw-border bg-white tw-w-full tw-rounded-md"};function _r(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("UsersTable"),d=(0,s.up)("FilterTabs"),w=(0,s.up)("DashItem"),c=(0,s.up)("TabSwitcher");return(0,s.wg)(),(0,s.iD)("div",null,[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",dr,[(0,s.Wm)(o)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",wr,[cr,(0,s._)("div",ur,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(n)])),_:1})])),_:1})]),(0,s._)("div",pr,[(0,s._)("div",mr,[hr,(0,s._)("button",{disabled:i.updating,onClick:e[0]||(e[0]=(...t)=>l.updateSales&&l.updateSales(...t)),type:"button",class:"tw-text-white tw-w-fit tw-my-2 tw-bg-gradient-to-r tw-from-cyan-500 tw-to-blue-500 hover:tw-bg-gradient-to-bl focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-cyan-300 dark:focus:tw-ring-cyan-800 tw-font-medium tw-rounded-lg tw-text-sm tw-px-5 tw-py-2.5 tw-text-center tw-mr-2 dark:tw-bg-blue-600 dark:hover:tw-bg-blue-700 tw-duration-200 tw-gap-2 tw-pointer-events-auto tw-inline-flex tw-items-center"},[i.updating?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",fr,[(0,s.Wm)(X.t,{class:"tw-text-sm",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s.Uk)(" Refresh ")])),i.updating?((0,s.wg)(),(0,s.iD)("div",vr,[yr,(0,s.Uk)(" loading... ")])):(0,s.kq)("",!0)],8,gr)])]),(0,s._)("div",xr,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t)},null,8,["filters"])])),_:1})])),_:1}),(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffaires},null,8,["dash"])])),_:1}),(0,s.Wm)(nr.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffairesVerse},null,8,["dash"])])),_:1}),(0,s.Wm)(nr.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffairesNonVerse},null,8,["dash"])])),_:1}),(0,s.Wm)(nr.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffairesEnCaisse},null,8,["dash"])])),_:1})])),_:1}),(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{"filtered-sales":l.filteredSales},null,8,["filtered-sales"])])),_:1})])),_:1})])])):(0,s.kq)("",!0)])}var br=a(4286);const kr={class:"tw-flex tw-items-center"},Cr={class:"tw-flex tw-flex-col tw-h-full tw-text-neutral-600"},Dr={class:"tw-text-lg tw-font-bold"},Sr={class:"tw-text-sm"};function zr(t,e,a,r,i,l){return(0,s.wg)(),(0,s.j4)(br.C,{class:"tw-rounded-lg tw-border pa-5 py-2",color:"white",height:"fit"},{default:(0,s.w5)((()=>[(0,s._)("div",kr,[(0,s._)("div",{class:(0,Q.C_)([l.bgColor,"pa-3 rounded-circle tw-w-fit tw-mr-3"])},[(0,s.Wm)(X.t,{color:a.dash.color,size:"large",icon:a.dash.icon},null,8,["color","icon"])],2),(0,s._)("div",Cr,[(0,s._)("p",Dr,(0,Q.zw)(a.dash.value),1),(0,s.Wm)(ea.C),(0,s._)("p",Sr,(0,Q.zw)(a.dash.title),1)])])])),_:1})}var Ur={props:["dash"],computed:{bgColor(){const t={orange:"tw-bg-orange-500/10",green:"tw-bg-green-500/10",blue:"tw-bg-blue-500/10",pink:"tw-bg-pink-500/10",red:"tw-bg-red-500/10",yellow:"tw-bg-yellow-500/10"};return t[this.dash.color]}}};const Lr=(0,d.Z)(Ur,[["render",zr]]);var Pr=Lr;const Ar={key:0,class:""},Wr={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},$r=(0,s._)("div",{class:"tw-w-[120px] tw-h-[55px] tw-bg-neutral-300/10 tw-animate-pulse tw-rounded tw-border tw-grid tw-grid-cols-12"},null,-1),Er=[$r],qr={key:1,class:"tw-min-h-[50px]"},Or={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Tr={class:"py-2 px-3 tw-rounded tw-border tw-grid tw-grid-cols-12"},Vr={class:"tw-col-span-12 tw-font-medium tw-capitalize tw-text-sm tw-text-neutral-600 tw-whitespace-nowrap"},Fr={class:"tw-col-span-12 tw-whitespace-nowrap tw-text-xs"},Ir={key:0,class:"tw-text-red-500 tw-flex tw-items-center tw-gap-2"},Rr=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-red-400"},null,-1),jr={key:1},Nr={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},Mr=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Hr={key:1,class:"tw-flex tw-items-center tw-gap-2"},Yr=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-yellow-400"},null,-1);function Zr(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Ar,[(0,s._)("div",Wr,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t},Er))),64))])])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",qr,[(0,s._)("div",Or,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.users,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id},[(0,s._)("div",Tr,[(0,s._)("div",Vr,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1),(0,s._)("div",Fr,[t.last_action?((0,s.wg)(),(0,s.iD)("div",jr,[1==l.isOnline(l.lastSeen(t.last_action))?((0,s.wg)(),(0,s.iD)("div",Nr,[Mr,(0,s.Uk)(" Online ")])):((0,s.wg)(),(0,s.iD)("div",Hr,[Yr,(0,s.Uk)(" "+(0,Q.zw)(l.lastSeen(t.last_action)),1)]))])):((0,s.wg)(),(0,s.iD)("div",Ir,[Rr,(0,s.Uk)(" Never Connected ")]))])])])))),128))]),(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}var Kr=a(8777),Br={components:{},data(){return{isLoaded:!1}},computed:{users(){return this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name))}},methods:{getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),console.log(t),this.isLoaded=!0}})).catch(this.$handleApiError)},lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Kr.x)(e)},isOnline(t){let e=["Just Now","1 minute ago","2 minute ago"];return e.includes(t)}},mounted(){this.getUsers()}};const Qr=(0,d.Z)(Br,[["render",Zr]]);var Gr=Qr,Jr=a(1489),Xr=a(3144),ts=a(9870),es=a(6161),as=a(4722);function rs(t,e,a,r,i,l){return(0,s.wg)(),(0,s.j4)(Jr._,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Xr.d,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>i.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.j4)(ts.L,{key:t.id,value:t.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,s.Wm)(es.Oo,{class:"tw-mt-0",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.j4)(as.H,{key:t.id,value:t.id,transition:"fade-transition","reverse-transition":"fade-transition"},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(t.component),{"filtered-sales":a.filteredSales},null,8,["filtered-sales"]))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const ss={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},is={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ls={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},os={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ns={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ds={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},ws={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},cs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function us(t,e,a,r,i,l){const o=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ss,[(0,s._)("div",is,[(0,s.Wm)(o,{dash:l.totalSales},null,8,["dash"])]),(0,s._)("div",ls,[(0,s.Wm)(o,{dash:l.deliveredSales},null,8,["dash"])]),(0,s._)("div",os,[(0,s.Wm)(o,{dash:l.shippedSales},null,8,["dash"])]),(0,s._)("div",ns,[(0,s.Wm)(o,{dash:l.reportedSales},null,8,["dash"])]),(0,s._)("div",ds,[(0,s.Wm)(o,{dash:l.noanswerSales},null,8,["dash"])]),(0,s._)("div",ws,[(0,s.Wm)(o,{dash:l.canceledSales},null,8,["dash"])]),(0,s._)("div",cs,[(0,s.Wm)(o,{dash:l.transferSales},null,8,["dash"])])])])}const ps={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},ms={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},hs={class:"tw-text-xl tw-font-bold"},gs={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},fs={class:"tw-text-sm"},vs={class:"rounded-circle tw-w-fit tw-mr-3"};function ys(t,e,a,r,i,l){const o=(0,s.up)("number");return(0,s.wg)(),(0,s.j4)(br.C,{class:"tw-rounded-lg",color:a.dash.color,height:"70"},{default:(0,s.w5)((()=>[(0,s._)("div",ps,[(0,s._)("div",ms,[(0,s._)("p",hs,(0,Q.zw)(isNaN(a.dash.pourcentage)?"0.00%":a.dash.pourcentage)+" "+(0,Q.zw)(a.symbol),1),(0,s._)("span",gs,[a.numbers?((0,s.wg)(),(0,s.j4)(o,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:a.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,s.kq)("",!0),(0,s._)("p",fs,(0,Q.zw)(a.dash.title),1)])]),(0,s._)("div",vs,[(0,s.Wm)(X.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:a.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var xs={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const _s=(0,d.Z)(xs,[["render",ys]]);var bs=_s,ks={components:{DashItemTwo:bs},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.sales.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"livrer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.delivery))).length,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"expidier"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-orange",icon:"mdi-truck"}},transferSales(){return{id:8,title:"Transferred",value:this.sales.filter((t=>"transfer"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"transfer"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"purple-darken-1",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length,pourcentage:(100*this.sales.filter((t=>"pas-de-reponse"==t.delivery)).length/this.sales.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},mounted(){Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Cs=(0,d.Z)(ks,[["render",us]]);var Ds=Cs;const Ss={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2 py-5"},zs={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Us={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ls={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ps={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},As={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Ws={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},$s={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},Es={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function qs(t,e,a,r,i,l){const o=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Ss,[(0,s._)("div",zs,[(0,s.Wm)(o,{dash:l.totalSales},null,8,["dash"])]),(0,s._)("div",Us,[(0,s.Wm)(o,{dash:l.confirmedSales},null,8,["dash"])]),(0,s._)("div",Ls,[(0,s.Wm)(o,{dash:l.newSales},null,8,["dash"])]),(0,s._)("div",Ps,[(0,s.Wm)(o,{dash:l.reportedSales},null,8,["dash"])]),(0,s._)("div",As,[(0,s.Wm)(o,{dash:l.noanswerSales},null,8,["dash"])]),(0,s._)("div",Ws,[(0,s.Wm)(o,{dash:l.canceledSales},null,8,["dash"])]),(0,s._)("div",$s,[(0,s.Wm)(o,{dash:l.doubledSales},null,8,["dash"])]),(0,s._)("div",Es,[(0,s.Wm)(o,{dash:l.wrongNumberSales},null,8,["dash"])])])])}var Os={components:{DashItemTwo:bs},props:["filteredSales"],data(){return{isLoaded:!1}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.filteredSales},totalSales(){return{id:1,title:"Total",pourcentage:100,value:this.sales.length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>!t.confirmation)).length/this.sales.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},toProcess(){return{id:3,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>!!t.confirmation&&!["confirmer","livrer","expidier"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"confirmer"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.sales.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"reporter"==t.confirmation)).length/this.sales.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.sales.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.sales.filter((t=>"annuler"==t.confirmation)).length/this.sales.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},noanswerSales(){return{id:6,title:"No Answer",value:this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.sales.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.sales.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}},doubledSales(){return{id:8,title:"Doubled",pourcentage:(100*this.sales.filter((t=>"double"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"double"==t.confirmation)).length,color:"purple-accent-4",icon:"mdi mdi-selection-multiple"}},wrongNumberSales(){return{id:9,title:"Wrong Number",pourcentage:(100*this.sales.filter((t=>"wrong-number"==t.confirmation)).length/this.sales.length).toFixed(2),value:this.sales.filter((t=>"wrong-number"==t.confirmation)).length,color:"purple-lighten-1",icon:"mdi mdi-phone-remove"}}},mounted(){Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)}};const Ts=(0,d.Z)(Os,[["render",qs]]);var Vs=Ts,Fs={components:{DeliveryTab:Ds,ConfirmationTab:Vs},props:["filteredSales"],data(){return{tab:1,tabs:[{id:1,name:"Confirmation",component:"ConfirmationTab"},{id:2,name:"Delivery",component:"DeliveryTab"}]}}};const Is=(0,d.Z)(Fs,[["render",rs]]);var Rs=Is;const js={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4 py-5"},Ns={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ms={class:"tw-relative"},Hs={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ys={class:"tw-relative"},Zs={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Ks=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agents",-1),Bs={class:"tw-relative"},Qs=(0,s._)("option",{value:"all"},"Select",-1),Gs=["value"],Js={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Xs=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Deliveries",-1),ti={class:"tw-relative"},ei=(0,s._)("option",{value:"all"},"Select",-1),ai=["value"],ri={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},si=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Cities",-1),ii={class:"tw-relative"},li=(0,s._)("option",{value:"all"},"Select",-1),oi=["value"],ni={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},di=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Products",-1),wi={class:"tw-relative"},ci=(0,s._)("option",{value:"all"},"Select",-1),ui=["value"],pi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},mi=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Shops",-1),hi={class:"tw-relative"},gi=(0,s._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,s._)("option",{value:"all"},"Select")],-1),fi={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},vi=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sources",-1),yi={class:"tw-relative"},xi=(0,s._)("select",{class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[(0,s._)("option",{value:"all"},"Select")],-1),_i={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},bi=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),ki={class:"tw-relative"},Ci=(0,s._)("option",{value:"all"},"Select",-1),Di=(0,s._)("option",{value:"oui"},"Oui",-1),Si=(0,s._)("option",{value:"non"},"Non",-1),zi=[Ci,Di,Si];function Ui(t,e,a,i,l,o){const n=(0,s.up)("DateFilter");return(0,s.wg)(),(0,s.iD)("div",js,[(0,s._)("div",Ns,[(0,s._)("div",Ms,[(0,s.Wm)(n,{name:"Created Date",filter:l.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>l.dateFilter=t)},null,8,["filter"])])]),(0,s._)("div",Hs,[(0,s._)("div",Ys,[(0,s.Wm)(n,{name:"Dropped Date",filter:l.droppedAtFilter,"onUpdate:filter":e[1]||(e[1]=t=>l.droppedAtFilter=t)},null,8,["filter"])])]),(0,s._)("div",Zs,[Ks,(0,s._)("div",Bs,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.agentFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Qs,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Gs)))),128))],512),[[r.bM,l.agentFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",Js,[Xs,(0,s._)("div",ti,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[ei,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,ai)))),128))],512),[[r.bM,l.deliveryFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",ri,[si,(0,s._)("div",ii,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.cityFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[li,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,oi)))),128))],512),[[r.bM,l.cityFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",ni,[di,(0,s._)("div",wi,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[ci,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,ui)))),128))],512),[[r.bM,l.productFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",pi,[mi,(0,s._)("div",hi,[gi,(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",fi,[vi,(0,s._)("div",yi,[xi,(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",_i,[bi,(0,s._)("div",ki,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},zi,512),[[r.bM,l.upsellFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0)])}const Li={class:"tw-text-sm tw-text-neutral-600"},Pi=["onClick"];function Ai(t,e,a,r,i,l){const o=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("span",Li,(0,Q.zw)(a.name),1),(0,s.Wm)(o,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),l.onDateRangePicked],onCleared:l.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:a})=>[(0,s._)("span",{onClick:t=>a(e)},(0,Q.zw)(t),9,Pi)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var Wi=a(1271),$i=a(2292),Ei=a(1745),qi=a(4253),Oi=a(4819),Ti=a(2143),Vi={props:["name"],data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Wi.Z)(new Date,1),(0,Wi.Z)(new Date,1)]},{label:"This month",range:[(0,$i.Z)(new Date),(0,Ei.Z)(new Date)]},{label:"Last month",range:[(0,$i.Z)((0,qi.Z)(new Date,1)),(0,Ei.Z)((0,qi.Z)(new Date,1))]},{label:"This year",range:[(0,Oi.Z)(new Date),(0,Ti.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const Fi=(0,d.Z)(Vi,[["render",Ai]]);var Ii=Fi,Ri={components:{DateFilter:Ii},props:["filters"],data(){return{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""],isLoaded:!1,dashItems:[{id:1,title:"Total Chiffres d'affaire",value:1200,icon:"mdi-currency-usd",color:"green"},{id:2,title:"Chiffres d'affaire vers",value:"35000 DH",icon:"mdi mdi-credit-card-check-outline",color:"orange"},{id:3,title:"Chiffres d'affaire non vers",value:600,icon:"mdi mdi-credit-card-remove-outline",color:"red"},{id:4,title:"Chiffres d'affaire en caisse",value:543,icon:"mdi mdi-bank",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},watch:{agentFilter(t){this.$emit("update:filters",{...this.filters,agentFilter:t})},deliveryFilter(t){this.$emit("update:filters",{...this.filters,deliveryFilter:t})},productFilter(t){this.$emit("update:filters",{...this.filters,productFilter:t})},cityFilter(t){this.$emit("update:filters",{...this.filters,cityFilter:t})},upsellFilter(t){this.$emit("update:filters",{...this.filters,upsellFilter:t})},dateFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,dateFilter:t})}},droppedAtFilter:{deep:!0,handler(t){this.$emit("update:filters",{...this.filters,droppedAtFilter:t})}}},computed:{agents(){return this.$store.getters["user/agents"]},deliveries(){return this.$store.getters["user/deliveries"]},products(){return this.$store.getters["product/products"]},cities(){return this.$store.getters["city/cities"]}},mounted(){K.deliveries().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setDeliveries",e),this.isLoaded=!0}})).catch(this.$handleApiError),er.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.products;console.log(t.data),this.$store.dispatch("product/setProducts",e),this.isLoaded=!0}})).catch(this.$handleApiError),K.cities().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("city/setCities",e),this.isLoaded=!0}})).catch(this.$handleApiError),K.agents().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data;console.log(t.data),this.$store.dispatch("user/setAgents",e),this.isLoaded=!0}})).catch(this.$handleApiError)}};const ji=(0,d.Z)(Ri,[["render",Ui]]);var Ni=ji;const Mi=t=>{if(!t)return 0;const e=t.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return(parseFloat(t.price?t.price:0)+parseFloat(e)).toFixed(2)},Hi=t=>t?t.split("api/")[1]:null;var Yi={components:{DashItem:Pr,UsersTable:Gr,TabSwitcher:Rs,FilterTabs:Ni},data(){return{updating:!1,filters:{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""]}}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},isLoaded(){return this.$store.getters["sale/fetched"]},filteredSales(){const t=this.filters.agentFilter,e=this.filters.deliveryFilter,a=this.filters.productFilter,r=this.filters.cityFilter,s=this.filters.upsellFilter,i=this.filters.dateFilter[0],l=this.filters.dateFilter[1],o=this.filters.droppedAtFilter[0],n=this.filters.droppedAtFilter[1];return this.sales.filter((d=>{if("all"!==t&&parseInt(d.agente_id)!=parseInt(t))return!1;if("all"!==e&&parseInt(d.affectation)!=parseInt(e))return!1;if("all"!==s&&d.upsell!=s)return!1;if("all"!==a&&!d.items.some((t=>parseInt(t.product_id)==parseInt(a))))return!1;if("all"!==r&&d.city?.toLocaleLowerCase()!=r?.toLocaleLowerCase())return!1;const w=new Date(d.created_at),c=w.getDate(),u=w.getMonth(),p=w.getFullYear();if(i){const t=i.getDate(),e=i.getMonth(),a=i.getFullYear();if(p<a||p===a&&u<e||p===a&&u===e&&c<t)return!1}if(l){const t=l.getDate(),e=l.getMonth(),a=l.getFullYear();if(p>a||p===a&&u>e||p===a&&u===e&&c>t)return!1}const m=new Date(d.dropped_at),h=m.getDate(),g=m.getMonth(),f=w.getFullYear();if(o){const t=o.getDate(),e=o.getMonth(),a=o.getFullYear();if(f<a||f===a&&g<e||f===a&&g===e&&h<t)return!1}if(n){const t=n.getDate(),e=n.getMonth(),a=n.getFullYear();if(f>a||f===a&&g>e||f===a&&g===e&&h>t)return!1}return!0}))},dashChiffreAffaires(){return{id:1,title:"Total Chiffres d'affaire",value:this.getChiffresDaffaire().toFixed(2),icon:"mdi-currency-usd",color:"green"}},dashChiffreAffairesVerse(){return{id:2,title:"Chiffres d'affaire vers",value:this.getChiffresDaffaireVerse().toFixed(2),icon:"mdi mdi-credit-card-check-outline",color:"orange"}},dashChiffreAffairesNonVerse(){return{id:3,title:"Chiffres d'affaire non vers",value:this.getChiffresDaffaireNonVerse().toFixed(2),icon:"mdi mdi-credit-card-remove-outline",color:"red"}},dashChiffreAffairesEnCaisse(){return{id:4,title:"Chiffres d'affaire en caisse",value:this.getChiffresDaffaireEnCaise().toFixed(2),icon:"mdi mdi-bank",color:"yellow"}},newSales(){return{id:1,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,color:"primary-green",icon:"mdi mdi-new-box"}},toProcess(){return{id:2,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livre","expidier"].includes(t.confirmation))).length,color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:3,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi-phone-check"}},deliveredSales(){return{id:4,title:"Delivered",value:this.sales.filter((t=>"livre"==t.confirmation)).length,color:"primary-blue",icon:"mdi-account-check-outline"}},shippedSales(){return{id:5,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.confirmation)).length,color:"red",icon:"mdi-truck"}}},methods:{getSales(){Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},updateSales(){this.updating=!0,Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.updating}})).catch(this.$handleApiError).finally((()=>{this.updating=!1}))},getChiffresDaffaire(){let t=0;return this.filteredSales.forEach((e=>{t+=Mi(e)})),t},getChiffresDaffaireVerse(){let t=0;return this.filteredSales.forEach((e=>{null!=e.factorisations&&e.factorisations.paid&&(t+=Mi(e))})),t},getChiffresDaffaireNonVerse(){let t=0;return this.filteredSales.forEach((e=>{null==e.factorisations||e.factorisations.paid||(t+=Mi(e))})),t},getChiffresDaffaireEnCaise(){return this.getChiffresDaffaire()-this.getChiffresDaffaireVerse()}},mounted(){}};const Zi=(0,d.Z)(Yi,[["render",_r]]);var Ki=Zi;const Bi=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Dashboard")])],-1),Qi={key:0},Gi={key:1},Ji={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Xi={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},tl={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},el={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},al={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},rl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},sl={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-5"},il={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function ll(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[Bi,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Qi,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Gi,[(0,s._)("div",Ji,[(0,s._)("div",Xi,[(0,s._)("div",tl,[(0,s.Wm)(n,{dash:l.earningsDash,symbol:"DH",numbers:!1},null,8,["dash"])]),(0,s._)("div",el,[(0,s.Wm)(n,{dash:l.totalSales},null,8,["dash"])]),(0,s._)("div",al,[(0,s.Wm)(n,{dash:l.deliveredSales},null,8,["dash"])]),(0,s._)("div",rl,[(0,s.Wm)(n,{dash:l.reportedSales},null,8,["dash"])]),(0,s._)("div",sl,[(0,s.Wm)(n,{dash:l.shippedSales},null,8,["dash"])]),(0,s._)("div",il,[(0,s.Wm)(n,{dash:l.canceledSales},null,8,["dash"])])])])])):(0,s.kq)("",!0)])}var ol={components:{DashItemTwo:bs},data(){return{isLoaded:!0,orders:[],cities:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},totalSales(){return{id:1,title:"Total Orders",value:this.orders.length,pourcentage:100,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},deliveredSales(){return{id:2,title:"Delivered",value:this.filterByStatus("livrer").length,pourcentage:100*this.filterByStatus("livrer").length/this.orders.length,color:"primary-green",icon:"mdi-account-check-outline"}},toProcess(){return{id:3,title:"Process",value:231,color:"primary-orange",icon:"mdi-reload"}},shippedSales(){return{id:4,title:"Shipped",value:this.filterByStatus("expidier").length,pourcentage:100*this.filterByStatus("expidier").length/this.orders.length,color:"primary-orange",icon:"mdi-truck"}},reportedSales(){return{id:5,title:"Reported",value:this.filterByStatus("reporter").length,pourcentage:100*this.filterByStatus("reporter").length/this.orders.length,color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.filterByStatus("annuler").length,pourcentage:100*this.filterByStatus("annuler").length/this.orders.length,color:"red-accent-3",icon:"mdi mdi-cancel"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:this.earnings,color:"green-darken-4",icon:"mdi-currency-usd"}},earnings(){return this.orders.reduce(((t,e)=>null==e.factorisations||e.factorisations.paid||e.factorisations.close?t:t+e.factorisations.price),0)}},methods:{filterByStatus(t){return this.orders.filter((e=>e.delivery==t))},getOrders(){this.isLoaded=!1,za.delivery().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const nl=(0,d.Z)(ol,[["render",ll]]);var dl=nl;const wl=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Dashboard ")])],-1),cl={key:0},ul={key:1},pl={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ml={class:"tw-grid tw-mb-5 tw-grid-cols-4 md:tw-grid-cols-4 lg:tw-grid-cols-5 tw-gap-2"},hl={class:"lg:tw-col-span-1 md:tw-col-span-1 tw-col-span-4"},gl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},fl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},vl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},yl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},xl={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"},_l={class:"lg:tw-col-span-1 md:tw-col-span-2 tw-col-span-4"};function bl(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("DashItemTwo");return(0,s.wg)(),(0,s.iD)("div",null,[wl,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",cl,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",ul,[(0,s._)("div",pl,[(0,s._)("div",ml,[(0,s._)("div",hl,[(0,s.Wm)(n,{dash:l.earningsDash,symbol:i.currency,numbers:!1},null,8,["dash","symbol"])]),(0,s._)("div",gl,[(0,s.Wm)(n,{dash:l.totalSales},null,8,["dash"])]),(0,s._)("div",fl,[(0,s.Wm)(n,{dash:l.confirmedSales},null,8,["dash"])]),(0,s._)("div",vl,[(0,s.Wm)(n,{dash:l.reportedSales},null,8,["dash"])]),(0,s._)("div",yl,[(0,s.Wm)(n,{dash:l.noanswerSales},null,8,["dash"])]),(0,s._)("div",xl,[(0,s.Wm)(n,{dash:l.canceledSales},null,8,["dash"])]),(0,s._)("div",_l,[(0,s.Wm)(n,{dash:l.upsellSales},null,8,["dash"])])])])])):(0,s.kq)("",!0)])}var kl={components:{DashItemTwo:bs},data(){return{currency:R,isLoaded:!0,orders:[]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},totalSales(){return{id:1,title:"Total",pourcentage:0===this.orders.length?0:100,value:this.orders.filter((t=>"double"!=t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi mdi-all-inclusive"}},newSales(){return{id:2,title:"New",value:this.orders.filter((t=>!t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>!t.confirmation)).length/this.orders.length).toFixed(2),color:"grey",icon:"mdi mdi-new-box"}},confirmedSales(){return{id:4,title:"Confirmed",value:this.orders.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"confirmer"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-green",icon:"mdi-phone-check"}},reportedSales(){return{id:5,title:"Reported",value:this.orders.filter((t=>"reporter"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"reporter"==t.confirmation)).length/this.orders.length).toFixed(2),color:"primary-blue",icon:"mdi mdi-clock-outline"}},canceledSales(){return{id:6,title:"Canceled",value:this.orders.filter((t=>"annuler"==t.confirmation)).length,pourcentage:(100*this.orders.filter((t=>"annuler"==t.confirmation)).length/this.orders.length).toFixed(2),color:"red-accent-3",icon:"mdi mdi-cancel"}},upsellSales(){return{id:6,title:"Upsell",value:this.orders.filter((t=>"oui"==t.upsell)).length,pourcentage:(100*this.orders.filter((t=>"oui"==t.upsell)).length/this.orders.length).toFixed(2),color:"#2563eb",icon:"mdi mdi-transfer-up"}},earningsDash(){return{id:2,title:"Earnings",pourcentage:.7*this.orders.filter((t=>"oui"==t.upsell&&"livrer"==t.delivery)).length,color:"green-darken-4",icon:"mdi-currency-usd"}},noanswerSales(){return{id:6,title:"No Answer",value:this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length,pourcentage:(100*this.orders.filter((t=>["day-one-call-one","day-one-call-two","day-one-call-three","day-two-call-one","day-two-call-two","day-two-call-three","day-three-call-one","day-three-call-two","day-three-call-three"].includes(t.confirmation))).length/this.orders.length).toFixed(2),color:"yellow-darken-3",icon:"mdi mdi-headphones-off"}}},methods:{filterByStatus(t){return this.orders.filter((e=>e.confirmation==t))},getOrders(){this.isLoaded=!1,za.agente().then((t=>{"SUCCESS"==t.data.code&&(this.orders=t.data.data.orders)})).finally((()=>{this.isLoaded=!0}))}},mounted(){this.getOrders()}};const Cl=(0,d.Z)(kl,[["render",bl]]);var Dl=Cl;const Sl=(0,s._)("div",{class:"tw-w-full tw-rounded-lg tw-py-5 tw-px-5 tw-flex tw-flex-center tw-justify-center"},[(0,s._)("h1",{class:"tw-text-lg"},"Welcome to Dashboard !")],-1),zl=[Sl];function Ul(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,zl)}var Ll={components:{},data(){return{dashItems:[{id:1,title:"Orders",value:1200,icon:"mdi-package-variant-closed",color:"orange"},{id:2,title:"Total Sales",value:"35000 DH",icon:"mdi-currency-usd",color:"green"},{id:3,title:"Orders Confirmed",value:600,icon:"mdi-phone-check-outline",color:"blue"},{id:4,title:"Orders Delivered",value:543,icon:"mdi-truck-check-outline",color:"pink"}],filledDashItems:[{id:1,title:"Customers",value:2300,color:"primary-orange",icon:"mdi-account-outline"},{id:2,title:"Suppliers",value:300,color:"primary-blue",icon:"mdi-account-check-outline"},{id:3,title:"Purchase Invoice",value:1100,color:"primary-indigo",icon:"mdi-file-document-outline"},{id:4,title:"Agents",value:10,color:"primary-green",icon:"mdi-moped-outline"}]}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role}}};const Pl=(0,d.Z)(Ll,[["render",Ul]]);var Al=Pl;const Wl={class:"tw-w-full tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},$l=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),El=[$l];function ql(t,e,a,r,i,l){const o=(0,s.up)("DashCard");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Wl,[i.fetching?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},El))),64)):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(i.dashes,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))])])}const Ol={class:"tw-bg-white tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},Tl={class:"tw-flex tw-justify-between"},Vl={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Fl={class:"tw-text-gray-400 tw-uppercase tw-text-xs tw-font-medium"},Il={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Rl={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function jl(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Ol,[(0,s._)("div",Tl,[(0,s._)("div",null,[(0,s._)("div",Vl,[(0,s._)("p",Fl,(0,Q.zw)(a.title),1),a.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-xs tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,Q.j5)({background:a.color})},(0,Q.zw)(a.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",Il,[(0,s._)("span",Rl,(0,Q.zw)(a.value),1)])]),(0,s._)("div",{style:(0,Q.j5)({background:a.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(X.t,{style:(0,Q.j5)(["Orders"==a.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(a.icon),1)])),_:1},8,["style"])],4)])])])}var Nl={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const Ml=(0,d.Z)(Nl,[["render",jl]]);var Hl=Ml;class Yl{async statistics(){return await Y.getCookie(),M.post("api/v1/followup/statistics")}async paginate(t="/",e){return await Y.getCookie(),M.post("api/v1/followup/orders"+t,e)}async update(t,e){return await Y.getCookie(),M.post("api/v1/followup/orders/"+t+"/update",e)}}var Zl=new Yl,Kl={components:{DashCard:Hl},data(){return{fetching:!0,dashes:[]}},mounted(){Zl.statistics().then((t=>{console.log(t.data.data),this.dashes=t.data.data.statistics,this.fetching=!1}))}};const Bl=(0,d.Z)(Kl,[["render",ql]]);var Ql=Bl;const Gl={key:0},Jl={key:1},Xl=(0,s._)("div",{class:"mb-2 mt-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Online")])],-1),to={class:"py-2 px-2 tw-border bg-white tw-w-full tw-rounded"},eo={class:"mb-2 mt-2 tw-flex tw-justify-between tw-items-center tw-w-full"},ao={class:"tw-flex tw-items-center tw-justify-between tw-w-full"},ro=(0,s._)("h2",{class:"tw-text-gray-500 tw-text-lg"},"Statistiques",-1),so=["disabled"],io={key:0,class:"tw-flex tw-items-center tw-gap-2"},lo={key:1},oo=(0,s._)("svg",{"aria-hidden":"true",role:"status",class:"tw-inline tw-w-4 tw-h-4 tw-mr-3 tw-text-white tw-animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),(0,s._)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})],-1),no={class:"px-5 tw-border bg-white tw-w-full tw-rounded-md"};function wo(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("UsersTable"),d=(0,s.up)("FilterTabs"),w=(0,s.up)("DashItem"),c=(0,s.up)("TabSwitcher");return(0,s.wg)(),(0,s.iD)("div",null,[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Gl,[(0,s.Wm)(o)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",Jl,[Xl,(0,s._)("div",to,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(n)])),_:1})])),_:1})]),(0,s._)("div",eo,[(0,s._)("div",ao,[ro,(0,s._)("button",{disabled:i.updating,onClick:e[0]||(e[0]=(...t)=>l.updateSales&&l.updateSales(...t)),type:"button",class:"tw-text-white tw-w-fit tw-my-2 tw-bg-gradient-to-r tw-from-cyan-500 tw-to-blue-500 hover:tw-bg-gradient-to-bl focus:tw-ring-4 focus:tw-outline-none focus:tw-ring-cyan-300 dark:focus:tw-ring-cyan-800 tw-font-medium tw-rounded-lg tw-text-sm tw-px-5 tw-py-2.5 tw-text-center tw-mr-2 dark:tw-bg-blue-600 dark:hover:tw-bg-blue-700 tw-duration-200 tw-gap-2 tw-pointer-events-auto tw-inline-flex tw-items-center"},[i.updating?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",io,[(0,s.Wm)(X.t,{class:"tw-text-sm",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s.Uk)(" Refresh ")])),i.updating?((0,s.wg)(),(0,s.iD)("div",lo,[oo,(0,s.Uk)(" loading... ")])):(0,s.kq)("",!0)],8,so)])]),(0,s._)("div",no,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t)},null,8,["filters"])])),_:1})])),_:1}),(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffaires},null,8,["dash"])])),_:1}),(0,s.Wm)(nr.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffairesVerse},null,8,["dash"])])),_:1}),(0,s.Wm)(nr.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffairesNonVerse},null,8,["dash"])])),_:1}),(0,s.Wm)(nr.D,{cols:"12",sm:"6",md:"3"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{dash:l.dashChiffreAffairesEnCaisse},null,8,["dash"])])),_:1})])),_:1}),(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{"filtered-sales":l.filteredSales},null,8,["filtered-sales"])])),_:1})])),_:1})])])):(0,s.kq)("",!0)])}var co={components:{DashItem:Pr,UsersTable:Gr,TabSwitcher:Rs,FilterTabs:Ni},data(){return{updating:!1,filters:{deliveryFilter:"all",agentFilter:"all",productFilter:"all",cityFilter:"all",upsellFilter:"all",dateFilter:["",""],droppedAtFilter:["",""]}}},computed:{user(){return this.$store.getters["user/user"]},isAdmin(){return"admin"==this.user.role},sales(){return this.$store.getters["sale/sales"]},isLoaded(){return this.$store.getters["sale/fetched"]},filteredSales(){const t=this.filters.agentFilter,e=this.filters.deliveryFilter,a=this.filters.productFilter,r=this.filters.cityFilter,s=this.filters.upsellFilter,i=this.filters.dateFilter[0],l=this.filters.dateFilter[1],o=this.filters.droppedAtFilter[0],n=this.filters.droppedAtFilter[1];return this.sales.filter((d=>{if("all"!==t&&parseInt(d.agente_id)!=parseInt(t))return!1;if("all"!==e&&parseInt(d.affectation)!=parseInt(e))return!1;if("all"!==s&&d.upsell!=s)return!1;if("all"!==a&&!d.items.some((t=>parseInt(t.product_id)==parseInt(a))))return!1;if("all"!==r&&d.city?.toLocaleLowerCase()!=r?.toLocaleLowerCase())return!1;const w=new Date(d.created_at),c=w.getDate(),u=w.getMonth(),p=w.getFullYear();if(i){const t=i.getDate(),e=i.getMonth(),a=i.getFullYear();if(p<a||p===a&&u<e||p===a&&u===e&&c<t)return!1}if(l){const t=l.getDate(),e=l.getMonth(),a=l.getFullYear();if(p>a||p===a&&u>e||p===a&&u===e&&c>t)return!1}const m=new Date(d.dropped_at),h=m.getDate(),g=m.getMonth(),f=w.getFullYear();if(o){const t=o.getDate(),e=o.getMonth(),a=o.getFullYear();if(f<a||f===a&&g<e||f===a&&g===e&&h<t)return!1}if(n){const t=n.getDate(),e=n.getMonth(),a=n.getFullYear();if(f>a||f===a&&g>e||f===a&&g===e&&h>t)return!1}return!0}))},dashChiffreAffaires(){return{id:1,title:"Total Chiffres d'affaire",value:this.getChiffresDaffaire().toFixed(2),icon:"mdi-currency-usd",color:"green"}},dashChiffreAffairesVerse(){return{id:2,title:"Chiffres d'affaire vers",value:this.getChiffresDaffaireVerse().toFixed(2),icon:"mdi mdi-credit-card-check-outline",color:"orange"}},dashChiffreAffairesNonVerse(){return{id:3,title:"Chiffres d'affaire non vers",value:this.getChiffresDaffaireNonVerse().toFixed(2),icon:"mdi mdi-credit-card-remove-outline",color:"red"}},dashChiffreAffairesEnCaisse(){return{id:4,title:"Chiffres d'affaire en caisse",value:this.getChiffresDaffaireEnCaise().toFixed(2),icon:"mdi mdi-bank",color:"yellow"}},newSales(){return{id:1,title:"New",value:this.sales.filter((t=>!t.confirmation)).length,color:"primary-green",icon:"mdi mdi-new-box"}},toProcess(){return{id:2,title:"Process",value:this.sales.filter((t=>!!t.confirmation&&!["confirmer","livre","expidier"].includes(t.confirmation))).length,color:"primary-orange",icon:"mdi-reload"}},confirmedSales(){return{id:3,title:"Confirmed",value:this.sales.filter((t=>"confirmer"==t.confirmation)).length,color:"deep-purple-accent-2",icon:"mdi-phone-check"}},deliveredSales(){return{id:4,title:"Delivered",value:this.sales.filter((t=>"livre"==t.confirmation)).length,color:"primary-blue",icon:"mdi-account-check-outline"}},shippedSales(){return{id:5,title:"Shipped",value:this.sales.filter((t=>"expidier"==t.confirmation)).length,color:"red",icon:"mdi-truck"}}},methods:{getSales(){Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},updateSales(){this.updating=!0,Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.updating}})).catch(this.$handleApiError).finally((()=>{this.updating=!1}))},getChiffresDaffaire(){let t=0;return this.filteredSales.forEach((e=>{t+=Mi(e)})),t},getChiffresDaffaireVerse(){let t=0;return this.filteredSales.forEach((e=>{null!=e.factorisations&&e.factorisations.paid&&(t+=Mi(e))})),t},getChiffresDaffaireNonVerse(){let t=0;return this.filteredSales.forEach((e=>{null==e.factorisations||e.factorisations.paid||(t+=Mi(e))})),t},getChiffresDaffaireEnCaise(){return this.getChiffresDaffaire()-this.getChiffresDaffaireVerse()}},mounted(){}};const uo=(0,d.Z)(co,[["render",wo]]);var po=uo,mo={components:{admin:Ki,delivery:dl,agente:Dl,default:Al,seller:po,"follow-up":Ql},data(){return{localUrl:F,exists:!1}},computed:{user(){return this.$store.getters["user/user"]},dashboard(){return["admin","seller","delivery","agente","follow-up"].includes(this.user.role)?this.user.role:"default"}},methods:{check(){switch(this.user.role){case"admin":this.$router.push({name:"dashboards/admin"});break;case"seller":this.$router.push({name:"dashboards/seller"});break;default:this.exists=!0;break}}},mounted(){this.check()}};const ho=(0,d.Z)(mo,[["render",lr]]);var go=ho,fo=a(3104);const vo=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Settings ")],-1),yo={key:0},xo={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},_o={class:"tw-w-full"},bo=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),ko={class:"tw-w-full"},Co=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),Do={class:"tw-w-full"},So=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),zo={class:"tw-w-full"},Uo=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),Lo={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},Po=(0,s._)("span",null,"Update Password: ",-1),Ao={class:"tw-w-full"},Wo=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),$o={class:"tw-w-full"},Eo=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),qo={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Oo=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),To=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function Vo(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[vo,l.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",yo,[(0,s.Wm)(o)])),l.isFormReady?((0,s.wg)(),(0,s.iD)("div",xo,[(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",_o,[bo,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.firstname.message,modelValue:i.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>i.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",ko,[Co,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.lastname.message,modelValue:i.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>i.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Do,[So,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.email.message,modelValue:i.email,"onUpdate:modelValue":e[2]||(e[2]=t=>i.email=t),readonly:"",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",zo,[Uo,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.phone.message,modelValue:i.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>i.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-0",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",Lo,[Po,(0,s.Wm)(fo.G,{modelValue:i.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>i.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),i.updatePassword?((0,s.wg)(),(0,s.j4)(nr.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Ao,[Wo,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.password.message,modelValue:i.password,"onUpdate:modelValue":e[5]||(e[5]=t=>i.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0),i.updatePassword?((0,s.wg)(),(0,s.j4)(nr.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",$o,[Eo,(0,s.Wm)(tt.hw,{"error-messages":i.formStatus.confirmPassword.message,modelValue:i.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>i.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,s._)("div",qo,[(0,s.Wm)(G.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Oo])),_:1}),t.$can("update_account")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:l.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[To])),_:1},8,["onClick","loading"])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)])}var Fo={data(){return{serverUrl:I,isFetched:!1,isUserFetched:!1,isLoading:!1,updatePassword:!1,formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:""}},computed:{isFormReady(){return this.isFetched},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,password:this.password}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,K.updateProfile(this.user,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["firstname"]=bt(this.firstname),this.formStatus["lastname"]=bt(this.lastname),this.formStatus["phone"]=bt(this.phone),this.formStatus["password"]=_t(this.password),this.formStatus["confirmPassword"]=Ct(this.password,this.confirmPassword);const t=this.formStatus["firstname"].valid,e=this.formStatus["lastname"].valid,a=this.formStatus["phone"].valid;if(this.updatePassword){const r=this.formStatus["password"].valid,s=this.formStatus["confirmPassword"].valid;return t&&e&&r&&s&&a}return t&&e&&a},async getUser(){return K.profile().then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.isUserFetched=!0}})).catch(this.$handleApiError)}},async mounted(){Promise.allSettled([this.getUser()]).then((()=>this.isFetched=!0),(t=>this.$handleApiError(t)))}};const Io=(0,d.Z)(Fo,[["render",Vo]]);var Ro=Io;const jo=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Notifications")])],-1),No={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Mo={class:"!tw-capitalize"};function Ho(t,e,a,r,i,l){(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[jo,(0,s.kq)("",!0),((0,s.wg)(),(0,s.iD)("div",No,[(0,s.Wm)(Jr._,{flat:""},{default:(0,s.w5)((()=>[(0,s.Wm)(Xr.d,{modelValue:i.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>i.tab=t),color:"primary-color","align-tabs":"start",density:"compact"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tabs,(t=>((0,s.wg)(),(0,s.j4)(ts.L,{class:"!tw-capitalize !tw-text-neutral-600",key:t.id,value:t.id},{default:(0,s.w5)((()=>[(0,s._)("span",Mo,(0,Q.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),(0,s.Wm)(es.Oo,{class:"tw-mt-5",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tabs,(t=>((0,s.wg)(),(0,s.j4)(as.H,{key:t.id,value:t.id},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(t.component)))])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})]))])}const Yo={key:0};function Zo(t,e,a,r,i,l){const o=(0,s.up)("SalesTable");return l.fetched?((0,s.wg)(),(0,s.iD)("div",Yo,[((0,s.wg)(),(0,s.j4)(o,{key:l.sales.length,columns:i.columns,sales:l.sales},null,8,["columns","sales"]))])):(0,s.kq)("",!0)}const Ko={class:"tw-grid tw-grid-cols-12 tw-mb-5"},Bo={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-items-center"},Qo=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),Go=["value"],Jo={class:"tw-relative tw-pb-5 tw-overflow-x-auto tw-min-h-[400px] tw-overflow-y-visible sm:tw-rounded-lg"},Xo={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},tn={scope:"col",class:"tw-p-4"},en={class:"tw-flex tw-items-center"},an=(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox",-1),rn={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},sn={class:"tw-w-4 tw-p-4 tw-relative"},ln={class:"tw-flex tw-items-center"},on=["onChange","checked"],nn=(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox",-1),dn={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},wn={class:"tw-px-6 tw-py-4 tw-relative"},cn={key:0},un={class:"tw-px-6 tw-py-4"},pn=["title"],mn={class:"tw-px-6 tw-py-4 tw-relative"},hn={class:"tw-pb-2"},gn={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},fn={key:0},vn={key:1},yn={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},xn={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},_n={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},bn={class:"tw-px-6 tw-py-4"},kn={class:"tw-px-6 tw-py-4 tw-relative"},Cn={class:"tw-flex tw-items-center tw-justify-center"},Dn={class:"tw-flex tw-gap-1"},Sn={key:0},zn={class:"tw-px-6 tw-py-4"},Un={class:"tw-px-6 tw-py-4 tw-relative"},Ln={class:"tw-flex tw-items-center tw-justify-center"},Pn={class:"tw-flex tw-gap-1"},An={key:0},Wn={class:"tw-px-6 tw-py-4"},$n={class:"tw-px-6 tw-py-4"},En={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},qn={class:"tw-col-span-12 md:tw-col-span-12 d-flex tw-justify-end tw-flex-wrap align-center"},On={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Tn={class:"tw-flex tw-flex-wrap tw-gap-2"},Vn={class:"tw-text-white"};function Fn(t,e,a,i,l,o){const n=(0,s.up)("SaleConfirmation"),d=(0,s.up)("SaleAffectation"),w=(0,s.up)("SaleDelivery"),c=(0,s.up)("SaleActions");return(0,s.wg)(),(0,s.iD)("div",{key:o.items.length},[(0,s._)("div",Ko,[(0,s._)("div",Bo,[Qo,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Go)))),128))],512),[[r.bM,l.paginationLimit]])])]),(0,s._)("div",Jo,[((0,s.wg)(),(0,s.iD)("table",{key:o.reportedForToday.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",Xo,[(0,s._)("tr",null,[(0,s._)("th",tn,[(0,s._)("div",en,[(0,s.wy)((0,s._)("input",{onClick:e[1]||(e[1]=(...t)=>o.handleSelectAll&&o.handleSelectAll(...t)),"onUpdate:modelValue":e[2]||(e[2]=t=>l.isAllSelected=t),id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,512),[[r.e8,l.isAllSelected]]),an])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,class:(0,Q.C_)([["city"==t&&"!tw-max-w-[150px]"],"tw-px-6 tw-py-3 tw-truncate"]),scope:"col"},[(0,s._)("div",rn,(0,Q.zw)(t),1)],2)))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:(0,Q.C_)([[[t.confirmation,t.delivery].includes("reporter")&&"tw-relative",o.isReportedToday(t)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,s._)("td",sn,[(0,s._)("div",ln,[(0,s._)("input",{onChange:e=>o.handleSelect(e,t.id),checked:o.isSelected(t.id),id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"},null,40,on),nn])]),(0,s._)("td",dn,(0,Q.zw)(t.id),1),(0,s._)("td",wn,[(0,s.Uk)((0,Q.zw)(t?.created_at?.split("T")[0])+" ",1),"reporter"==t.confirmation||"reporter"==t.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[o.isReportedToday(t)?((0,s.wg)(),(0,s.iD)("span",cn," Reported for today ")):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)]),(0,s._)("td",un,[(0,s._)("div",{title:t.city,class:"!tw-max-w-[200px] tw-truncate"},(0,Q.zw)(t.city),9,pn)]),(0,s._)("td",mn,[(0,s._)("div",hn,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",gn,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",fn,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",vn,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))]),(0,s._)("div",yn,[t.counts_from_warehouse?((0,s.wg)(),(0,s.iD)("p",xn," warehouse ")):(0,s.kq)("",!0),t.counts_from_warehouse?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",_n," delivery "))])])]),(0,s._)("td",bn,(0,Q.zw)(t.fullname),1),(0,s._)("td",kn,[(0,s._)("div",Cn,[((0,s.wg)(),(0,s.j4)(n,{class:(0,Q.C_)("reporter"==t.confirmation&&"tw-mb-1"),sale:t,id:t.id,confirmation:t.confirmation,key:t.confirmation},null,8,["class","sale","id","confirmation"])),"reporter"==t.confirmation?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",Dn,["reporter"==t.confirmation?((0,s.wg)(),(0,s.iD)("span",Sn,[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,Q.zw)(t?.reported_agente_date?.split("T")[0]),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",zn,["confirmer"==t.confirmation?((0,s.wg)(),(0,s.j4)(d,{sale:t,affectation:t.affectation,id:t.id,key:t.affectation},null,8,["sale","affectation","id"])):(0,s.kq)("",!0)]),(0,s._)("td",Un,[(0,s._)("div",Ln,[((0,s.wg)(),(0,s.j4)(w,{class:(0,Q.C_)("reporter"==t.delivery&&"tw-mb-1"),sale:t,id:t.id,key:t.delivery,delivery:t.delivery},null,8,["class","sale","id","delivery"])),"reporter"==t.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([o.isReportedToday(t)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",Pn,["reporter"==t.delivery?((0,s.wg)(),(0,s.iD)("span",An,[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,Q.zw)(t.reported_delivery_date),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",Wn,(0,Q.zw)(o.getPrice(t)),1),(0,s._)("td",$n,[((0,s.wg)(),(0,s.j4)(c,{id:t.id,key:t.delivery,sale:t},null,8,["id","sale"]))])],2)))),128))])]))]),(0,s._)("div",En,[(0,s._)("div",qn,[(0,s._)("div",On,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.sales.length:o.nextRange)+" of "+(0,Q.zw)(a.sales.length)+" items ",1),(0,s._)("div",Tn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",Vn,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const In={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},Rn=["onClick"],jn={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Nn=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),Mn={class:"tw-flex tw-justify-end tw-mt-2"};function Hn(t,e,a,i,l,o){const n=(0,s.up)("popup-full"),d=(0,s.up)("SaleConfirmationReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,Q.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,Q.zw)(o.selected.name)+" ",1),l.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(l.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),l.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!l.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",In,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,Rn)))),128))])],2),(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",jn,[Nn,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[r.nr,l.note]]),(0,s._)("div",Mn,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,s.Wm)(d,{order:a.sale,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","visible"])])),[[Bt.L,o.close]])}const Yn=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:12,value:"wrong-number",name:"Wrong number",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:13,value:"confirmer",name:"Confirmed",text:"tw-text-green-500",textLight:"tw-text-green-800",bg:"tw-bg-green-500/10",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:14,value:"double",name:"Double",text:"tw-text-purple-500",textLight:"tw-text-purple-800",bg:"tw-bg-purple-500/10",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"}],Zn=[{id:0,value:null,name:"New",text:"tw-text-white",textLight:"tw-text-emerald-800",bg:"tw-bg-green-500",bgLight:"tw-bg-emerald-100",ring:"tw-ring-green-300"},{id:1,value:"day-one-call-one",name:"No reply 1 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-700",bg:"tw-bg-rose-200/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-200"},{id:2,value:"day-one-call-two",name:"No reply 2 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-800",bg:"tw-bg-rose-400/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-300"},{id:3,value:"day-one-call-three",name:"No reply 3 / day1",text:"tw-text-rose-500",textLight:"tw-text-rose-900",bg:"tw-bg-rose-600/10",bgLight:"tw-bg-rose-100",ring:"tw-ring-rose-400"},{id:4,value:"day-two-call-one",name:"No reply 1 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-700",bg:"tw-bg-indigo-200/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-200"},{id:5,value:"day-two-call-two",name:"No reply 2 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-800",bg:"tw-bg-indigo-400/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:6,value:"day-two-call-three",name:"No reply 3 / day2",text:"tw-text-indigo-500",textLight:"tw-text-indigo-900",bg:"tw-bg-indigo-600/10",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-400"},{id:7,value:"day-three-call-one",name:"No reply 1 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-700",bg:"tw-bg-blue-200/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-200"},{id:8,value:"day-three-call-two",name:"No reply 2 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-800",bg:"tw-bg-blue-400/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-300"},{id:9,value:"day-three-call-three",name:"No reply 3 / day3",text:"tw-text-blue-500",textLight:"tw-text-blue-900",bg:"tw-bg-blue-600/10",bgLight:"tw-bg-blue-100",ring:"tw-ring-blue-400"},{id:10,value:"reporter",name:"Reported",text:"tw-text-teal-500",textLight:"tw-text-teal-800",bg:"tw-bg-teal-500/10",bgLight:"tw-bg-teal-100",ring:"tw-ring-teal-300"},{id:11,value:"annuler",name:"Canceled",text:"tw-text-red-500",textLight:"tw-text-red-800",bg:"tw-bg-red-500/10",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:13,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-cyan-500",textLight:"tw-text-cyan-800",bg:"tw-bg-cyan-500/10",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"}],Kn=[{id:0,value:null,name:"Select",text:"tw-text-neutral-600",bg:"tw-bg-neutral-500/10",ring:"tw-ring-neutral-300"},{id:1,value:"oui",name:"Oui",text:"tw-text-green-500",bg:"tw-bg-green-500/10",ring:"tw-ring-green-300"},{id:2,value:"non",name:"Non",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",ring:"tw-ring-pink-300"}],Bn=[{id:0,value:null,name:"Select",text:"tw-text-gray-500",textLight:"tw-text-gray-800",bg:"tw-bg-gray-500/10",bgLight:"tw-bg-gray-100",ring:"tw-ring-gray-300"},{id:1,value:"dispatch",name:"Dispatched",text:"tw-text-yellow-500",textLight:"tw-text-yellow-800",bg:"tw-bg-yellow-500/10",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:2,value:"expidier",name:"Shipped",text:"tw-text-fuchsia-500",textLight:"tw-text-fuchsia-800",bg:"tw-bg-fuchsia-500/10",bgLight:"tw-bg-fuchsia-100",ring:"tw-ring-fuchsia-300"},{id:3,value:"livrer",name:"Delivered",text:"tw-text-green-500",bg:"tw-bg-green-500/10",textLight:"tw-text-green-800",bgLight:"tw-bg-green-100",ring:"tw-ring-green-300"},{id:4,value:"reporter",name:"Reported",text:"tw-text-orange-500",bg:"tw-bg-orange-500/10",textLight:"tw-text-orange-800",bgLight:"tw-bg-orange-100",ring:"tw-ring-orange-300"},{id:5,value:"refuser",name:"Refused",text:"tw-text-pink-500",bg:"tw-bg-pink-500/10",textLight:"tw-text-pink-800",bgLight:"tw-bg-pink-100",ring:"tw-ring-pink-300"},{id:6,value:"annuler",name:"Canceled",text:"tw-text-red-500",bg:"tw-bg-red-500/10",textLight:"tw-text-red-800",bgLight:"tw-bg-red-100",ring:"tw-ring-red-300"},{id:9,value:"pas-de-reponse",name:"No Answer",text:"tw-text-yellow-500",bg:"tw-bg-yellow-500/10",textLight:"tw-text-yellow-800",bgLight:"tw-bg-yellow-100",ring:"tw-ring-yellow-300"},{id:10,value:"retourner",name:"Retourned",text:"tw-text-purple-500",bg:"tw-bg-purple-500/10",textLight:"tw-text-purple-800",bgLight:"tw-bg-purple-100",ring:"tw-ring-purple-300"},{id:11,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-indigo-500",bg:"tw-bg-indigo-500/10",textLight:"tw-text-indigo-800",bgLight:"tw-bg-indigo-100",ring:"tw-ring-indigo-300"},{id:12,value:"paid",name:"Paid",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"},{id:13,value:"transfer",name:"Transferd",text:"tw-text-violet-500",bg:"tw-bg-violet-500/10",textLight:"tw-text-violet-800",bgLight:"tw-bg-violet-100",ring:"tw-ring-violet-300"},{id:14,value:"livrer-et-retourner",name:"Delivered & Return",text:"tw-text-cyan-500",bg:"tw-bg-cyan-500/10",textLight:"tw-text-cyan-800",bgLight:"tw-bg-cyan-100",ring:"tw-ring-cyan-300"},{id:15,value:"reconfirmer",name:"Reconfirmed",text:"tw-text-emerald-500",bg:"tw-bg-emerald-500/10",textLight:"tw-text-emerald-800",bgLight:"tw-bg-emerald-100",ring:"tw-ring-emerald-300"}],Qn=[null,"expidier","paid","transfer","dispatch"],Gn={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Jn=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),Xn=(0,s._)("br",null,null,-1),td=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),ed={class:"tw-flex tw-justify-end tw-mt-2"};function ad(t,e,a,i,l,o){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:a.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",Gn,[Jn,(0,s.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),Xn,td,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[r.nr,l.note]]),(0,s._)("div",ed,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var rd={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,Fa.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${a}`,`${a}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const sd=(0,d.Z)(rd,[["render",ad]]);var id=sd,ld={props:["confirmation","id","sale"],components:{SaleConfirmationReporting:id},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",noteReporter:"",selectedId:0,allOptions:Yn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},handleClickReporter(){this.showPopupReporter=!1},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,Fa.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},async updateOrderWithNote(){return this.isLoading=!0,Fa.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("sale/updateConfirmation",{id:t,confirmation:e})},updateConfirmationNote(t,e,a){this.$store.dispatch("sale/updateConfirmationWithNote",{id:t,confirmation:e,note:a})}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const od=(0,d.Z)(ld,[["render",Hn]]);var nd=od;const dd={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},wd=["onClick"],cd={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},ud={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function pd(t,e,a,r,i,l){return l.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,s.Uk)((0,Q.zw)(l.selected.firstname)+" "+(0,Q.zw)(l.selected.lastname)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)]),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",dd,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,s._)("a",cd,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)],8,wd)))),128))])],2)])),[[Bt.L,l.close]]):((0,s.wg)(),(0,s.iD)("div",ud,[(0,s.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var md={props:["affectation","id","sale"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,old:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.sale.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){Fa.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("sale/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation}};const hd=(0,d.Z)(md,[["render",pd]]);var gd=hd;const fd={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},vd=["onClick"];function yd(t,e,a,r,i,l){const o=(0,s.up)("SaleDeliveryReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.delivery,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,Q.zw)(l.selected.name)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",fd,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,vd)))),128))])],2),(0,s.Wm)(o,{order:a.sale,visible:i.showPopupReporter,onCancel:e[1]||(e[1]=t=>i.showPopupReporter=!1)},null,8,["order","visible"])])),[[Bt.L,l.close]])}const xd={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},_d=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),bd=(0,s._)("br",null,null,-1),kd=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),Cd={class:"tw-flex tw-justify-end tw-mt-2"};function Dd(t,e,a,i,l,o){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:a.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",xd,[_d,(0,s.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),bd,kd,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[r.nr,l.note]]),(0,s._)("div",Cd,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var Sd={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,Fa.deliveryUpdateDelivery(t.id,"reporter",t).then((()=>{this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("sale/update",{id:t.id,sale:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${a}`,`${a}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const zd=(0,d.Z)(Sd,[["render",Dd]]);var Ud=zd,Ld={props:["delivery","id","sale"],components:{SaleDeliveryReporting:Ud},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Bn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){return t.id!==this.selectedId&&("reporter"!==t.value?(this.selectedId=t.id,this.updateOrder(),this.close(),!0):void("reporter"==t.value&&(this.showPopupReporter=!0,this.close())))},async updateOrder(){return this.isLoading=!0,Fa.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("sale/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const Pd=(0,d.Z)(Ld,[["render",yd]]);var Ad=Pd;const Wd={key:0};function $d(t,e,a,r,i,l){const o=(0,s.up)("SaleHistory"),n=(0,s.up)("popup-full"),d=(0,s.up)("UpdateSale");return a.sale?((0,s.wg)(),(0,s.iD)("div",Wd,[(0,s.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.sale.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"]),t.$can("update_sale")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(t.$can("view_sale"),(0,s.kq)("",!0)),(t.$can("delete_sale"),(0,s.kq)("",!0)),(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=t=>i.showHistoryPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"teal",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-sort-clock-ascending-outline")])),_:1})])),_:1}),(0,s.Wm)(n,{visible:i.showHistoryPopup,onCancel:e[4]||(e[4]=t=>i.showHistoryPopup=!1)},{default:(0,s.w5)((()=>[i.showHistoryPopup?((0,s.wg)(),(0,s.j4)(o,{key:0,onCancel:e[3]||(e[3]=t=>i.showHistoryPopup=!1),sale:a.sale},null,8,["sale"])):(0,s.kq)("",!0)])),_:1},8,["visible"]),(0,s.Wm)(d,{visible:i.showUpdatePopup,"onUpdate:visible":e[5]||(e[5]=t=>i.showUpdatePopup=t),order:a.sale},null,8,["visible","order"])])):(0,s.kq)("",!0)}var Ed=a(7103),qd=a(795),Od=a(2773);const Td={class:"md:tw-w-[50%] tw-max-h-full tw-relative tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},Vd={key:0,class:"tw-w-full tw-h-full"},Fd={key:1,class:"tw-p-5"},Id={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Rd={class:"tw-flex tw-items-center tw-gap-2 tw-my-2"},jd={class:"tw-text-sm tw-capitalize tw-text-neutral-600"},Nd={class:"flex-shrink-0 tw-text-neutral-500 tw-flex tw-items-center tw-gap-2 tw-text-sm"},Md={class:"d-flextw-flex-col justify-space-between flex-grow-1"},Hd={class:"tw-flex tw-flex-col tw-my-2"},Yd=(0,s._)("div",null," New Order Created ",-1),Zd={class:"flex-shrink-0 tw-flex tw-items-center tw-gap-2 tw-text-sm"};function Kd(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",Td,[i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Vd,[(0,s.Wm)(o,{class:"text-primary-color"})])),(0,s.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Fd,[(0,s.Wm)(qd.R,{density:"compact",side:"end"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.events,(t=>((0,s.wg)(),(0,s.j4)(Od.N,{key:t.id,class:"mb-4","dot-color":l.eventColor(t.type),size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",Id,[(0,s._)("div",Rd,[(0,s.Wm)(Ed.v,{class:"ms-0 tw-capitalize tw-w-fit",color:l.eventColor(t.type),label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.type),1)])),_:2},1032,["color"]),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(X.t,{key:0,size:"x-small",color:"grey"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-arrow-right")])),_:1})):(0,s.kq)("",!0),"responsibility"!=t.type?((0,s.wg)(),(0,s.j4)(Ed.v,{key:1,class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.historique),1)])),_:2},1024)):(0,s.kq)("",!0)]),(0,s._)("div",jd,(0,Q.zw)(t.users.firstname)+" "+(0,Q.zw)(t.users.lastname),1),(0,s._)("div",Nd,[(0,s._)("span",null,(0,Q.zw)(t.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,Q.zw)(t.created_at?.split("T")[1].split(".")[0]),1)])])])),_:2},1032,["dot-color"])))),128)),(0,s.Wm)(Od.N,{class:"mb-4","dot-color":"green",size:"x-small"},{default:(0,s.w5)((()=>[(0,s._)("div",Md,[(0,s._)("div",Hd,[(0,s.Wm)(Ed.v,{class:"ms-0 tw-capitalize tw-w-fit",color:"green",label:"",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Order Created ")])),_:1}),Yd]),(0,s._)("div",Zd,[(0,s._)("span",null,(0,Q.zw)(a.sale.created_at?.split("T")[0]),1),(0,s._)("span",null,(0,Q.zw)(a.sale.created_at?.split("T")[1].split(".")[0]),1)])])])),_:1})])),_:1})])):(0,s.kq)("",!0)])}var Bd={props:["sale"],data(){return{isLoaded:!1,allEvents:[]}},computed:{events(){return[...this.allEvents].reverse()}},methods:{cancel(){this.$emit("cancel")},getHistory(){this.isLoaded=!1,Fa.history(this.sale.id).then((t=>{console.log(t.data),this.allEvents=t.data.data.orders}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},eventColor(t){let e={confirmation:"primary-color",delivery:"blue",upsell:"purple",affectation:"cyan"};return["confirmation","delivery","upsell","affectation"].includes(t)?e[t]:"primary-color"}},mounted(){this.getHistory()}};const Qd=(0,d.Z)(Bd,[["render",Kd]]);var Gd=Qd;const Jd={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},Xd={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},tw=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),ew={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},aw={class:"md:tw-col-span-6 tw-col-span-12"},rw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),sw={class:"md:tw-col-span-6 tw-col-span-12"},iw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),lw={class:"md:tw-col-span-6 tw-col-span-12"},ow=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),nw=["value"],dw=["value"],ww={class:"md:tw-col-span-6 tw-col-span-12"},cw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),uw={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},pw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),mw={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},hw={class:"tw-col-span-12"},gw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),fw={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},vw={class:"tw-col-span-12 md:tw-col-span-4"},yw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),xw={class:"tw-col-span-12 md:tw-col-span-8"},_w=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),bw={class:"md:tw-col-span-6 tw-col-span-12"},kw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),Cw={class:"md:tw-col-span-6 tw-col-span-12"},Dw=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),Sw=["value"],zw={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},Uw={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},Lw={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},Pw=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),Aw={class:"tw-flex tw-flex-col tw-justify-center"},Ww=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),$w={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},Ew={key:2,class:"md:tw-col-span-12 tw-col-span-12"},qw={class:"tw-max-w-full tw-overflow-auto"},Ow={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Tw={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},Vw={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},Fw=["src"],Iw={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},Rw=["onUpdate:modelValue"],jw=(0,s._)("option",{value:0},"Select",-1),Nw=["value"],Mw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Hw=["disabled","onUpdate:modelValue"],Yw=(0,s._)("option",{value:0},"Select",-1),Zw=["value"],Kw={key:0},Bw={key:1},Qw={key:2},Gw={key:3},Jw=["value"],Xw={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},tc={class:"md:tw-col-span-6 tw-col-span-12"},ec=["onUpdate:modelValue"],ac={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},rc={key:0},sc={key:1,class:"md:tw-col-span-6 tw-col-span-12"},ic=["onUpdate:modelValue"],lc={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},oc={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},nc=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),dc={class:"md:tw-col-span-12 tw-col-span-12"},wc={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},cc=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),uc={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},pc=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),mc={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},hc=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),gc={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},fc=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),vc={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},yc={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},xc=(0,s._)("span",{class:"text-white"}," Cancel ",-1),_c=(0,s._)("span",{class:"text-white"}," Update ",-1);function bc(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,s.w5)((()=>[o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Jd,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",Xd,[tw,(0,s._)("div",ew,[(0,s._)("div",aw,[rw,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.fullname]])]),(0,s._)("div",sw,[iw,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.phone]])]),(0,s._)("div",lw,[ow,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,nw),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,dw)))),128))],512),[[r.bM,l.sale.city]])]),(0,s._)("div",ww,[cw,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.adresse]])]),(0,s._)("div",uw,[pw,(0,s.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",mw,[(0,s._)("div",hw,[gw,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[r.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",fw,[(0,s._)("div",vw,[yw,(0,s._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",xw,[_w,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[r.nr,l.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",bw,[kw,(0,s.Wm)(w,{"product-ids":o.product_ids,items:l.items,"onUpdate:items":e[8]||(e[8]=t=>l.items=t),order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",Cw,[Dw,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,Sw)))),128))],512),[[r.bM,l.sale.upsell]])]),(0,s.kq)("",!0),(0,s._)("div",zw,[(0,s._)("div",Uw,[(0,s._)("label",Lw,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[r.e8,l.sale.counts_from_warehouse]]),Pw]),(0,s._)("label",Aw,[(0,s._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),Ww,l.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",$w," No Order items ")),l.items.length?((0,s.wg)(),(0,s.iD)("div",Ew,[(0,s._)("div",qw,[((0,s.wg)(),(0,s.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",Ow,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",Tw,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",Vw,[o.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,Fw)):(0,s.kq)("",!0)])])),(0,s._)("th",Iw,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[jw,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Nw)))),128))],8,Rw),[[r.bM,t.product.id]])])])]),(0,s._)("th",Mw,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[Yw,o.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(o.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",Bw,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",Qw,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",Gw,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",Kw,"-"))],8,Zw)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,Jw))],8,Hw)),[[r.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",Xw,[(0,s._)("div",tc,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,ec),[[r.nr,t.quantity]])])]),(0,s._)("th",ac,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",rc," - ")):((0,s.wg)(),(0,s.iD)("div",sc,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,ic),[[r.nr,t.price]])]))])]),(0,s._)("th",lc,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",oc,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),nc])),_:1},8,["onClick"])])]),(0,s._)("div",dc,[(0,s.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,s._)("div",wc,[cc,(0,s._)("div",uc,[pc,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.price]])])]),(0,s._)("div",mc,[hc,(0,s._)("div",gc,[fc,(0,s._)("div",vc,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,s._)("div",yc,[(0,s.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[xc])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[_c])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}const kc={class:"tw-relative"},Cc=["value"],Dc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Sc=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),zc={class:"tw-flex tw-justify-end tw-mt-2"};function Uc(t,e,a,i,l,o){const n=(0,s.up)("popup-full"),d=(0,s.up)("AddOrderReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.confirmation,class:"tw-relative tw-min-w-[100px] tw-w-full"},[(0,s._)("div",null,[(0,s._)("div",kc,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.confirmationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allOptions,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text,!t.value&&"!tw-text-gray-700"]),key:t.id,value:t.value},(0,Q.zw)(t.name),11,Cc)))),128))],512),[[r.bM,o.confirmationValue]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",Dc,[Sc,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[r.nr,l.note]]),(0,s._)("div",zc,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,s.Wm)(d,{order:a.order,onConfirm:o.handleReportedDate,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","onConfirm","visible"])])),[[Bt.L,o.close]])}const Lc={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},Pc=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),Ac=(0,s._)("br",null,null,-1),Wc=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),$c={class:"tw-flex tw-justify-end tw-mt-2"};function Ec(t,e,a,i,l,o){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:a.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",Lc,[Pc,(0,s.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),Ac,Wc,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[r.nr,l.note]]),(0,s._)("div",$c,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var qc={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.$emit("confirm",{reported_agente_date:this.realDate,reported_agente_note:this.note}),this.isLoading=!0},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${a}`,`${a}/${s}/${i}`},cancel(){this.$emit("cancel")}}};const Oc=(0,d.Z)(qc,[["render",Ec]]);var Tc=Oc,Vc={props:["confirmation","id","order"],components:{AddOrderReporting:Tc},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Yn,reported_agente_date:null,reported_agente_note:"",showPopupReporter:!1}},watch:{},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},confirmationValue:{get(){return this.confirmation},set(t){switch(t){case"reporter":this.showPopupReporter=!0;break;case"confirmer":this.showPopup=!0;break;default:this.$emit("update:confirmation",t);break}}},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleReportedDate(t){this.reported_agente_date=t.reported_agente_date,this.reported_agente_note=t.reported_agente_note,this.$emit("update:confirmation","reporter"),this.$emit("reported",t),this.showPopupReporter=!1},handleClick(){this.showPopup=!1,this.$emit("update:confirmation","confirmer"),this.$emit("confirmed",this.note)},async handleChange(t){if(t.id===this.selectedId)return!1;"confirmer"!==t.value&&"reporter"!==t.value?(this.selectedId=t.id,this.updateOrder()):"reporter"===t.value?this.showPopupReporter=!0:(this.nextOption=t.id,this.showPopup=!0),this.close()},async updateOrder(){return this.isLoading=!0,Fa.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,Fa.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,a){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:a}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const Fc=(0,d.Z)(Vc,[["render",Uc]]);var Ic=Fc;const Rc={class:"tw-relative"},jc=["disabled"],Nc=["value"],Mc={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function Hc(t,e,a,i,l,o){return l.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("div",null,[(0,s._)("div",Rc,[(0,s.wy)((0,s._)("select",{disabled:"confirmer"!=a.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>o.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,Nc)))),128))],8,jc),[[r.bM,o.affectationValue]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),[[Bt.L,o.close]]):((0,s.wg)(),(0,s.iD)("div",Mc,[(0,s.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var Yc={props:["affectation","id","order","confirmation","items","productIds"],data(){return{isOpen:!1,isLoading:!1,selectedId:null,fetched:!1}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},order_items(){return this.items},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.productIds.includes(t.product_id)))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},getUsers(){this.fetched=!1,K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0),this.fetched=!0}})).catch(this.$handleApiError)}},mounted(){this.selectedId=this.affectation,this.getUsers()}};const Zc=(0,d.Z)(Yc,[["render",Hc]]);var Kc=Zc;const Bc=(0,s._)("h1",{class:"tw-mb-2 tw-font-medium"},"Offers",-1),Qc={class:"tw-relative tw-overflow-x-auto tw-border-b sm:tw-rounded"},Gc={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Jc=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product Name"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note")])],-1),Xc={class:"tw-px-6 tw-py-4"},tu={class:"tw-px-6 tw-py-4"},eu={class:"tw-px-6 tw-py-4"},au={class:"tw-px-6 tw-py-4"},ru={class:"tw-max-w-[250px] tw-text-sm"},su={key:0},iu=(0,s._)("td",{colspan:"5"},[(0,s._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),lu=[iu];function ou(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[Bc,(0,s._)("div",null,[(0,s._)("div",Qc,[(0,s._)("table",Gc,[Jc,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",Xc,(0,Q.zw)(l.getProduct(t.product_id)?.name),1),(0,s._)("td",tu,(0,Q.zw)(t.quantity),1),(0,s._)("td",eu,(0,Q.zw)(t.price)+" "+(0,Q.zw)(i.currency),1),(0,s._)("td",au,[(0,s._)("p",ru,(0,Q.zw)(t.note),1)])])))),128)),0==l.offers.length?((0,s.wg)(),(0,s.iD)("tr",su,lu)):(0,s.kq)("",!0)])])])])])}var nu={props:["productIds"],data(){return{currency:R}},computed:{products(){return this.$store.getters["product/products"]},offers(){return this.products.filter((t=>this.productIds.includes(t.id))).flatMap((t=>t.offers))}},methods:{getProduct(t){return this.products.find((e=>e.id==t))}}};const du=(0,d.Z)(nu,[["render",ou]]);var wu=du,cu={components:{AddOrderConfirmation:Ic,AddOrderAffectation:Kc,ProductOffers:wu},props:["visible","order"],data(){return{upsells:Kn,serverUrl:I,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,r)=>{if(0==a.product.id)return a;const s=this.getVariations(a.product)?.variations;return e[r]==t[a]||s.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==s?.length&&(a.product_variation=s[0],a.product_variation_id=s[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,Fa.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("sale/update",{id:t.id,sale:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const a=this.products.find((e=>e.id==t));if(!a)return{exists:!1};let r=a.variations.find((t=>t.id==e));return r||(r=a.variations.length>0?a.variations[0]:null),{exists:!0,variation:r}},getProducts(){return er.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const uu=(0,d.Z)(cu,[["render",bc]]);var pu=uu,mu={props:["sale"],name:"saleActions",components:{SaleHistory:Gd,UpdateSale:pu},data(){return{showPopup:!1,showUpdatePopup:!1,showHistoryPopup:!1,isLoading:!1}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{}};const hu=(0,d.Z)(mu,[["render",$d]]);var gu=hu,fu={props:{sales:{required:!0},selectedReset:{required:!1,default:[]}},components:{SaleConfirmation:nd,SaleAffectation:gd,SaleDelivery:Ad,SaleActions:gu},data(){return{allowedLimit:[5,10,20,50,100,300,500],currentPage:1,paginationLimit:50,todayDate:null,selected:[],isAllSelected:!1,columns:["id","date","city","products","client","confirmation","affectation","delivery","price","actions"]}},watch:{selectedReset(t){this.selected=t,0==this.selected.length&&(this.isAllSelected=!1)},paginationLimit(){this.currentPage=1},selected(t){this.$emit("selected",t)}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sales.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.sales.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.sales.filter(this.isReportedToday)}},methods:{getPrice(t){return Mi(t)},isReportedToday(t){return this.isConfirmationReportedToday(t)||this.isDeliveryReportedToday(t)},isDeliveryReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date?.split("T")[0]==this.todayDate},isConfirmationReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate},handleSelect(t,e){t.target.checked?this.selected=[...this.selected,e]:this.selected=this.selected.filter((t=>t!=e))},isSelected(t){return this.selected.includes(t)},handleSelectAll(t){t.target.checked?this.selected=[...this.items.map((t=>t.id))]:this.selected=[]}},mounted(){const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${a}`}};const vu=(0,d.Z)(fu,[["render",Fn]]);var yu=vu,xu={components:{SalesTable:yu},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderAgente"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const _u=(0,d.Z)(xu,[["render",Zo]]);var bu=_u;const ku={key:0};function Cu(t,e,a,r,i,l){const o=(0,s.up)("SalesTable");return l.fetched?((0,s.wg)(),(0,s.iD)("div",ku,[((0,s.wg)(),(0,s.j4)(o,{key:l.sales.length,columns:i.columns,sales:l.sales},null,8,["columns","sales"]))])):(0,s.kq)("",!0)}var Du={components:{SalesTable:yu},data(){return{columns:[{prop:"id",name:"#"},{prop:"city",name:"City"},{prop:"date",name:"Date"},{prop:"client",name:"Client"},{prop:"product",name:"Product"},{prop:"upsell",name:"Upsell"},{prop:"confirmation",name:"Confirmation"},{prop:"affectation",name:"Affected"},{prop:"delivery",name:"Delivery"},{prop:"quantity",name:"Qty"},{prop:"price",name:"Price"},{prop:"actions",name:"Actions"}]}},computed:{sales(){return this.$store.getters["notification/notifications"]["reportedOrderDelivery"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const Su=(0,d.Z)(Du,[["render",Cu]]);var zu=Su;function Uu(t,e,a,r,i,l){const o=(0,s.up)("ProductsTable");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{columns:i.columns,products:l.products},null,8,["columns","products"])])}const Lu={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},Pu={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Au={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Wu=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),$u={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},Eu=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),qu={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Ou={class:"tw-px-6 tw-py-4"},Tu={class:"tw-px-6 tw-py-4"},Vu={class:"tw-px-6 tw-py-4"},Fu={class:"tw-px-6 tw-py-4"},Iu={class:"tw-px-6 tw-py-4"},Ru={class:"tw-px-6 tw-py-4"},ju={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},Nu={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Mu={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Hu=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),Yu=["value"],Zu={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},Ku={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Bu={class:"tw-text-white"};function Qu(t,e,a,i,l,o){const n=(0,s.up)("ProductActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Lu,[(0,s._)("table",Pu,[(0,s._)("thead",Au,[(0,s._)("tr",null,[Wu,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",$u,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[Eu,(0,s._)("th",qu,(0,Q.zw)(t.id),1),(0,s._)("td",Ou,(0,Q.zw)(t.ref),1),(0,s._)("td",Tu,(0,Q.zw)(t.name),1),(0,s._)("td",Vu,(0,Q.zw)(t.buying_price)+" "+(0,Q.zw)(l.currency),1),(0,s._)("td",Fu,(0,Q.zw)(t.selling_price)+" "+(0,Q.zw)(l.currency),1),(0,s._)("td",Iu,(0,Q.zw)(o.calculQty(t.variations)),1),(0,s._)("td",Ru,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,s._)("td",ju,[(0,s.Wm)(n,{product:t},null,8,["product"])])])))),128))])])]),(0,s._)("div",Nu,[(0,s._)("div",Mu,[Hu,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Yu)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",Zu,[(0,s._)("div",Ku,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.products.length:o.nextRange)+" of "+(0,Q.zw)(a.products.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",Bu,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const Gu={class:"tw-flex tw-items-center tw-gap-1"};function Ju(t,e,a,r,i,l){const o=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",Gu,[t.$can("update_product")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,to:"/products/update/"+a.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("view_product")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,to:"/products/"+a.product.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("delete_product")?((0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var Xu={props:["rowIndex","product"],name:"productActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,er["delete"](this.product.id).then((t=>{"PRODUCT_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Product Deleted Successfully"})),er.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const tp=(0,d.Z)(Xu,[["render",Ju]]);var ep=tp,ap={props:["columns","products"],components:{ProductActions:ep},data(){return{currency:R,allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.products.length/this.paginationLimit)},items(){return this.products.slice(this.prevRange,this.nextRange)}},methods:{calculQty(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const rp=(0,d.Z)(ap,[["render",Qu]]);var sp=rp,ip={components:{ProductsTable:sp},data(){return{columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["notification/notifications"]["productStockAlert"]||[]},fetched(){return this.$store.getters["notification/fetched"]}}};const lp=(0,d.Z)(ip,[["render",Uu]]);var op=lp,np={components:{StockAlertView:op,ReportedDelivery:zu,ReportedConfirmation:bu},data(){return{tab:1,fullTabs:[{id:1,name:"Stock Alert",component:"StockAlertView",permissions:["admin"]},{id:2,name:"Deliveries",component:"ReportedDelivery",permissions:["admin..","delivery"]},{id:3,name:"Confirmations",component:"ReportedConfirmation",permissions:["admin..","agente"]}]}},computed:{tabs(){return this.fullTabs.filter((t=>t.permissions.includes(this.user.role)))},tabName(){return this.$route.params.tab},user(){return this.$store.getters["user/user"]}},watch:{tabName(){this.handleChange()}},methods:{handleChange(){switch(this.tabName){case"stock":this.tab=1;break;case"delivery":this.tab=2;break;case"confirmation":this.tab=3;break;default:this.tab=this.tabs[0].id||1;break}}},mounted(){this.handleChange()}};const dp=(0,d.Z)(np,[["render",Ho]]);var wp=dp,cp={path:"/",name:"home",component:sr,meta:{module:"dashboard"},children:[{path:"",name:"dashboard",component:go,meta:{module:"dashboard",title:"Dashboard",gate:"all"}},{path:"/notifications/:tab",name:"notifications",component:wp,meta:{module:"notification",title:"Notifications",gate:"all"}},{path:"/settings",name:"settings",component:Ro,meta:{module:"settings",title:"Settings",gate:"all"}}]};const up={class:"mb-5 tw-flex tw-justify-between tw-items-center"},pp=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your products")],-1),mp={key:0},hp=(0,s._)("span",{class:"text-white"}," Add Product ",-1),gp={key:0},fp={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},vp={class:"mb-5 tw-flex"},yp={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},xp={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},_p={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},bp=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),kp={class:"tw-relative"},Cp={class:""};function Dp(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("ProductsTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.products.length},[(0,s._)("div",up,[pp,t.$can("create_product")?((0,s.wg)(),(0,s.iD)("div",mp,[(0,s.Wm)(G.T,{color:"primary-color",link:"",to:{name:"product/add"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),hp])),_:1})])):(0,s.kq)("",!0)]),o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",gp,[(0,s.Wm)(n)])),o.fetched?((0,s.wg)(),(0,s.iD)("div",fp,[(0,s._)("div",vp,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",yp,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",xp,[(0,s._)("div",_p,[bp,(0,s._)("div",kp,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[r.nr,l.date]])])])])],2),(0,s._)("div",Cp,[(0,s.Wm)(d,{columns:l.columns,products:o.filteredProducts},null,8,["columns","products"])])])):(0,s.kq)("",!0)])}var Sp={components:{ProductsTable:sp},data(){return{localUrl:F,confirmations:Yn,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"ref",name:"Ref"},{prop:"name",name:"Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"quantity",name:"Qty"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]},filteredProducts(){const t=this.date;return this.products.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!(e.ref.toLowerCase().includes(this.search.toLowerCase())||e.name.toLowerCase().includes(this.search.toLowerCase())||e.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{getProducts(){er.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts()}};const zp=(0,d.Z)(Sp,[["render",Dp]]);var Up=zp,Lp=a(240),Pp=a(4842);const Ap=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Product "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new product")],-1),Wp={key:0},$p={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Ep={class:"tw-w-full"},qp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),Op={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Tp={class:"tw-w-full"},Vp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),Fp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Ip={class:"tw-w-full"},Rp={class:"mb-1 text-body-2 tw-text-zinc-700"},jp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Np={class:"mb-1 text-body-2 tw-text-zinc-700"},Mp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Hp=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),Yp={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Zp={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},Kp=(0,s._)("span",null,"Add Variants: ",-1),Bp={key:0,class:"tw-h-fit tw-mb-"},Qp=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),Gp={class:"tw-relative"},Jp=(0,s._)("option",{value:0},"Select",-1),Xp=["value"],tm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},em={key:1},am={class:"md:tw-col-span-3 tw-col-span-12"},rm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),sm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},im={class:"md:tw-col-span-3 tw-col-span-12"},lm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),om={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},nm={key:2},dm={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},wm={class:"md:tw-col-span-3 tw-col-span-12"},cm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),um={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},pm={class:"md:tw-col-span-3 tw-col-span-12"},mm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),hm={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},gm={class:"md:tw-col-span-3 tw-col-span-12"},fm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),vm=(0,s._)("div",{class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},null,-1),ym={class:"md:tw-col-span-3 tw-col-span-12"},xm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),_m={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},bm={class:"tw-col-span-12 tw-flex tw-justify-end"},km=["disabled"],Cm=(0,s._)("span",{class:"tw-text-white"},"Add",-1),Dm={class:""},Sm={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},zm=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),Um={class:"mb-1 text-body-2 tw-text-zinc-700"},Lm={key:1,class:"tw-max-w-full tw-overflow-x-auto"},Pm={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Am={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Wm={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},$m={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Em={class:"tw-px-6 tw-py-2"},qm={class:"tw-px-6 tw-py-2"},Om={class:"tw-px-6 tw-py-2"},Tm={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},Vm=(0,s._)("h1",{class:"tw-font-medium"},"Deliveries",-1),Fm={class:"tw-mt-2"},Im=(0,s._)("h1",{class:"tw-font-medium"},"Image",-1),Rm={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},jm={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},Nm={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},Mm={class:"tw-w-max tw-relative"},Hm=(0,s._)("div",{class:"tw-relative"},[(0,s._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,s._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),Ym={class:"md:tw-col-span-6 tw-col-span-12"},Zm={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},Km=(0,s._)("span",null,"No image available",-1),Bm=[Km],Qm={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Gm=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Jm=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function Xm(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("VariantActions"),w=(0,s.up)("ProductOffers");return(0,s.wg)(),(0,s.iD)("div",null,[Ap,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Wp,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",$p,[(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Ep,[qp,(0,s.Wm)(tt.hw,{error:!l.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:l.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Op,(0,Q.zw)(l.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Tp,[Vp,(0,s.Wm)(tt.hw,{error:!l.formStatus.reference.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("reference")),"hide-details":!0,modelValue:l.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>l.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Fp,(0,Q.zw)(l.formStatus.reference.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Ip,[(0,s._)("div",Rp," Buying Price ("+(0,Q.zw)(l.currency)+") ",1),(0,s.Wm)(tt.hw,{type:"number",onChange:o.handleBuyingPriceChange,error:!l.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("buyingPrice")),"hide-details":!0,modelValue:l.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>l.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",jp,(0,Q.zw)(l.formStatus.buyingPrice.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",Np," Selling Price ("+(0,Q.zw)(l.currency)+") ",1),(0,s.Wm)(tt.hw,{type:"number",onChange:o.handleSellingPriceChange,error:!l.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("sellingPrice")),"hide-details":!0,modelValue:l.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>l.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Mp,(0,Q.zw)(l.formStatus.sellingPrice.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Hp,(0,s.Wm)(Pp.z,{error:!l.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>o.resetError("description")),"hide-details":!0,modelValue:l.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>l.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,s._)("div",Yp,(0,Q.zw)(l.formStatus.description.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-0",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",Zp,[Kp,(0,s.Wm)(fo.G,{modelValue:l.addVariants,"onUpdate:modelValue":e[10]||(e[10]=t=>l.addVariants=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(nr.D,{cols:"12",md:"6",class:"tw-border-l tw-border-r-neutral-700 tw-py-2"},{default:(0,s.w5)((()=>["admin"==o.user.role?((0,s.wg)(),(0,s.iD)("div",Bp,[Qp,(0,s._)("div",Gp,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.warehouse=t),onChange:e[12]||(e[12]=t=>o.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[Jp,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.warehouses,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,Xp)))),128))],544),[[r.bM,l.warehouse]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})]),(0,s._)("div",tm,(0,Q.zw)(l.formStatus.warehouse.message),1)])):(0,s.kq)("",!0),l.addVariants?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",em,[(0,s._)("div",am,[rm,(0,s.Wm)(tt.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid,onKeyup:e[13]||(e[13]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[14]||(e[14]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",sm,(0,Q.zw)(l.formStatus.quantity.message),1)]),(0,s._)("div",im,[lm,(0,s.Wm)(tt.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[15]||(e[15]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[16]||(e[16]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",om,(0,Q.zw)(l.formStatus.stockAlert.message),1)])])),l.addVariants?((0,s.wg)(),(0,s.iD)("div",nm,[(0,s._)("div",dm,[(0,s._)("div",wm,[cm,(0,s.Wm)(tt.hw,{error:!l.formStatus.size.valid,onKeyup:e[17]||(e[17]=t=>o.resetError("size")),"hide-details":!0,modelValue:l.size,"onUpdate:modelValue":e[18]||(e[18]=t=>l.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",um,(0,Q.zw)(l.formStatus.size.message),1)]),(0,s._)("div",pm,[mm,(0,s.Wm)(tt.hw,{error:!l.formStatus.color.valid,onKeyup:e[19]||(e[19]=t=>o.resetError("color")),"hide-details":!0,modelValue:l.color,"onUpdate:modelValue":e[20]||(e[20]=t=>l.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",hm,(0,Q.zw)(l.formStatus.color.message),1)]),(0,s._)("div",gm,[fm,(0,s.Wm)(tt.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid&&!1,onKeyup:e[21]||(e[21]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[22]||(e[22]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),vm]),(0,s._)("div",ym,[xm,(0,s.Wm)(tt.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[23]||(e[23]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[24]||(e[24]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",_m,(0,Q.zw)(l.formStatus.stockAlert.message),1)])]),(0,s._)("div",null,[(0,s._)("div",bm,[(0,s._)("button",{disabled:!l.quantity,class:(0,Q.C_)([{"bg-primary-color":l.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[25]||(e[25]=(...t)=>o.addVariant&&o.addVariant(...t))},[(0,s.Wm)(X.t,{size:"small",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),Cm],10,km)])]),(0,s._)("div",Dm,[(0,s._)("div",Sm,[zm,(0,s._)("div",Um," Quantity Total: "+(0,Q.zw)(o.qtyTotal),1)]),0==l.variants.length?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":l.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!l.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,Q.zw)(l.formStatus.variants.valid?"No Variants yet":l.formStatus.variants.message),3)):((0,s.wg)(),(0,s.iD)("div",Lm,[(0,s._)("table",Pm,[(0,s._)("thead",Am,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["size","color","qty","stockAlert","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",Wm,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.variants,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("th",$m,(0,Q.zw)(t.size),1),(0,s._)("td",Em,(0,Q.zw)(t.color),1),(0,s._)("td",qm,(0,Q.zw)(t.quantity),1),(0,s._)("td",Om,(0,Q.zw)(t.stockAlert),1),(0,s._)("td",Tm,[(0,s._)("div",null,[(0,s.Wm)(d,{onDelete:o.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>["admin"==o.user.role?((0,s.wg)(),(0,s.j4)(nr.D,{key:0,cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Vm,(0,s._)("div",Fm,[(0,s.Wm)(Lp.r,{modelValue:l.selectedDeliveries,"onUpdate:modelValue":e[26]||(e[26]=t=>l.selectedDeliveries=t),items:o.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(nr.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(w,{offers:l.offers,"onUpdate:offers":e[27]||(e[27]=t=>l.offers=t)},null,8,["offers"])])])),_:1}),(0,s.Wm)(nr.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Im,(0,s._)("div",Rm,[(0,s._)("div",jm,[(0,s._)("label",Nm,[(0,s._)("div",Mm,[(0,s.Wm)(X.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-progress-upload")])),_:1})]),Hm]),(0,s._)("input",{onChange:e[28]||(e[28]=(...t)=>o.handleImageChange&&o.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,s._)("div",Ym,[(0,s._)("div",Zm,[(0,s._)("img",{class:(0,Q.C_)([{"tw-hidden":!l.image},"w-full h-full tw-object-contain"]),ref:"image",id:"image-preview",alt:"Image Preview"},null,2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!!l.image},"bg-gray-300 h-48 flex items-center justify-center"])},Bm,2)])])])])])),_:1})])),_:1})]),(0,s._)("div",Qm,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Gm])),_:1}),(0,s.Wm)(G.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Jm])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}function th(t,e,a,r,i,l){const o=(0,s.up)("popup"),n=(0,s.up)("UpdateProductVariant"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>i.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1}),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"]),(0,s.Wm)(d,{visible:i.visible,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{onUpdate:l.update,variant:a.variant,onCancel:l.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"])])}const eh={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},ah={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},rh={class:"tw-col-span-12"},sh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),ih={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},lh={class:"tw-col-span-12"},oh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),nh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},dh={class:"tw-col-span-12"},wh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),ch={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},uh={class:"tw-col-span-12"},ph=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Stock Alert",-1),mh={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},hh={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end"},gh=(0,s._)("span",{class:"tw-text-white"},"Cancel",-1),fh=[gh],vh=["disabled"],yh=(0,s._)("span",{class:"tw-text-white"},"Save",-1),xh=[yh];function _h(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",eh,[(0,s._)("div",ah,[(0,s._)("div",rh,[sh,(0,s.Wm)(tt.hw,{error:!i.formStatus.size.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("size")),"hide-details":!0,modelValue:i.size,"onUpdate:modelValue":e[1]||(e[1]=t=>i.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",ih,(0,Q.zw)(i.formStatus.size.message),1)]),(0,s._)("div",lh,[oh,(0,s.Wm)(tt.hw,{error:!i.formStatus.color.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("color")),"hide-details":!0,modelValue:i.color,"onUpdate:modelValue":e[3]||(e[3]=t=>i.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",nh,(0,Q.zw)(i.formStatus.color.message),1)]),(0,s._)("div",dh,[wh,(0,s.Wm)(tt.hw,{onChange:l.handleQuantityChange,type:"number",error:!i.formStatus.quantity.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("quantity")),"hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[5]||(e[5]=t=>i.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",ch,(0,Q.zw)(i.formStatus.quantity.message),1)]),(0,s._)("div",uh,[ph,(0,s.Wm)(tt.hw,{onChange:l.handleStockAlertChange,type:"number",error:!i.formStatus.stockAlert.valid,onKeyup:e[6]||(e[6]=t=>l.resetError("stockAlert")),"hide-details":!0,modelValue:i.stockAlert,"onUpdate:modelValue":e[7]||(e[7]=t=>i.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",mh,(0,Q.zw)(i.formStatus.stockAlert.message),1)])]),(0,s._)("div",null,[(0,s._)("div",hh,[(0,s._)("button",{onClick:e[8]||(e[8]=(...t)=>l.cancel&&l.cancel(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},fh),(0,s._)("button",{disabled:!i.quantity,class:(0,Q.C_)([{"tw-bg-orange-500":i.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[9]||(e[9]=(...t)=>l.updateVariant&&l.updateVariant(...t))},xh,10,vh)])])])}var bh={props:["variant"],data(){return{size:"",color:"",quantity:0,stockAlert:0,newVariant:null,formStatus:{quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""}}}},methods:{updateVariant(){console.log("updated");const t=this.quantity-this.newVariant.quantity;this.newVariant.size=this.size?this.size.toLocaleUpperCase():"",this.newVariant.color=this.color?this.color.toLocaleUpperCase():"",this.newVariant.quantity=this.quantity,this.newVariant.stockAlert=this.stockAlert,this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(t),this.cancel()},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},cancel(){this.$emit("cancel")},resetError(t){this.formStatus[t]={valid:!0,message:""}}},mounted(){this.size=this.variant.size,this.color=this.variant.color,this.quantity=this.variant.quantity,this.stockAlert=this.variant.stockAlert,this.newVariant=this.variant}};const kh=(0,d.Z)(bh,[["render",_h]]);var Ch=kh,Dh={components:{UpdateProductVariant:Ch},props:["variant"],data(){return{visible:!1,deletePopup:!1}},methods:{cancel(){this.visible=!1},update(t){console.log("from actions: ",t)},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}}};const Sh=(0,d.Z)(Dh,[["render",th]]);var zh=Sh;class Uh{async create(t){return await Y.getCookie(),M.post("api/warehouses/new",{name:t.name})}async update(t,e){return await Y.getCookie(),M.post("api/warehouses/update/"+t,{name:e.name})}async all(){return await Y.getCookie(),M.get("api/warehouses")}async getWarehouse(t){return await Y.getCookie(),M.get("api/warehouses/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/warehouses/delete/"+t)}}var Lh=new Uh;const Ph=(0,s._)("h1",{class:"tw-font-medium"},"Offers",-1),Ah={class:"tw-grid tw-grid-cols-12 tw-mb-5 tw-mt-3 tw-gap-3"},Wh={class:"md:tw-col-span-3 tw-col-span-12"},$h=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Eh={class:"md:tw-col-span-3 tw-col-span-12"},qh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),Oh={class:"md:tw-col-span-5 tw-col-span-12"},Th=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note",-1),Vh={class:"md:tw-col-span-1 tw-col-span-12"},Fh=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-transparent"},"Note",-1),Ih={class:"tw-mt-2"},Rh={class:"tw-relative tw-overflow-x-auto tw-shadow sm:tw-rounded"},jh={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Nh=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Quantity"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-32"},"Price"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Note"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 tw-w-24"},"Action")])],-1),Mh={class:"tw-px-6 tw-py-4"},Hh={class:"tw-px-6 tw-py-4"},Yh={class:"tw-px-6 tw-py-4"},Zh={class:"tw-max-w-[250px] tw-text-sm"},Kh={class:"tw-px-6 tw-py-4"},Bh={key:0},Qh=(0,s._)("td",{colspan:"5"},[(0,s._)("p",{class:"tw-text-center tw-p-5"}," No Offers ")],-1),Gh=[Qh];function Jh(t,e,a,r,i,l){const o=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",null,[Ph,(0,s._)("div",Ah,[(0,s._)("div",Wh,[$h,(0,s.Wm)(tt.hw,{type:"number","hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[0]||(e[0]=t=>i.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",Eh,[qh,(0,s.Wm)(tt.hw,{type:"number","hide-details":!0,modelValue:i.price,"onUpdate:modelValue":e[1]||(e[1]=t=>i.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",Oh,[Th,(0,s.Wm)(tt.hw,{type:"text","hide-details":!0,modelValue:i.note,"onUpdate:modelValue":e[2]||(e[2]=t=>i.note=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",Vh,[Fh,(0,s.Wm)(G.T,{onClick:l.handleAdd,class:"mx-auto !tw-px-0 !tw-py-0","min-height":"40px","min-width":"40",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1})])),_:1},8,["onClick"])])]),(0,s._)("div",Ih,[(0,s._)("div",Rh,[(0,s._)("table",jh,[Nh,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.offers,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.key,class:"odd:tw-bg-white even:tw-bg-gray-50 tw-border-b"},[(0,s._)("td",Mh,(0,Q.zw)(t.quantity),1),(0,s._)("td",Hh,(0,Q.zw)(t.price)+" "+(0,Q.zw)(i.currency),1),(0,s._)("td",Yh,[(0,s._)("p",Zh,(0,Q.zw)(t.note),1)]),(0,s._)("td",Kh,[(0,s.Wm)(G.T,{onClick:e=>l.handleDeleteClicked(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])))),128)),0==a.offers.length?((0,s.wg)(),(0,s.iD)("tr",Bh,Gh)):(0,s.kq)("",!0)])])])]),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this offer?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"])])}var Xh={props:["offers"],data(){return{currency:R,deletePopup:!1,toDeleteID:null,quantity:1,price:0,note:""}},methods:{handleDeleteClicked(t){this.toDeleteID=t,this.deletePopup=!0},handleDelete(t){if(this.deletePopup=!1,!t)return!1;this.$emit("update:offers",this.offers.filter((t=>t.id!=this.toDeleteID)))},handleAdd(){const t=this.offers.length>0?this.offers[this.offers.length-1].id:0,e=t+1,a={id:e,quantity:this.quantity,price:this.price,note:this.note};this.$emit("update:offers",[...this.offers,a]),this.quantity=1,this.price=0,this.note=""}}};const tg=(0,d.Z)(Xh,[["render",Jh]]);var eg=tg,ag={components:{VariantActions:zh,ProductOffers:eg},data(){return{currency:R,isLoading:!1,isLoaded:!1,addVariants:!1,variantId:1,variants:[],image:"",imageFile:null,color:"",size:"",quantity:0,warehouse:0,stockAlert:0,offers:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},reference:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},warehouse:{valid:!0,message:""},variants:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},user(){return this.$store.getters["user/user"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;if(t.addVariants=this.addVariants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t}))),this.addVariants)t.variants=this.variants;else{const e=[{id:this.variantId,color:null,size:null,quantity:this.quantity,warehouse_id:"admin"==this.user.role?this.warehouse:1,stockAlert:this.stockAlert}];t.variants=e}er.create(t).then((t=>{"PRODUCT_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.product={name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},this.offers=[],this.selectedDeliveries=[],this.variants=[],this.$store.dispatch("product/addProduct",t.data.data.product)),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const a=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){a.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.product.name,"Product name"),this.formStatus.reference=bt(this.product.reference,"Reference"),this.formStatus.buyingPrice=bt(this.product.buyingPrice,"Buying price"),this.formStatus.quantity=bt(this.quantity,"Quantity"),this.formStatus.sellingPrice=bt(this.product.sellingPrice,"Selling price"),this.formStatus.description=bt(this.product.description,"Description"),this.formStatus.variants=Dt(this.variants),this.addVariants||"admin"!=this.user.role||(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"}),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.reference.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&(!this.addVariants||this.formStatus.variants.valid)&&(!!this.addVariants||this.formStatus.quantity.valid)&&(!!this.addVariants||this.formStatus.warehouse.valid)},addVariant(){if("admin"==this.user.role&&(this.formStatus.warehouse={valid:0!=this.warehouse,message:0!=this.warehouse?"":"Please select a warehouse"},!this.formStatus.warehouse.valid))return!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:"admin"==this.user.role?this.warehouse:1,stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.stockAlert=0,this.color="",this.size="",this.quantity=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.stockAlert<=0&&(this.stockAlert=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return this.isLoaded=!1,Lh.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getWarhouses()}};const rg=(0,d.Z)(ag,[["render",Xm]]);var sg=rg;const ig=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Product "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update product informations")],-1),lg={key:0},og={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},ng={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},dg={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},wg={class:"tw-w-full"},cg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Product Name ",-1),ug={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},pg={class:"tw-w-full"},mg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reference",-1),hg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},gg={class:"tw-w-full"},fg={class:"mb-1 text-body-2 tw-text-zinc-700"},vg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},yg={class:"mb-1 text-body-2 tw-text-zinc-700"},xg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},_g=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Description ",-1),bg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},kg={key:0,class:"tw-h-fit tw-mb-"},Cg=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Warehouse",-1),Dg={class:"tw-relative"},Sg=(0,s._)("option",{value:0},"Select",-1),zg=["value"],Ug={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Lg={class:"tw-grid tw-grid-cols-12 md:tw-gap-3"},Pg={class:"md:tw-col-span-3 tw-col-span-12"},Ag=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Size",-1),Wg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},$g={class:"md:tw-col-span-3 tw-col-span-12"},Eg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Color",-1),qg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Og={class:"md:tw-col-span-3 tw-col-span-12"},Tg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),Vg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Fg={class:"md:tw-col-span-3 tw-col-span-12"},Ig=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Stock Alert ",-1),Rg={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},jg={class:"tw-col-span-12 tw-flex tw-justify-end"},Ng=["disabled"],Mg=(0,s._)("span",{class:"tw-text-white"},"Add",-1),Hg={class:""},Yg={class:"tw-flex tw-justify-between tw-items-center tw-mt-5"},Zg=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variants",-1),Kg={class:"mb-1 text-body-2 tw-text-zinc-700"},Bg={key:1,class:"tw-max-w-full tw-overflow-x-auto"},Qg={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Gg={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Jg={key:0,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},Xg=(0,s._)("div",{class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"}," warehouse ",-1),tf=[Xg],ef={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},af={key:0,class:"tw-px-6 tw-py-2 tw-capitalize"},rf={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},sf={class:"tw-px-6 tw-py-2"},lf={class:"tw-px-6 tw-py-2"},of={class:"tw-flex tw-flex-col"},nf={key:0,class:"tw-text-xs tw-text-green-500"},df={class:"tw-px-6 tw-py-2"},wf={class:"tw-flex tw-items-center tw-px-6 tw-py-2 tw-space-x-3"},cf=(0,s._)("h1",null,"Deliveries",-1),uf={class:"tw-mt-2"},pf=(0,s._)("h1",null,"Image",-1),mf={class:"tw-grid tw-grid-cols-12 tw-gap-5 tw-mt-2"},hf={class:"md:tw-col-span-6 tw-col-span-12 tw-relative tw-h-fit"},gf={title:"Click to upload",for:"button2",class:"tw-cursor-pointer tw-flex tw-items-center tw-gap-4 tw-px-6 tw-py-4 before:border-gray-400/60 hover:before:tw-border-gray-300 group dark:before:bg-darker dark:hover:before:tw-border-gray-500 before:tw-bg-gray-100 dark:before:tw-border-gray-600 before:tw-absolute before:tw-inset-0 before:tw-rounded-lg before:tw-border before:tw-border-dashed before:tw-transition-transform before:tw-duration-300 hover:before:tw-scale-100 active:tw-duration-75 active:before:tw-scale-95"},ff={class:"tw-w-max tw-relative"},vf=(0,s._)("div",{class:"tw-relative"},[(0,s._)("span",{class:"tw-block tw-text-base tw-font-semibold tw-relative tw-text-orange-600"}," Upload a file "),(0,s._)("span",{class:"tw-mt-0.5 tw-block tw-text-sm tw-text-gray-500 dark:tw-text-gray-400"},"Max 2 MB")],-1),yf={class:"md:tw-col-span-6 tw-col-span-12"},xf={class:"image-preview tw-w-full tw-flex tw-items-center tw-justify-center tw-h-full border rounded p-4"},_f=["src"],bf=(0,s._)("span",null,"No image available",-1),kf=[bf],Cf={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Df=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Sf=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function zf(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("UpdateVariantActions"),w=(0,s.up)("ProductOffers");return(0,s.wg)(),(0,s.iD)("div",null,[ig,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",lg,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",og,[(0,s._)("div",ng,[(0,s.Uk)(" Product ID: "),(0,s._)("span",dg,(0,Q.zw)(o.id),1)]),(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",wg,[cg,(0,s.Wm)(tt.hw,{error:!l.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("name")),"hide-details":!0,modelValue:l.product.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",ug,(0,Q.zw)(l.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",pg,[mg,(0,s.Wm)(tt.hw,{error:!l.formStatus.quantity.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.product.reference,"onUpdate:modelValue":e[3]||(e[3]=t=>l.product.reference=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",hg,(0,Q.zw)(l.formStatus.quantity.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",gg,[(0,s._)("div",fg," Buying Price ("+(0,Q.zw)(l.currency)+") ",1),(0,s.Wm)(tt.hw,{type:"number",onChange:o.handleBuyingPriceChange,error:!l.formStatus.buyingPrice.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("buyingPrice")),"hide-details":!0,modelValue:l.product.buyingPrice,"onUpdate:modelValue":e[5]||(e[5]=t=>l.product.buyingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",vg,(0,Q.zw)(l.formStatus.buyingPrice.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",yg," Selling Price ("+(0,Q.zw)(l.currency)+") ",1),(0,s.Wm)(tt.hw,{type:"number",onChange:o.handleSellingPriceChange,error:!l.formStatus.sellingPrice.valid,onKeyup:e[6]||(e[6]=t=>o.resetError("sellingPrice")),"hide-details":!0,modelValue:l.product.sellingPrice,"onUpdate:modelValue":e[7]||(e[7]=t=>l.product.sellingPrice=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",xg,(0,Q.zw)(l.formStatus.sellingPrice.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[_g,(0,s.Wm)(Pp.z,{error:!l.formStatus.description.valid,onKeyup:e[8]||(e[8]=t=>o.resetError("description")),"hide-details":!0,modelValue:l.product.description,"onUpdate:modelValue":e[9]||(e[9]=t=>l.product.description=t),variant:"outlined",density:"compact",color:"primary-color"},null,8,["error","modelValue"]),(0,s._)("div",bg,(0,Q.zw)(l.formStatus.description.message),1)])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(nr.D,{cols:"12",md:"12",class:"tw-border-t tw-border-t-neutral-300 tw-py-2"},{default:(0,s.w5)((()=>["admin"==o.user.role?((0,s.wg)(),(0,s.iD)("div",kg,[Cg,(0,s._)("div",Dg,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.warehouse=t),onChange:e[11]||(e[11]=t=>o.resetError("warehouse")),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-400 tw-outline-0 tw-text-sm"},[Sg,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.warehouses,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,zg)))),128))],544),[[r.bM,l.warehouse]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})]),(0,s._)("div",Ug,(0,Q.zw)(l.formStatus.warehouse.message),1)])):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s._)("div",Lg,[(0,s._)("div",Pg,[Ag,(0,s.Wm)(tt.hw,{error:!l.formStatus.size.valid,onKeyup:e[12]||(e[12]=t=>o.resetError("size")),"hide-details":!0,modelValue:l.size,"onUpdate:modelValue":e[13]||(e[13]=t=>l.size=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Wg,(0,Q.zw)(l.formStatus.size.message),1)]),(0,s._)("div",$g,[Eg,(0,s.Wm)(tt.hw,{error:!l.formStatus.color.valid,onKeyup:e[14]||(e[14]=t=>o.resetError("color")),"hide-details":!0,modelValue:l.color,"onUpdate:modelValue":e[15]||(e[15]=t=>l.color=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",qg,(0,Q.zw)(l.formStatus.color.message),1)]),(0,s._)("div",Og,[Tg,(0,s.Wm)(tt.hw,{onChange:o.handleQuantityChange,type:"number",error:!l.formStatus.quantity.valid,onKeyup:e[16]||(e[16]=t=>o.resetError("quantity")),"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[17]||(e[17]=t=>l.quantity=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Vg,(0,Q.zw)(l.formStatus.quantity.message),1)]),(0,s._)("div",Fg,[Ig,(0,s.Wm)(tt.hw,{onChange:o.handleStockAlertChange,type:"number",error:!l.formStatus.stockAlert.valid,onKeyup:e[18]||(e[18]=t=>o.resetError("stockAlert")),"hide-details":!0,modelValue:l.stockAlert,"onUpdate:modelValue":e[19]||(e[19]=t=>l.stockAlert=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","error","modelValue"]),(0,s._)("div",Rg,(0,Q.zw)(l.formStatus.stockAlert.message),1)])]),(0,s._)("div",null,[(0,s._)("div",jg,[(0,s._)("button",{disabled:!l.quantity,class:(0,Q.C_)([{"bg-primary-color":l.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[20]||(e[20]=(...t)=>o.addVariant&&o.addVariant(...t))},[(0,s.Wm)(X.t,{size:"small",color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),Mg],10,Ng)])]),(0,s._)("div",Hg,[(0,s._)("div",Yg,[Zg,(0,s._)("div",Kg," Quantity Total: "+(0,Q.zw)(o.qtyTotal),1)]),0==l.variants.length?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([{"tw-bg-neutral-100 tw-text-neutral-500":l.formStatus.variants.valid,"tw-bg-red-100 tw-text-red-500":!l.formStatus.variants.valid},"tw-text-center tw-mb-6 tw-w-full tw-py-3 tw-rounded-lg"])},(0,Q.zw)(l.formStatus.variants.valid?"No Variants yet":l.formStatus.variants.message),3)):((0,s.wg)(),(0,s.iD)("div",Bg,[(0,s._)("table",Qg,[(0,s._)("thead",Gg,[(0,s._)("tr",null,["admin"==o.user.role?((0,s.wg)(),(0,s.iD)("th",Jg,tf)):(0,s.kq)("",!0),((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["size","color","qty","Stock Alert","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",ef,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.variants,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},["admin"==o.user.role?((0,s.wg)(),(0,s.iD)("td",af,(0,Q.zw)(t.warehouse.name),1)):(0,s.kq)("",!0),(0,s._)("td",rf,(0,Q.zw)(t.size),1),(0,s._)("td",sf,(0,Q.zw)(t.color),1),(0,s._)("td",lf,[(0,s._)("div",of,[(0,s._)("span",null,(0,Q.zw)(t.quantity),1),t.created_at?((0,s.wg)(),(0,s.iD)("span",nf,(0,Q.zw)(t.available_quantity),1)):(0,s.kq)("",!0)])]),(0,s._)("td",df,(0,Q.zw)(t.stockAlert),1),(0,s._)("td",wf,[(0,s._)("div",null,[(0,s.Wm)(d,{onDelete:o.deleteVariant,variant:t},null,8,["onDelete","variant"])])])])))),128))])])]))])])])),_:1})])),_:1}),(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>["admin"==o.user.role?((0,s.wg)(),(0,s.j4)(nr.D,{key:0,cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[cf,(0,s._)("div",uf,[(0,s.Wm)(Lp.r,{modelValue:l.selectedDeliveries,"onUpdate:modelValue":e[21]||(e[21]=t=>l.selectedDeliveries=t),items:o.deliveries,"item-title":"fullname","item-value":"id","hide-details":!0,chips:"",multiple:"",variant:"outlined"},null,8,["modelValue","items"])])])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(nr.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(w,{offers:l.offers,"onUpdate:offers":e[22]||(e[22]=t=>l.offers=t)},null,8,["offers"])])])),_:1}),(0,s.Wm)(nr.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[pf,(0,s._)("div",mf,[(0,s._)("div",hf,[(0,s._)("label",gf,[(0,s._)("div",ff,[(0,s.Wm)(X.t,{class:"tw-text-6xl tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-progress-upload")])),_:1})]),vf]),(0,s._)("input",{onChange:e[23]||(e[23]=(...t)=>o.handleImageChange&&o.handleImageChange(...t)),class:"tw-hidden",type:"file",name:"button2",id:"button2"},null,32)]),(0,s._)("div",yf,[(0,s._)("div",xf,[(0,s._)("img",{class:(0,Q.C_)([{"tw-hidden":!l.image},"w-full h-full tw-object-contain"]),ref:"image",src:l.serverUrl+"storage/"+l.image,id:"image-preview",alt:"Image Preview"},null,10,_f),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!!l.image},"bg-gray-300 h-48 flex items-center justify-center"])},kf,2)])])])])])),_:1})])),_:1})]),(0,s._)("div",Cf,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Df])),_:1}),(0,s.Wm)(G.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Sf])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}const Uf={class:"md:tw-w-[400px] tw-w-[95%] tw-bg-white tw-rounded-lg tw-p-5 tw-mx-auto"},Lf={class:"tw-w-full"},Pf=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Add quantity",-1),Af={class:"tw-col-span-12 tw-flex tw-gap-2 tw-justify-end tw-mt-3"},Wf=(0,s._)("span",{class:"tw-text-white"},"Cancel",-1),$f=[Wf],Ef=["disabled"],qf=(0,s._)("span",{class:"tw-text-white"},"Add",-1),Of=[qf];function Tf(t,e,a,r,i,l){const o=(0,s.up)("popup"),n=(0,s.up)("UpdateProductVariant"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[a.variant.created_at?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.visibleAdd=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1})])),_:1})):(0,s.kq)("",!0),void 0===a.variant.on_hold||a.variant.available_quantity==a.variant.quantity?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>i.deletePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1}),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this product?</p> You won't be able to revert this!",visible:i.deletePopup,onResolved:l.handleDelete},null,8,["visible","onResolved"]),(0,s.Wm)(d,{visible:i.visible,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{onUpdate:l.update,variant:a.variant,onCancel:l.cancel},null,8,["onUpdate","variant","onCancel"])])),_:1},8,["visible","onCancel"]),(0,s.Wm)(d,{visible:i.visibleAdd,onCancel:l.cancelAdd},{default:(0,s.w5)((()=>[(0,s._)("div",Uf,[(0,s._)("div",Lf,[Pf,(0,s.Wm)(tt.hw,{"hide-details":!0,modelValue:i.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>i.quantity=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"])]),(0,s._)("div",Af,[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>l.cancelAdd&&l.cancelAdd(...t)),class:"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"},$f),(0,s._)("button",{disabled:!i.quantity||0==i.quantity,class:(0,Q.C_)([{"!tw-bg-green-500":0!=i.quantity},"tw-bg-neutral-400 tw-py-1 tw-px-4 tw-flex tw-items-center tw-gap-1 tw-text-white tw-rounded-md"]),onClick:e[5]||(e[5]=(...t)=>l.addQuantity&&l.addQuantity(...t))},Of,10,Ef)])])])),_:1},8,["visible","onCancel"])])}var Vf={components:{UpdateProductVariant:Ch},props:["variant"],data(){return{visible:!1,visibleAdd:!1,deletePopup:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1},cancelAdd(){this.visibleAdd=!1},update(t){console.log("from actions: ",t)},addQuantity(){this.newVariant.quantity=parseInt(this.newVariant.quantity)+parseInt(this.quantity),this.newVariant.available_quantity=parseInt(this.newVariant.available_quantity)+parseInt(this.quantity),this.quantity=1,this.cancelAdd()},handleDelete(t){t&&this.$emit("delete",this.variant.id),this.deletePopup=!1}},mounted(){this.newVariant=this.variant}};const Ff=(0,d.Z)(Vf,[["render",Tf]]);var If=Ff,Rf={components:{UpdateVariantActions:If,ProductOffers:eg},data(){return{currency:R,serverUrl:I,isLoading:!1,isLoaded:!1,variantId:1,variants:[],color:"",size:"",quantity:0,stockAlert:0,image:"",imageFile:null,offers:[],warehouse:0,product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""},selectedDeliveries:[],formStatus:{name:{valid:!0,message:""},buyingPrice:{valid:!0,message:""},sellingPrice:{valid:!0,message:""},quantity:{valid:!0,message:""},size:{valid:!0,message:""},color:{valid:!0,message:""},stockAlert:{valid:!0,message:""},description:{valid:!0,message:""},variants:{valid:!0,message:""},warehouse:{valid:!0,message:""}}}},computed:{qtyTotal(){let t=0;return this.variants.forEach((e=>t+=parseInt(e.quantity))),t},id(){return this.$route.params.id},warehouses(){return this.$store.getters["warehouse/warehouses"]},users(){return this.$store.getters["user/users"]},user(){return this.$store.getters["user/user"]},deliveries(){return this.users.filter((t=>"delivery"==t.role?.name)).map((t=>({...t,fullname:t.firstname+" "+t.lastname})))}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.product;t.variants=this.variants,t.image=this.image,t.offers=this.offers,t.selectedDeliveries=this.selectedDeliveries.map((t=>({delivery_id:t,product_id:this.id}))),er.update(this.$route.params.id,t).then((t=>{"PRODUCT_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"PRODUCT_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message}),"QUANTITY_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},handleImageChange(t){const e=t.target.files[0];this.image=e;const a=this.$refs.image;if(e){const t=new FileReader;t.addEventListener("load",(function(){a.src=this.result})),t.readAsDataURL(e)}},resetError(t){this.formStatus[t]={valid:!0,message:""}},getLastVariantId(t){return Math.max(...t.map((t=>t.id)))+1},validate(){return this.formStatus.name=bt(this.product.name,"Product name"),this.formStatus.buyingPrice=bt(this.product.buyingPrice,"Buying price"),this.formStatus.sellingPrice=bt(this.product.sellingPrice,"Selling price"),this.formStatus.description=bt(this.product.description,"Description"),this.formStatus.variants=Dt(this.variants),this.formStatus.name.valid&&this.formStatus.buyingPrice.valid&&this.formStatus.sellingPrice&&this.formStatus.description.valid&&this.formStatus.variants.valid},addVariant(){if(0==this.warehouse)return this.$alert({type:"warning",title:"Select warehouse"}),!1;const t={id:this.variantId,color:this.color.toUpperCase(),size:this.size.toUpperCase(),quantity:this.quantity,warehouse_id:"admin"==this.user.role?this.warehouse:1,warehouse:this.warehouses.find((t=>t.id==this.warehouse)),stockAlert:this.stockAlert};this.variants.push(t),this.variantId++,this.color="",this.size="",this.quantity=0,this.stockAlert=0},deleteVariant(t){this.variants=this.variants.filter((e=>e.id!==t))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},handleStockAlertChange(){this.quantity<=0&&(this.quantity=0)},handleSellingPriceChange(){this.product.sellingPrice<=0&&(this.product.sellingPrice=0)},handleBuyingPriceChange(){this.product.buyingPrice<=0&&(this.product.buyingPrice=0)},getWarhouses(){return Lh.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses),t)),this.$handleApiError)},getProduct(){return er.getProduct(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{variations:e,buying_price:a,selling_price:r,ref:s,name:i,description:l,deliveries:o,image:n,offers:d}=t.data.data.products;return this.variants=e,this.product.buyingPrice=a,this.product.sellingPrice=r,this.product.name=i,this.product.reference=s,this.product.description=l,this.image=n,this.offers=d,this.variantId=this.getLastVariantId(e),this.selectedDeliveries=o.map((t=>t.delivery_id)),this.isLoaded=!0,t}}),this.$handleApiError)},getData(){this.isLoaded=!1,Promise.allSettled([this.getWarhouses(),this.getProduct()]).then((t=>{t.every((t=>"fulfilled"==t.status))&&(this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getData()}};const jf=(0,d.Z)(Rf,[["render",zf]]);var Nf=jf;const Mf={class:"tw-pb-14"},Hf=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Product"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Show product informations")],-1),Yf={key:0},Zf={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Kf={class:"tw-grid tw-grid-cols-12 tw-gap-2"},Bf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Qf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Name:",-1),Gf={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},Jf={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},Xf=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Reference:",-1),tv={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},ev={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},av=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Buying Price:",-1),rv={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},sv={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},iv=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Selling Price:",-1),lv={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},ov={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},nv=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Delivered:",-1),dv={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},wv={class:"tw-col-span-12 md:tw-col-span-6 tw-flex tw-gap-2 tw-items-center tw-justify-between tw-flex-wrap"},cv=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Total Sent:",-1),uv={class:"tw-text-neutral-800 tw-font-medium tw-px-3"},pv={class:"tw-col-span-12 md:tw-col-span-12 tw-flex tw-gap-2 tw-flex-col tw-flex-wrap"},mv=(0,s._)("p",{class:"tw-font-light tw-text-neutral-500"},"Description:",-1),hv={class:"tw-text-neutral-800 tw-font-medium"},gv={key:2,class:"tw-text-neutral-700 tw-font-bold tw-mb-1 tw-mt-5"},fv={key:3,class:"tw-border bg-white tw-w-full tw-rounded-md"},vv={key:4,class:"tw-text-neutral-700 tw-font-bold tw-mt-5 tw-mb-1"},yv={key:5,class:"tw-overflow-hidden tw-border bg-white tw-w-full tw-rounded-md"},xv={class:"tw-max-w-full tw-overflow-auto"},_v={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},bv={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},kv={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},Cv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Dv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Sv={class:"tw-px-6 tw-py-2"},zv={class:"tw-px-6 tw-py-2"},Uv={class:"tw-flex tw-flex-col"},Lv={class:"tw-px-6 tw-py-2"},Pv={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Av=(0,s._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),Wv=(0,s._)("th",{scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},null,-1),$v=(0,s._)("td",{class:"tw-px-6 tw-py-2"},null,-1),Ev={class:"tw-px-6 tw-py-2"},qv={class:"tw-flex tw-flex-col tw-font-medium"},Ov=(0,s._)("td",{class:"tw-px-6 tw-py-2"},null,-1);function Tv(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("ProductTracking");return(0,s.wg)(),(0,s.iD)("div",Mf,[Hf,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Yf,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",Zf,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s._)("div",Kf,[(0,s._)("div",Bf,[Qf,(0,s._)("p",Gf,(0,Q.zw)(i.product.name),1)]),(0,s._)("div",Jf,[Xf,(0,s._)("p",tv,(0,Q.zw)(i.product.ref),1)]),(0,s._)("div",ev,[av,(0,s._)("p",rv,(0,Q.zw)(i.product.buying_price)+" "+(0,Q.zw)(i.currency),1)]),(0,s._)("div",sv,[iv,(0,s._)("p",lv,(0,Q.zw)(i.product.selling_price)+" "+(0,Q.zw)(i.currency),1)]),(0,s._)("div",ov,[nv,(0,s._)("p",dv,(0,Q.zw)(l.qtyTotalDelivered),1)]),(0,s._)("div",wv,[cv,(0,s._)("p",uv,(0,Q.zw)(l.qtyTotalSent),1)]),(0,s._)("div",pv,[mv,(0,s._)("p",hv,(0,Q.zw)(i.product.description),1)])])])])])):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("h1",gv,"Tracking")):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",fv,[(0,s.Wm)(n,{product:i.product},null,8,["product"])])):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("h1",vv,"Variations")):(0,s.kq)("",!0),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",yv,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s._)("div",xv,[(0,s._)("table",_v,[(0,s._)("thead",bv,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["id","size","color","qty","Stock Alert"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",kv,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.product.variations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("th",Cv,(0,Q.zw)(t.id),1),(0,s._)("th",Dv,(0,Q.zw)(t.size),1),(0,s._)("td",Sv,(0,Q.zw)(t.color),1),(0,s._)("td",zv,[(0,s._)("div",Uv,[(0,s._)("span",null,"Initial: "+(0,Q.zw)(t.quantity),1)])]),(0,s._)("td",Lv,(0,Q.zw)(t.stockAlert),1)])))),128)),(0,s._)("tr",Pv,[Av,Wv,$v,(0,s._)("td",Ev,[(0,s._)("div",qv,[(0,s._)("span",null,"Total: "+(0,Q.zw)(l.qtyTotal),1)])]),Ov])])])])])])])):(0,s.kq)("",!0)])}const Vv={class:"tw-flex tw-items-ce tw-gap-1 tw-border-b tw-border-solid tw-border-neutral-200"},Fv=["onClick"];function Iv(t,e,a,r,i,l){const o=(0,s.up)("ProductTrackingTable");return(0,s.wg)(),(0,s.j4)(Jr._,{flat:"",class:"tw-p-1"},{default:(0,s.w5)((()=>[(0,s._)("div",Vv,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.iD)("button",{key:t.id,onClick:e=>i.tab=t.id,class:(0,Q.C_)(["tw-px-4 tw-py-2 tw-rounded-t hover:tw-border-orange-500/50 tw-duration-300 tw-border tw-border-solid tw-border-neutral-200 tw-text-neutral-500 tw-border-b-0",{"tw-bg-orange-500 !tw-text-white tw-border-transparent":t.id==i.tab}])},(0,Q.zw)(t.name),11,Fv)))),128))]),(0,s.kq)("",!0),(0,s.Wm)(es.Oo,{class:"tw-mt-0",modelValue:i.tab,"onUpdate:modelValue":e[1]||(e[1]=t=>i.tab=t)},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.tabs,(t=>((0,s.wg)(),(0,s.j4)(as.H,{key:t.id,value:t.id},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{product:a.product,source:t.source},null,8,["product","source"])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}const Rv={class:"tw-mt-5"},jv={class:"tw-max-w-full tw-overflow-auto"},Nv={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Mv={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},Hv={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"};function Yv(t,e,a,r,i,l){const o=(0,s.up)("ProductTrackingRow");return(0,s.wg)(),(0,s.iD)("div",Rv,[(0,s._)("div",jv,[(0,s._)("table",Nv,[(0,s._)("thead",Mv,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["id","name","quantity","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",Hv,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,(t=>((0,s.wg)(),(0,s.j4)(o,{item:t,key:t.id,source:a.source},null,8,["item","source"])))),128))])])])])}const Zv={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Kv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Bv={class:"tw-flex tw-items-start tw-h-full"},Qv={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},Gv={class:"tw-px-6 tw-py-2"},Jv={key:0},Xv={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},ty={key:0,class:"tw-h-fit tw-py-2"},ey=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),ay={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},ry=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),sy={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},iy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),ly={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},oy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),ny={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},dy={key:1},wy={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},cy={key:0,class:"tw-h-fit tw-py-2"},uy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),py={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},my=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),hy={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},gy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),fy={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},vy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),yy={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"},xy={class:"tw-px-6 tw-py-2 tw-space-x-3"};function _y(t,e,a,r,i,l){const o=(0,s.up)("ShowProductVariantActions");return(0,s.wg)(),(0,s.iD)("tr",Zv,[(0,s._)("th",Kv,[(0,s._)("div",Bv,(0,Q.zw)(a.item.id),1)]),(0,s._)("th",Qv,(0,Q.zw)(a.item.name),1),(0,s._)("td",Gv,["warehouses"==a.source?((0,s.wg)(),(0,s.iD)("div",Jv,[(0,s._)("div",Xv,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,s._)("p",null,"Total: "+(0,Q.zw)(l.get_total_quantity(a.item.product_variations)),1),(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,s.Wm)(Ut.Fx,null,{default:(0,s.w5)((()=>[i.showDetails?((0,s.wg)(),(0,s.iD)("div",ty,[(0,s._)("table",null,[(0,s._)("tbody",null,[(0,s._)("tr",null,[ey,(0,s._)("td",ay,(0,Q.zw)(l.get_total_quantity(a.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,s._)("tr",null,[ry,(0,s._)("td",sy,(0,Q.zw)(l.get_total_quantity(a.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,s._)("tr",null,[iy,(0,s._)("td",ly,(0,Q.zw)(l.get_total_quantity(a.item.product_variations,"total_shipped_quantity")),1)]),(0,s._)("tr",null,[oy,(0,s._)("td",ny,(0,Q.zw)(l.get_total_quantity(a.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0),"deliveries"==a.source?((0,s.wg)(),(0,s.iD)("div",dy,[(0,s._)("div",wy,[(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,s._)("p",null,"Total: "+(0,Q.zw)(l.get_total_quantity(a.item.product_variations)),1),(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,s.Wm)(Ut.Fx,null,{default:(0,s.w5)((()=>[i.showDetails?((0,s.wg)(),(0,s.iD)("div",cy,[(0,s._)("table",null,[(0,s._)("tbody",null,[(0,s._)("tr",null,[uy,(0,s._)("td",py,(0,Q.zw)(l.get_total_quantity(a.item.product_variations,"movements_total_confirmed_quantity")),1)]),(0,s._)("tr",null,[my,(0,s._)("td",hy,(0,Q.zw)(l.get_total_quantity(a.item.product_variations,"movements_total_not_confirmed_quantity")),1)]),(0,s._)("tr",null,[gy,(0,s._)("td",fy,(0,Q.zw)(l.get_total_quantity(a.item.product_variations,"total_shipped_quantity")),1)]),(0,s._)("tr",null,[vy,(0,s._)("td",yy,(0,Q.zw)(l.get_total_quantity(a.item.product_variations,"total_delivered_quantity")),1)])])])])):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0)]),(0,s._)("td",xy,[(0,s._)("div",null,[(0,s.Wm)(o,{type:a.source,source:a.item},null,8,["type","source"])])])])}function by(t,e,a,r,i,l){const o=(0,s.up)("ProductVariantDetails");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>i.visible=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue-lighten-2",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye")])),_:1})])),_:1}),(0,s.Wm)(o,{visible:i.visible,onCancel:l.cancel,type:a.type,source:a.source},null,8,["visible","onCancel","type","source"])])}const ky={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},Cy={class:"tw-p-5"},Dy={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},Sy=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},"SIZE"),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"},"COLOR"),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1);function zy(t,e,a,r,i,l){const o=(0,s.up)("ProductVariantDetailsRow"),n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{visible:a.visible,onCancel:l.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",ky,[(0,s.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,s._)("div",Cy,[(0,s._)("table",Dy,[Sy,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.source.product_variations,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,item:t,type:a.type},null,8,["item","type"])))),128))])]),(0,s.kq)("",!0)])])])),_:1},8,["visible","onCancel"])])}const Uy={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},Ly={class:"tw-w-4 tw-px-2 tw-py-1"},Py={class:"tw-w-4 tw-px-2 tw-py-1"},Ay={class:"tw-w-4 tw-px-2 tw-py-1"},Wy={class:"tw-w-4 tw-px-2 tw-py-1"},$y={class:"tw-w-fit tw-min-w-[200px] tw-flex tw-items-center"},Ey={key:0,class:"tw-h-fit tw-py-2"},qy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-emerald-100 tw-border tw-text-emerald-500"}," Received: ",-1),Oy={class:"tw-px-3 tw-py-1 tw-border tw-text-emerald-500"},Ty=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-red-100 tw-text-red-500 tw-border"}," Not Received: ",-1),Vy={class:"tw-px-3 tw-py-1 tw-border tw-text-red-500"},Fy=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-purple-100 tw-border tw-text-purple-500"}," Shipped: ",-1),Iy={class:"tw-px-3 tw-py-1 tw-border tw-text-purple-500"},Ry=(0,s._)("td",{class:"tw-px-3 tw-py-1 tw-bg-blue-100 tw-border tw-text-blue-500"}," Delivered: ",-1),jy={class:"tw-px-3 tw-py-1 tw-border tw-text-blue-500"};function Ny(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("tr",Uy,[(0,s._)("td",Ly,(0,Q.zw)(a.item.id),1),(0,s._)("td",Py,(0,Q.zw)(a.item.size),1),(0,s._)("td",Ay,(0,Q.zw)(a.item.color),1),(0,s._)("td",Wy,[(0,s._)("div",null,[(0,s._)("div",$y,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.showDetails=!i.showDetails),class:"tw-bg-blue-400/10 tw-py-1 tw-px-4 tw-rounded tw-text-blue-400 tw-flex tw-gap-2 tw-items-center tw-justify-between"},[(0,s._)("p",null," Total: "+(0,Q.zw)(a.item.on_hand_quantity),1),(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])]),(0,s.Wm)(Ut.Fx,null,{default:(0,s.w5)((()=>[i.showDetails?((0,s.wg)(),(0,s.iD)("div",Ey,[(0,s._)("table",null,[(0,s._)("tbody",null,[(0,s._)("tr",null,[qy,(0,s._)("td",Oy,(0,Q.zw)(a.item.movements_total_confirmed_quantity),1)]),(0,s._)("tr",null,[Ty,(0,s._)("td",Vy,(0,Q.zw)(a.item.movements_total_not_confirmed_quantity),1)]),(0,s._)("tr",null,[Fy,(0,s._)("td",Iy,(0,Q.zw)(a.item.total_shipped_quantity),1)]),(0,s._)("tr",null,[Ry,(0,s._)("td",jy,(0,Q.zw)(a.item.total_delivered_quantity),1)])])])])):(0,s.kq)("",!0)])),_:1})])])])}var My={props:["type","item"],data(){return{showDetails:!1}}};const Hy=(0,d.Z)(My,[["render",Ny]]);var Yy=Hy,Zy={props:["visible","source","type"],components:{ProductVariantDetailsRow:Yy},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const Ky=(0,d.Z)(Zy,[["render",zy]]);var By=Ky,Qy={props:["product","source","type"],components:{ProductVariantDetails:By},data(){return{visible:!1,quantity:1,newVariant:null}},methods:{cancel(){this.visible=!1}},mounted(){console.log(this.source)}};const Gy=(0,d.Z)(Qy,[["render",by]]);var Jy=Gy,Xy={components:{ShowProductVariantActions:Jy},props:["source","item"],data(){return{showDetails:!1}},methods:{get_total_quantity(t,e="on_hand_quantity"){let a=0;return t.forEach((t=>{a+=t[e]})),a}}};const tx=(0,d.Z)(Xy,[["render",_y]]);var ex=tx,ax={props:["product","source"],components:{ProductTrackingRow:ex},computed:{items(){return this.product.tracking[this.source]}},methods:{},mounted(){}};const rx=(0,d.Z)(ax,[["render",Yv]]);var sx=rx,ix={components:{ProductTrackingTable:sx},props:["product"],data(){return{tab:1,tabs:[{id:1,name:"Deliveries",source:"deliveries"},{id:2,name:"Warehouses",source:"warehouses"}]}}};const lx=(0,d.Z)(ix,[["render",Iv]]);var ox=lx,nx={components:{ProductTracking:ox},data(){return{currency:R,isLoading:!1,isLoaded:!1,variantId:1,variants:[],product:{name:"",reference:"",buyingPrice:0,sellingPrice:0,description:""}}},computed:{qtyTotalDelivered(){let t=0;return this.product.tracking.deliveries.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.total_delivered_quantity}))})),t},qtyTotalSent(){let t=0;return this.product.tracking.warehouses.forEach((e=>{e.product_variations.forEach((e=>{t+=e.movements_total_confirmed_quantity,t+=e.movements_total_not_confirmed_quantity}))})),t},qtyTotal(){if(this.isLoaded){let t=0;return this.product.variations.forEach((e=>{t+=e.quantity})),t}return 0}},methods:{getProduct(){const t=this.$route.params.id;er.getProduct(t).then((t=>{"SUCCESS"==t.data.code&&(this.product=t.data.data.products,this.isLoaded=!0)}),this.$handleApiError)}},mounted(){this.getProduct()}};const dx=(0,d.Z)(nx,[["render",Tv]]);var wx=dx,cx={name:"products",path:"/products",component:sr,meta:{module:"product"},children:[{name:"product/list",path:"",component:Up,meta:{module:"product",subModule:"product/list",title:"Products List",gate:"show_all_products"}},{name:"product/add",path:"add",component:sg,meta:{module:"product",subModule:"product/add",title:"Add Product",gate:"create_product"}},{name:"product/update",path:"update/:id",component:Nf,meta:{module:"product",subModule:"product/update",title:"Update Product",gate:"update_product"}},{name:"product/show",path:":id",component:wx,meta:{module:"product",subModule:"product/show",title:"Product Informations",gate:"view_product"}}]};const ux={class:"mb-5 tw-flex tw-justify-between tw-items-center"},px=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Users List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all users")],-1),mx={key:0},hx=(0,s._)("span",{class:"text-white"}," Add User ",-1),gx={key:0},fx={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},vx={class:"mb-5 tw-flex"},yx={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},xx={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},_x={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},bx=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Role",-1),kx={class:"tw-relative"},Cx=["value"],Dx={class:""};function Sx(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("UsersTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.users.length},[(0,s._)("div",ux,[px,t.$can("create_user")?((0,s.wg)(),(0,s.iD)("div",mx,[(0,s.Wm)(G.T,{color:"primary-color",link:"",to:{name:"user/add"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),hx])),_:1})])):(0,s.kq)("",!0)]),o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",gx,[(0,s.Wm)(n)])),o.fetched?((0,s.wg)(),(0,s.iD)("div",fx,[(0,s._)("div",vx,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",yx,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",xx,[(0,s._)("div",_x,[bx,(0,s._)("div",kx,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.role=t),class:"tw-w-full focus:tw-border-orange-400 tw-capitalize tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.roles,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t,value:t},(0,Q.zw)(t),9,Cx)))),128))],512),[[r.bM,l.role]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),(0,s._)("div",Dx,[(0,s.Wm)(d,{users:o.filteredUsers,columns:l.columns},null,8,["users","columns"])])])):(0,s.kq)("",!0)])}const zx={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},Ux={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Lx={class:"tw-text-xs tw-text-gray-700 tw- tw-bg-gray-50"},Px=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),Ax={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},Wx=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),$x={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Ex={class:"tw-px-6 tw-py-4"},qx={class:"tw-px-6 tw-py-4"},Ox={class:"tw-px-6 tw-py-4"},Tx={class:"tw-px-6 tw-py-4"},Vx={class:"tw-px-6 tw-py-4"},Fx={key:0,class:"tw-text-red-500"},Ix={key:1},Rx={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},jx=(0,s._)("div",{class:"tw-p-1 tw-rounded-full tw-bg-green-500"},null,-1),Nx={key:1,class:"tw-text-neutral-700"},Mx={class:"tw-px-6 tw-py-4"},Hx={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},Yx={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Zx={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Kx=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),Bx=["value"],Qx={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},Gx={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},Jx={class:"tw-text-white"};function Xx(t,e,a,i,l,o){const n=(0,s.up)("RoleName"),d=(0,s.up)("UserStatus"),w=(0,s.up)("UserActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",zx,[(0,s._)("table",Ux,[(0,s._)("thead",Lx,[(0,s._)("tr",null,[Px,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",Ax,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[Wx,(0,s._)("th",$x,(0,Q.zw)(e.id),1),(0,s._)("td",Ex,(0,Q.zw)(e.firstname)+" "+(0,Q.zw)(e.lastname),1),(0,s._)("td",qx,[(0,s.Wm)(n,{role:e.role_name},null,8,["role"])]),(0,s._)("td",Ox,(0,Q.zw)(e.email),1),(0,s._)("td",Tx,(0,Q.zw)(e.phone),1),(0,s._)("td",Vx,[e.last_action?((0,s.wg)(),(0,s.iD)("div",Ix,[1==o.isOnline(o.lastSeen(e.last_action))?((0,s.wg)(),(0,s.iD)("div",Rx,[jx,(0,s.Uk)(" Online ")])):((0,s.wg)(),(0,s.iD)("div",Nx,(0,Q.zw)(o.lastSeen(e.last_action)),1))])):((0,s.wg)(),(0,s.iD)("div",Fx," Never Connected "))]),(0,s._)("td",Mx,[t.$can("update_user_status")?((0,s.wg)(),(0,s.j4)(d,{key:0,user:e},null,8,["user"])):(0,s.kq)("",!0)]),(0,s._)("td",Hx,[(0,s.Wm)(w,{user:e},null,8,["user"])])])))),128))])])]),(0,s._)("div",Yx,[(0,s._)("div",Zx,[Kx,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Bx)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",Qx,[(0,s._)("div",Gx,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.users.length:o.nextRange)+" of "+(0,Q.zw)(a.users.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",Jx,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function t_(t,e,a,r,i,l){const o=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",null,[t.$can("update_user")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,to:"/users/update/"+a.user.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("view_user")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_user")&&"admin"!==a.user.role_name?((0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this user?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var e_={props:["rowIndex","user"],name:"userActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,K["delete"](this.user.id).then((t=>{"USER_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"User Deleted Successfully"})),K.all().then((t=>{"SHOW_ALL_USERS"==t.data.code&&this.$store.dispatch("user/setUsers",t.data.data.users)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const a_=(0,d.Z)(e_,[["render",t_]]);var r_=a_;const s_={key:0,class:"tw-flex tw-items-center"};function i_(t,e,a,r,i,l){return"admin"!==a.user.role_name?((0,s.wg)(),(0,s.iD)("div",s_,[(0,s.Wm)(fo.G,{disabled:i.isLoading,loading:i.isLoading,onChange:l.handleChange,color:"primary-color",flat:!0,modelValue:i.checked,"onUpdate:modelValue":e[0]||(e[0]=t=>i.checked=t),density:"compact","hide-details":!0},null,8,["disabled","loading","onChange","modelValue"])])):(0,s.kq)("",!0)}var l_={props:["rowIndex","prop","user"],data(){return{isLoading:!1,checked:!1}},watch:{},methods:{handleChange(){const t={id:this.user.id,status:this.checked?"true":"false"};this.isLoading=!0,K.updateStatus(t).then((t=>{"STATUS_USER_UPDATED"==t.data.code&&(this.$alert({type:"success",title:"Status updated"}),this.setUpdatedUser(this.user.id,this.checked))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},setUpdatedUser(t,e){let a=localStorage.getItem("updatedUsers"),r={};a?(r=JSON.parse(a),r[t]=e):r[t]=e,localStorage.setItem("updatedUsers",JSON.stringify(r))},getUpdatedUsers(){let t=localStorage.getItem("updatedUsers");if(!t)return{};let e=JSON.parse(t);return e}},mounted(){const t=this.getUpdatedUsers();Object.keys(t).includes(`${this.user.id}`)?this.checked=1==t[this.model.id]:this.checked=1==this.user.status}};const o_=(0,d.Z)(l_,[["render",i_]]);var n_=o_;const d_={class:"tw-flex tw-items-center tw-h-full"};function w_(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",d_,[(0,s._)("div",{class:(0,Q.C_)([l.current.bg,"tw-px-2 tw-py-1 tw-rounded-lg"])},[(0,s._)("div",{class:(0,Q.C_)([l.current.text,"tw-text-sm tw-uppercase"])},(0,Q.zw)(a.role),3)],2)])}var c_={props:["role"],data(){return{variants:{default:{bg:"tw-bg-neutral-500/10",text:"tw-text-neutral-500"},admin:{bg:"tw-bg-pink-500/10",text:"tw-text-pink-500"},agente:{bg:"tw-bg-green-500/10",text:"tw-text-green-500"},delivery:{bg:"tw-bg-blue-500/10",text:"tw-text-blue-500"}}}},computed:{current(){return["admin","delivery","agente"].includes(this.role)?this.variants[this.role]:this.variants["default"]}}};const u_=(0,d.Z)(c_,[["render",w_]]);var p_=u_,m_={props:["columns","users"],components:{UserActions:r_,UserStatus:n_,RoleName:p_},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.users.length/this.paginationLimit)},items(){return this.users.slice(this.prevRange,this.nextRange)}},methods:{lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Kr.x)(e)},isOnline(t){let e=["Just Now","one minute ago","2 minutes ago","3 minutes ago"];return e.includes(t)}}};const h_=(0,d.Z)(m_,[["render",Xx]]);var g_=h_,f_={components:{UsersTable:g_},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,role:"All",search:"",columns:[{prop:"id",name:"#"},{prop:"fullname",name:"Name"},{prop:"role_name",name:"Role"},{prop:"email",name:"Email"},{prop:"phone",name:"Phone Number"},{prop:"last_seen",name:"Last Seen"},{prop:"status",name:"Active"},{name:"Acions",prop:"users"}]}},computed:{fetched(){return this.$store.getters["user/fetched"]},users(){return this.$store.getters["user/users"]},roles(){let t=new Set(["All",...this.users.map((t=>t.role_name))]);return t},filteredUsers(){const t=this.role,e=this.search;return this.users.filter((a=>("all"===t.toLocaleLowerCase()||t.toLocaleLowerCase()===a.role_name)&&!!(a.firstname.toLowerCase().includes(e.toLowerCase())||a.lastname.toLowerCase().includes(e.toLowerCase())||a.role_name.toLowerCase().includes(e.toLowerCase())||a.email.toLowerCase().includes(e.toLowerCase())||a.phone.toLowerCase().includes(e.toLowerCase()))))}},methods:{getRoles(){K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)},getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0)}})).catch(this.$handleApiError)}},mounted(){localStorage.removeItem("updatedUsers"),this.fetched||this.getUsers()}};const v_=(0,d.Z)(f_,[["render",Sx]]);var y_=v_,x_=a(988);const __=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add User "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new user")],-1),b_={key:0},k_={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},C_={class:"tw-w-full"},D_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),S_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},z_={class:"tw-w-full"},U_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),L_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},P_={class:"tw-w-full"},A_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),W_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},$_={class:"tw-w-full"},E_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),q_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},O_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),T_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),V_=["value"],F_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),I_=["value"],R_=(0,s._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),j_=(0,s._)("span",{class:"text-white"},"Add",-1),N_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),M_={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},H_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),Y_={class:"tw-w-full"},Z_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),K_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},B_={class:"tw-w-full"},Q_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),G_={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},J_=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),X_={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},tb=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),eb=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function ab(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[__,l.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",b_,[(0,s.Wm)(n)])),l.isFormReady?((0,s.wg)(),(0,s.iD)("div",k_,[(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",C_,[D_,(0,s.Wm)(tt.hw,{error:!l.formStatus.firstname.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>o.resetError("firstname")),modelValue:l.user.firstname,"onUpdate:modelValue":e[1]||(e[1]=t=>l.user.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",S_,(0,Q.zw)(l.formStatus.firstname.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",z_,[U_,(0,s.Wm)(tt.hw,{error:!l.formStatus.lastname.valid,"hide-details":!0,onKeyup:e[2]||(e[2]=t=>o.resetError("lastname")),modelValue:l.user.lastname,"onUpdate:modelValue":e[3]||(e[3]=t=>l.user.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",L_,(0,Q.zw)(l.formStatus.lastname.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",P_,[A_,(0,s.Wm)(tt.hw,{error:!l.formStatus.email.valid,"hide-details":!0,onKeyup:e[4]||(e[4]=t=>o.resetError("email")),modelValue:l.user.email,"onUpdate:modelValue":e[5]||(e[5]=t=>l.user.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",W_,(0,Q.zw)(l.formStatus.email.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",$_,[E_,(0,s.Wm)(tt.hw,{error:!l.formStatus.phone.valid,"hide-details":!0,onKeyup:e[6]||(e[6]=t=>o.resetError("phone")),modelValue:l.user.phone,"onUpdate:modelValue":e[7]||(e[7]=t=>l.user.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",q_,(0,Q.zw)(l.formStatus.phone.message),1)])])),_:1}),o.isAgente?((0,s.wg)(),(0,s.j4)(nr.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.Wm)(fo.G,{modelValue:l.isHavingAllProducts,"onUpdate:modelValue":e[8]||(e[8]=t=>l.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),O_,(0,s._)("div",null,[(0,s.Wm)(x_.f,{disabled:l.isHavingAllProducts,modelValue:l.selectedProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>l.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:o.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,s.kq)("",!0),o.isDelivery?((0,s.wg)(),(0,s.j4)(nr.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[T_,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,V_)))),128))],512),[[r.bM,l.city]])])])),_:1})):(0,s.kq)("",!0),o.isDelivery?((0,s.wg)(),(0,s.j4)(nr.D,{key:2,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[F_,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,I_)))),128))],512),[[r.bM,l.deliveryCity]]),R_,(0,s.Wm)(tt.hw,{"hide-details":!0,modelValue:l.deliveryCityFee,"onUpdate:modelValue":e[12]||(e[12]=t=>l.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,s.Wm)(G.T,{onClick:o.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,s.w5)((()=>[j_])),_:1},8,["onClick"])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(nr.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[N_,(0,s.Wm)(Lp.r,{class:"text-capitalize",items:o.roles,"item-title":"name","item-value":"id",modelValue:l.role,"onUpdate:modelValue":e[13]||(e[13]=t=>l.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["items","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",M_,[H_,(0,s.Wm)(fo.G,{modelValue:l.user.status,"onUpdate:modelValue":e[14]||(e[14]=t=>l.user.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Y_,[Z_,(0,s.Wm)(tt.hw,{error:!l.formStatus.password.valid,"hide-details":!0,onKeyup:e[15]||(e[15]=t=>o.resetError("password")),modelValue:l.user.password,"onUpdate:modelValue":e[16]||(e[16]=t=>l.user.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",K_,(0,Q.zw)(l.formStatus.password.message),1)])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",B_,[Q_,(0,s.Wm)(tt.hw,{error:!l.formStatus.confirmPassword.valid,"hide-details":!0,onKeyup:e[17]||(e[17]=t=>o.resetError("confirmPassword")),modelValue:l.user.confirmPassword,"onUpdate:modelValue":e[18]||(e[18]=t=>l.user.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",G_,(0,Q.zw)(l.formStatus.confirmPassword.message),1)])])),_:1}),o.isDelivery?((0,s.wg)(),(0,s.j4)(nr.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[J_,(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryCities,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,s._)("div",null,(0,Q.zw)(o.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,s._)("div",null,(0,Q.zw)(t.fee)+" "+(0,Q.zw)(l.currency),1),(0,s._)("div",null,[(0,s.Wm)(X.t,{color:"red",onClick:e=>o.removeCity(t.id),size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})])),_:1})]),(0,s._)("div",X_,[(0,s.Wm)(G.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[tb])),_:1}),(0,s.Wm)(G.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[eb])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var rb={data(){return{localUrl:F,currency:R,isFormReady:!1,isLoading:!1,city:1,isMultipleProducts:!1,isHavingAllProducts:!1,id:1,deliveryCity:1,deliveryCityFee:0,deliveryCities:[],product:0,selectedProducts:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},user:{firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},role:3}},computed:{roles(){return this.$store.getters["user/roles"]},rolesFetched(){return this.$store.getters["user/fetchedRoles"]},cities(){return this.$store.getters["city/cities"]},citiesFetched(){return this.$store.getters["city/fetched"]},products(){return this.$store.getters["product/products"]},productsFethched(){return this.$store.getters["product/fetched"]},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{},methods:{removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.id,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.id+=1,this.deliveryCity=1,this.deliveryCityFee=0},create(){if(!this.validate())return!1;this.isLoading=!0;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};K.register(t).then((t=>{"USER_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.user={firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",status:!0},this.role=3,this.product_id=null,this.deliveryCities=[],this.id=1)})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let a in e.error)this.formStatus[a]={valid:!1,message:e.error[a][0]}})).finally((()=>{this.isLoading=!1}))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){this.formStatus.email=xt(this.user.email),this.formStatus.firstname=bt(this.user.firstname),this.formStatus.lastname=bt(this.user.lastname),this.formStatus.phone=bt(this.user.phone),this.formStatus.password=_t(this.user.password),this.formStatus.confirmPassword=Ct(this.user.password,this.user.confirmPassword);const t=this.formStatus.email.valid,e=this.formStatus.firstname.valid,a=this.formStatus.lastname.valid,r=this.formStatus.phone.valid,s=this.formStatus.password.valid,i=this.formStatus.confirmPassword.valid;return t&&e&&a&&s&&i&&r},getRoles(){return this.rolesFetched?new Promise((t=>t())):K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)},async getCities(){return this.citiesFetched?new Promise((t=>t())):K.cities().then((t=>{this.$store.dispatch("city/cities",t.data.data),this.$store.dispatch("city/setFetched",!0)}))},async getProducts(){return this.productsFethched?new Promise((t=>t())):er.all().then((t=>{this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0)}),(t=>this.$handleApiError(t)))}},mounted(){Promise.allSettled([this.getRoles(),this.getCities(),this.getProducts()]).then((t=>{console.log(t),this.isFormReady=!0}),(t=>this.$handleApiError(t)))}};const sb=(0,d.Z)(rb,[["render",ab]]);var ib=sb;const lb=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update User "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update user informations")],-1),ob={key:0},nb={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},db={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},wb={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},cb={class:"tw-w-full"},ub=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," First Name ",-1),pb={class:"tw-w-full"},mb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Last Name",-1),hb={class:"tw-w-full"},gb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Email",-1),fb={class:"tw-w-full"},vb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Phone Number ",-1),yb={class:"tw-w-full tw-flex tw-gap-10 tw-items-center"},xb=(0,s._)("span",null,"Update Password: ",-1),_b={class:"tw-w-full"},bb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Password",-1),kb={class:"tw-w-full"},Cb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Confirm Password ",-1),Db=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role",-1),Sb={class:"tw-flex tw-gap-10 tw-h-full tw-items-center"},zb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Status:",-1),Ub=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),Lb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),Pb=["value"],Ab=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),Wb=["value"],$b=(0,s._)("div",{class:"mb-1 my-2 text-body-2 tw-text-zinc-700"},"Fee",-1),Eb=(0,s._)("span",{class:"text-white"},"Add",-1),qb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery cities",-1),Ob={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},Tb=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),Vb=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function Fb(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[lb,o.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ob,[(0,s.Wm)(n)])),o.isFormReady?((0,s.wg)(),(0,s.iD)("div",nb,[(0,s._)("div",db,[(0,s.Uk)(" User ID: "),(0,s._)("span",wb,(0,Q.zw)(l.id),1)]),(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",cb,[ub,(0,s.Wm)(tt.hw,{"error-messages":l.formStatus.firstname.message,modelValue:l.firstname,"onUpdate:modelValue":e[0]||(e[0]=t=>l.firstname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",pb,[mb,(0,s.Wm)(tt.hw,{"error-messages":l.formStatus.lastname.message,modelValue:l.lastname,"onUpdate:modelValue":e[1]||(e[1]=t=>l.lastname=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",hb,[gb,(0,s.Wm)(tt.hw,{"error-messages":l.formStatus.email.message,modelValue:l.email,"onUpdate:modelValue":e[2]||(e[2]=t=>l.email=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",fb,[vb,(0,s.Wm)(tt.hw,{"error-messages":l.formStatus.phone.message,modelValue:l.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>l.phone=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-0",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",yb,[xb,(0,s.Wm)(fo.G,{modelValue:l.updatePassword,"onUpdate:modelValue":e[4]||(e[4]=t=>l.updatePassword=t),color:"primary-color","hide-details":!0},null,8,["modelValue"])])])),_:1}),l.updatePassword?((0,s.wg)(),(0,s.j4)(nr.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",_b,[bb,(0,s.Wm)(tt.hw,{"error-messages":l.formStatus.password.message,modelValue:l.password,"onUpdate:modelValue":e[5]||(e[5]=t=>l.password=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0),l.updatePassword?((0,s.wg)(),(0,s.j4)(nr.D,{key:1,class:"!tw-py-2 tw-pt-0",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",kb,[Cb,(0,s.Wm)(tt.hw,{"error-messages":l.formStatus.confirmPassword.message,modelValue:l.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=t=>l.confirmPassword=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","modelValue"])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(nr.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Db,(0,s.Wm)(Lp.r,{class:"text-capitalize","error-messages":l.formStatus.role,items:o.roles,"item-title":"name","item-value":"id",modelValue:l.role,"onUpdate:modelValue":e[7]||(e[7]=t=>l.role=t),variant:"outlined",color:"primary-color",density:"compact"},null,8,["error-messages","items","modelValue"])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",Sb,[zb,(0,s.Wm)(fo.G,{modelValue:l.status,"onUpdate:modelValue":e[8]||(e[8]=t=>l.status=t),color:"primary-color","hide-details":!0,flat:""},null,8,["modelValue"])])])),_:1}),o.isAgente?((0,s.wg)(),(0,s.j4)(nr.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.Wm)(fo.G,{modelValue:l.isHavingAllProducts,"onUpdate:modelValue":e[9]||(e[9]=t=>l.isHavingAllProducts=t),color:"primary-color",label:"All Products"},null,8,["modelValue"])]),Ub,(0,s._)("div",null,[(0,s.Wm)(x_.f,{disabled:l.isHavingAllProducts,modelValue:l.selectedProducts,"onUpdate:modelValue":e[10]||(e[10]=t=>l.selectedProducts=t),"filter-keys":"name",density:"compact","item-value":"id","item-title":"name",variant:"outlined",color:"primary-color",chips:"",items:o.selectProducts,multiple:""},null,8,["disabled","modelValue","items"])])])])),_:1})):(0,s.kq)("",!0),o.isDelivery?((0,s.wg)(),(0,s.j4)(nr.D,{key:1,class:"!tw-py-2",cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Lb,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.city=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Pb)))),128))],512),[[r.bM,l.city]])])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),o.isDelivery?((0,s.wg)(),(0,s.j4)(nr.D,{key:0,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[Ab,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.deliveryCity=t),class:"tw-w-full tw-py-[7px] focus:tw-border-orange-500 tw-px-4 tw-border tw-outline-orange-500 tw-border-neutral-400 tw-border-solid tw-rounded-md"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,Wb)))),128))],512),[[r.bM,l.deliveryCity]]),$b,(0,s.Wm)(tt.hw,{"hide-details":!0,modelValue:l.deliveryCityFee,"onUpdate:modelValue":e[13]||(e[13]=t=>l.deliveryCityFee=t),clearable:"",type:"number","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["modelValue"]),(0,s.Wm)(G.T,{onClick:o.handleAddCity,class:"tw-text-white tw-my-3",variant:"flat",color:"primary-color",block:""},{default:(0,s.w5)((()=>[Eb])),_:1},8,["onClick"])])])),_:1})):(0,s.kq)("",!0),o.isDelivery?((0,s.wg)(),(0,s.j4)(nr.D,{key:1,class:"!tw-py-2",cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[qb,(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryCities,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-flex tw-items-center tw-gap-2",key:t},[(0,s._)("div",null,(0,Q.zw)(l.cities.filter((e=>e.id==t.city_id))[0]?.name),1),(0,s._)("div",null,(0,Q.zw)(t.fee)+" DH ",1),(0,s._)("div",null,[(0,s.Wm)(X.t,{color:"red",onClick:e=>o.removeCity(t.id),size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete")])),_:2},1032,["onClick"])])])))),128))])])])),_:1})):(0,s.kq)("",!0)])),_:1})]),(0,s._)("div",Ob,[(0,s.Wm)(G.T,{link:"",to:{name:"user/list"},color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Tb])),_:1}),(0,s.Wm)(G.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[Vb])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var Ib={data(){return{serverUrl:I,isFetched:!1,isRolesFetched:!1,isUserFetched:!1,isProductsFetched:!1,isLoading:!1,updatePassword:!1,autoId:1,cities:[],deliveryCity:1,deliveryCityFee:0,city:1,deliveryCities:[],formStatus:{firstname:{valid:!0,message:""},lastname:{valid:!0,message:""},phone:{valid:!0,message:""},email:{valid:!0,message:""},password:{valid:!0,message:""},confirmPassword:{valid:!0,message:""}},id:null,firstname:"",lastname:"",phone:"",email:"",password:"",confirmPassword:"",role:"",user_image:null,status:!1,product:null,products:[],selectedProducts:[],isMultipleProducts:!1,isHavingAllProducts:!1}},computed:{roles(){return this.$store.getters["user/roles"]},isFormReady(){return this.isFetched},isAgente(){return 2===this.role},isDelivery(){return 3===this.role},user(){return{id:this.id,firstname:this.firstname,lastname:this.lastname,phone:this.phone,email:this.email,password:this.password,product_id:this.product,deliveryCities:this.deliveryCities,city:this.city,role:this.role,status:this.status?1:0}},selectProducts(){return this.isMultipleProducts,[...this.products]},userProducts(){return this.selectedProducts}},watch:{role(t){console.log("changed"),2===t&&0===this.products.length&&(this.isProductsFetched=!1)}},methods:{update(){if(!this.validate())return!1;const t={...this.user,role:this.role,product_id:this.userProducts,city:this.city,deliveryCities:this.deliveryCities,having_all:this.isHavingAllProducts};this.isLoading=!0,K.update(t,this.updatePassword).then((t=>{"USER_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message})})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;switch(console.log(t),e?.code){case"VALIDATION_ERROR":for(let t in e.error)this.formStatus[t]={valid:!1,message:e.error[t][0]};break}return t})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1}))},validate(){this.formStatus["email"]=xt(this.email),this.formStatus["firstname"]=bt(this.firstname),this.formStatus["lastname"]=bt(this.lastname),this.formStatus["phone"]=bt(this.phone),this.formStatus["password"]=_t(this.password),this.formStatus["confirmPassword"]=Ct(this.password,this.confirmPassword);const t=this.formStatus["email"].valid,e=this.formStatus["firstname"].valid,a=this.formStatus["lastname"].valid,r=this.formStatus["phone"].valid;if(this.updatePassword){const s=this.formStatus["password"].valid,i=this.formStatus["confirmPassword"].valid;return t&&e&&a&&s&&i&&r}return t&&e&&a&&r},removeCity(t){this.deliveryCities=this.deliveryCities.filter((e=>e.id!==t))},handleAddCity(){if(this.deliveryCityFee<=0)return!1;this.deliveryCities.push({id:this.autoId,city_id:this.deliveryCity,fee:this.deliveryCityFee}),this.autoId+=1,this.deliveryCity=1,this.deliveryCityFee=0},async getRoles(){await K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isRolesFetched=!0}})).catch(this.$handleApiError)},async getUser(){return K.getUser(this.$route.params.id).then((t=>{if("USER_SUCCESS"==t?.data.code){const e=t.data.data.user;if(this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.email=e.email,this.phone=e.phone,this.role=e.role,2==e.role&&(this.isHavingAllProducts=1==e.having_all,this.selectedProducts=e?.product),this.user_image=e.photo,this.status=1==e.status,this.isUserFetched=!0,3==e.role){console.log("this is delivery"),this.city=e?.city?.id;let t=0;this.deliveryCities=e.deliveryPlaces.map((e=>(parseInt(e.id)>=t&&(t=parseInt(e.id)+1),{id:e.id,city_id:e.city_id,fee:parseInt(e.fee)}))),this.autoId=t}}})).catch(this.$handleApiError)},async getProducts(){return er.all().then((t=>{this.products=t.data.data.products,this.products.length>0?this.product=this.user.product_id:this.product=null,this.isProductsFetched=!0}),(t=>this.$handleApiError(t)))},async getCities(){return K.cities().then((t=>{console.log(t.data),this.cities=t.data.data}))}},async mounted(){0==this.roles.length?await this.getRoles():this.isRolesFetched=!0,Promise.allSettled([this.getRoles(),this.getProducts(),this.getCities(),this.getUser()]).then((()=>{this.selectedProducts.length==this.products.length&&(this.product=0,this.isMultipleProducts=!1),this.isFetched=!0}),(t=>this.$handleApiError(t)))}};const Rb=(0,d.Z)(Ib,[["render",Fb]]);var jb=Rb;const Nb=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add New Role "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new Role")],-1),Mb={key:0},Hb={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Yb={class:"md:tw-w-1/2 tw-w-full"},Zb=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Role Name",-1),Kb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},Bb={class:"mb-3 text-body-2 tw-text-zinc-700"},Qb={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},Gb={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},Jb=["onClick"],Xb={key:0},tk={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},ek=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),ak=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function rk(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[Nb,i.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Mb,[(0,s.Wm)(o)])),i.isFormReady?((0,s.wg)(),(0,s.iD)("div",Hb,[(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",Yb,[Zb,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",Kb,(0,Q.zw)(i.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(nr.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",Bb,[(0,s.Uk)(" Select Permissions: "),(0,s._)("div",Qb,(0,Q.zw)(i.formStatus.permissions.message),1)]),(0,s._)("div",Gb,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{onClick:e=>l.handleClick(t),class:(0,Q.C_)([{"!tw-bg-orange-500 !tw-text-white":i.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},[(0,s._)("span",null,(0,Q.zw)(t),1)],10,Jb)))),128))])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(nr.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[i.show?((0,s.wg)(),(0,s.iD)("div",Xb,(0,Q.zw)(i.selectedPermissions),1)):(0,s.kq)("",!0)])),_:1})])),_:1})]),(0,s._)("div",tk,[(0,s.Wm)(G.T,{link:"",to:"/",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[ek])),_:1}),(0,s.Wm)(G.T,{onClick:l.create,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[ak])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var sk={data(){return{localUrl:F,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0,K.createRole({name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_ADDED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles(),this.name="",this.selectedPermissions=[])})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let a in e.error)this.formStatus[a]={valid:!1,message:e.error[a][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.name,"Name"),this.formStatus.permissions=St(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRoles(){K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){0==this.roles.length?await this.getRoles():this.isFormReady=!0,this.permissions=this.$store.getters["user/permissions"]}};const ik=(0,d.Z)(sk,[["render",rk]]);var lk=ik;const ok={class:"mb-5 tw-flex tw-justify-between tw-items-center"},nk=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Roles List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage all Roles")],-1),dk={key:0},wk=(0,s._)("span",{class:"text-white"}," Add Role ",-1),ck={key:0},uk={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},pk={class:"mb-5 tw-flex"},mk={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},hk={class:""};function gk(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("RolesTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.roles.length},[(0,s._)("div",ok,[nk,t.$can("create_role")?((0,s.wg)(),(0,s.iD)("div",dk,[(0,s.Wm)(G.T,{color:"primary-color",link:"",to:{name:"user/addRole"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),wk])),_:1})])):(0,s.kq)("",!0)]),o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",ck,[(0,s.Wm)(n)])),o.fetched?((0,s.wg)(),(0,s.iD)("div",uk,[(0,s._)("div",pk,[(0,s.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",mk,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",hk,[(0,s.Wm)(d,{roles:o.filteredRoles,columns:l.columns},null,8,["roles","columns"])])])):(0,s.kq)("",!0)])}const fk={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},vk={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},yk={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},xk=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),_k={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},bk=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),kk={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Ck={class:"tw-px-6 tw-py-4 tw-uppercase"},Dk={class:"tw-px-6 tw-py-4"},Sk={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},zk={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},Uk={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},Lk=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),Pk=["value"],Ak={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},Wk={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},$k={class:"tw-text-white"};function Ek(t,e,a,i,l,o){const n=(0,s.up)("RolePermissions"),d=(0,s.up)("RoleActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",fk,[(0,s._)("table",vk,[(0,s._)("thead",yk,[(0,s._)("tr",null,[xk,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",_k,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[bk,(0,s._)("th",kk,(0,Q.zw)(t.id),1),(0,s._)("td",Ck,(0,Q.zw)(t.name),1),(0,s._)("td",Dk,[(0,s.Wm)(n,{role:t},null,8,["role"])]),(0,s._)("td",Sk,[(0,s.Wm)(d,{role:t},null,8,["role"])])])))),128))])])]),(0,s._)("div",zk,[(0,s._)("div",Uk,[Lk,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,Pk)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",Ak,[(0,s._)("div",Wk,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.roles.length:o.nextRange)+" of "+(0,Q.zw)(a.roles.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",$k,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const qk={key:0},Ok={class:"tw-flex tw-flex-wrap tw-gap-2"};function Tk(t,e,a,r,i,l){const o=(0,s.up)("popup");return["admin","agente","delivery"].includes(a.role.name)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",qk,[t.$can("update_role")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,to:"/users/roles/update/"+a.role.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("delete_role")&&"admin"!==a.role.name?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>i.showPopupDelete=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this Role?</p> You won't be able to revert this!",loading:i.isLoadingDelete,visible:i.showPopupDelete,onResolved:l.handleResolvedDelete},null,8,["loading","visible","onResolved"]),(0,s.Wm)(o,{noConfirm:!0,type:"info",title:"Permissions",loading:i.isLoadingShow,visible:i.showPopupShow,onResolved:l.handleResolvedShow},{default:(0,s.w5)((()=>[(0,s._)("div",Ok,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer",key:t},(0,Q.zw)(t),1)))),128))])])),_:1},8,["loading","visible","onResolved"])]))}var Vk={props:["rowIndex","prop","role"],name:"roleActions",data(){return{showPopupDelete:!1,showPopupShow:!1,isLoadingDelete:!1,isLoadingShow:!1,permissions:["create_user","delete_user","update_user","show_user"]}},methods:{handleResolvedDelete(t){t?(this.isLoadingDelete=!0,K.deleteRole(this.role.id).then((t=>{"ROLE_DELETED"==t.data.code&&(this.isLoadingDelete=!1,this.$alert({type:"success",title:"Role Deleted Successfully"})),K.roles().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("user/setRoles",t.data.data.roles)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoadingDelete=!1,this.showPopupDelete=!1}))):this.showPopupDelete=!1},handleResolvedShow(t){t?console.log(t):this.showPopupShow=!1}}};const Fk=(0,d.Z)(Vk,[["render",Tk]]);var Ik=Fk;const Rk={class:"tw-h-100 tw-flex tw-items-center tw-max-w-[750px] tw-flex-wrap tw-gap-2"},jk=["title"];function Nk(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",Rk,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-py-0 tw-px-2 tw-text-xs tw-h-5 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg",title:t.description,key:t.name},(0,Q.zw)(t.name),9,jk)))),128))])}var Mk={props:["role"],name:"rolePermissions",data(){return{}},computed:{permissions(){return this.role.permissions.map((t=>t))}}};const Hk=(0,d.Z)(Mk,[["render",Nk]]);var Yk=Hk,Zk={props:["columns","roles"],components:{RoleActions:Ik,RolePermissions:Yk},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.roles.length/this.paginationLimit)},items(){return this.roles.slice(this.prevRange,this.nextRange)}},methods:{}};const Kk=(0,d.Z)(Zk,[["render",Ek]]);var Bk=Kk,Qk={components:{RolesTable:Bk},data(){return{localUrl:F,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Role Name"},{prop:"permissions",name:"Permissions"},{name:"Acions",prop:"roles"}]}},computed:{roles(){return this.$store.getters["user/roles"]},fetched(){return this.$store.getters["user/fetchedRoles"]},filteredRoles(){return this.roles.filter((t=>{const e=t.permissions.map((t=>t.name));return!!(""===this.search||t.name.toLocaleLowerCase().includes(this.search.toLocaleLowerCase())||e.includes(this.search.toLocaleLowerCase())||e.some((t=>t.toLowerCase().includes(this.search.toLocaleLowerCase()))))}))}},methods:{getRoles(){return K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.$store.dispatch("user/setFetchedRoles",!0)}})).catch(this.$handleApiError)}},mounted(){this.rolesFetched||this.getRoles()}};const Gk=(0,d.Z)(Qk,[["render",gk]]);var Jk=Gk;const Xk=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Update Role "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update existing role")],-1),tC={key:0},eC={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},aC={class:"md:tw-w-1/2 tw-w-full"},rC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Role Name ",-1),sC={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},iC={class:"mb-3 text-body-2 tw-text-zinc-700"},lC={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-text-xs"},oC={class:"tw-flex tw-flex-wrap tw-gap-2 tw-mt-5"},nC=["onClick"],dC={key:0},wC={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},cC=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),uC=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function pC(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[Xk,i.isFormReady?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",tC,[(0,s.Wm)(o)])),i.isFormReady?((0,s.wg)(),(0,s.iD)("div",eC,[(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",md:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",aC,[rC,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,"hide-details":!0,onKeyup:e[0]||(e[0]=t=>l.resetError("firstname")),modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",sC,(0,Q.zw)(i.formStatus.name.message),1)])])),_:1}),(0,s.Wm)(nr.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",iC,[(0,s.Uk)(" Select Permissions: "),(0,s._)("div",lC,(0,Q.zw)(i.formStatus.permissions.message),1)]),(0,s._)("div",oC,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.permissions,(t=>((0,s.wg)(),(0,s.iD)("div",{onClick:e=>l.handleClick(t),class:(0,Q.C_)([{"!tw-bg-orange-500 !tw-text-white":i.selectedPermissions.includes(t)},"tw-py-1 tw-px-2 tw-bg-gray-900/10 tw-text-gray-900 tw-rounded-lg tw-cursor-pointer"]),key:t},(0,Q.zw)(t),11,nC)))),128))])])])),_:1})])),_:1})])),_:1}),(0,s.Wm)(nr.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[i.show?((0,s.wg)(),(0,s.iD)("div",dC,(0,Q.zw)(i.selectedPermissions),1)):(0,s.kq)("",!0)])),_:1})])),_:1})]),(0,s._)("div",wC,[(0,s.Wm)(G.T,{link:"",to:"/users/roles",color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[cC])),_:1}),(0,s.Wm)(G.T,{onClick:l.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[uC])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var mC={data(){return{localUrl:F,isFormReady:!1,isLoading:!1,show:!1,formStatus:{name:{valid:!0,message:""},permissions:{valid:!0,message:""}},name:"",permissions:[],selectedPermissions:[]}},computed:{roles(){return this.$store.getters["user/roles"]}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,K.updateRole(this.$route.params.id,{name:this.name,permissions:this.selectedPermissions}).then((t=>{"ROLE_UPDATED"===t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.getRoles())})).catch((t=>{this.$handleApiError(t);const e=t?.response?.data;if("VALIDATION_ERROR"==e?.code)for(let a in e.error)this.formStatus[a]={valid:!1,message:e.error[a][0]}})).finally((()=>{this.isLoading=!1}))},handleClick(t){this.selectedPermissions.includes(t)?this.selectedPermissions=this.selectedPermissions.filter((e=>e!==t)):this.selectedPermissions.push(t)},addPermissions(t){return t},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.name,"Name"),this.formStatus.permissions=St(this.selectedPermissions),this.formStatus.name.valid&&this.formStatus.permissions.valid},getRole(){K.getRole(this.$route.params.id).then((t=>{this.name=t.data.data.role,this.selectedPermissions=[...t.data.data.permission],this.isFormReady=!0}))},getRoles(){K.roles().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.roles;this.$store.dispatch("user/setRoles",e),this.isFormReady=!0}})).catch(this.$handleApiError)}},async mounted(){await this.getRole(),this.permissions=this.$store.getters["user/permissions"]}};const hC=(0,d.Z)(mC,[["render",pC]]);var gC=hC,fC={name:"users",path:"/users",component:sr,meta:{module:"user"},children:[{name:"user/list",path:"",component:y_,meta:{module:"user",subModule:"user/list",title:"Users List",gate:"show_all_users"}},{name:"user/add",path:"add",component:ib,meta:{module:"user",subModule:"user/add",title:"Add User",gate:"create_user"}},{name:"user/update",path:"update/:id",component:jb,meta:{module:"user",subModule:"user/update",title:"Update User",gate:"update_user"}},{name:"user/addRole",path:"addRole",component:lk,meta:{module:"user",subModule:"user/addRole",title:"Add Role",gate:"create_role"}},{name:"user/roles",path:"roles",component:Jk,meta:{module:"user",subModule:"user/roles",title:"Roles List",gate:"show_all_roles"}},{name:"user/updateRole",path:"roles/update/:id",component:gC,meta:{module:"user",subModule:"user/updateRole",title:"Update Role",gate:"view_role"}}]};const vC={class:"mb-5 tw-flex tw-justify-between tw-items-center"},yC=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Sales List "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your sales")],-1),xC={key:0},_C=(0,s._)("span",{class:"text-white"}," Add Sale ",-1),bC={key:0},kC={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},CC={class:"mb-5 tw-flex"},DC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},SC={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},zC={class:""};function UC(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("SalesAnalytics"),w=(0,s.up)("IndexFilter"),c=(0,s.up)("SalesTable"),u=(0,s.up)("AddSale"),p=(0,s.up)("NewAddSale");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",vC,[yC,t.$can("create_sale")&&o.fetched?((0,s.wg)(),(0,s.iD)("div",xC,[(0,s.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),_C])),_:1})])):(0,s.kq)("",!0)]),o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",bC,[(0,s.Wm)(n)])),o.fetched?((0,s.wg)(),(0,s.iD)("div",kC,[(0,s.Wm)(d,{sales:o.sales},null,8,["sales"]),(0,s._)("div",CC,[(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",DC,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[r.nr,l.search]])]),(0,s._)("div",SC,[(0,s.Wm)(X.t,{class:"tw-text-gray-500",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pound")])),_:1}),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[r.nr,l.searchId]])]),(0,s.Wm)(ea.C),(0,s.Wm)(G.T,{onClick:o.handleReset,icon:"",rounded:"lg",variant:"flat",size:"small",disabled:l.isButtonDisabled,loading:l.isLoadingReset,color:"red",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",icon:"mdi-restart-alert",size:"xx-large"})])),_:1},8,["onClick","disabled","loading"]),(0,s.Wm)(G.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,s.Wm)(w,{sales:o.sales,search:l.search,"search-id":l.searchId,filtered:l.filteredSales,"onUpdate:filtered":e[4]||(e[4]=t=>l.filteredSales=t),selected:o.selectedSales},null,8,["sales","search","search-id","filtered","selected"])],2),(0,s._)("div",zC,[((0,s.wg)(),(0,s.j4)(c,{onSelected:o.handleSelected,"selected-reset":l.selected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","selected-reset","sales"]))]),(0,s.Wm)(u,{onCancel:e[5]||(e[5]=t=>l.showPopup=!1),visible:!1}),(0,s.Wm)(p,{onCancel:e[6]||(e[6]=t=>l.showPopup=!1),visible:l.showPopup,"onUpdate:visible":e[7]||(e[7]=t=>l.showPopup=t)},null,8,["visible"])])):(0,s.kq)("",!0)])}const LC={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},PC={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},AC=(0,s._)("h1",{class:"tw-text-lg"},"Create Order",-1),WC={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},$C={class:"md:tw-col-span-6 tw-col-span-12"},EC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),qC={class:"md:tw-col-span-6 tw-col-span-12"},OC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),TC={class:"md:tw-col-span-6 tw-col-span-12"},VC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),FC=["value"],IC={class:"md:tw-col-span-6 tw-col-span-12"},RC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),jC={class:"md:tw-col-span-12 tw-col-span-12"},NC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Price",-1),MC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},HC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse",-1),YC=(0,s._)("option",{value:0}," Select ",-1),ZC=["value"],KC={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},BC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product",-1),QC=(0,s._)("option",{value:0}," Select ",-1),GC=["value"],JC={class:"md:tw-col-span-6 tw-col-span-12"},XC=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variations",-1),tD=(0,s._)("option",{value:0}," Select ",-1),eD=["value"],aD={class:"md:tw-col-span-6 tw-col-span-12"},rD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),sD={class:"md:tw-col-span-6 tw-col-span-12"},iD={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},lD={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},oD=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),nD={class:"tw-flex tw-flex-col tw-justify-center"},dD={class:"md:tw-col-span-6 tw-col-span-12"},wD={key:0,class:"md:tw-col-span-12 tw-col-span-12"},cD={class:"tw-max-w-full tw-overflow-auto"},uD={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},pD={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},mD={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},hD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},gD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},fD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},vD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},yD={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},xD={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},_D=(0,s._)("span",{class:"text-white"}," Cancel ",-1),bD=(0,s._)("span",{class:"text-white"}," Save ",-1);function kD(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(d,{onCancel:e[12]||(e[12]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,s.w5)((()=>[l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",LC,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",PC,[AC,(0,s._)("div",WC,[(0,s._)("div",$C,[EC,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.fullname]])]),(0,s._)("div",qC,[OC,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.phone]])]),(0,s._)("div",TC,[VC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,FC)))),128))],512),[[r.bM,l.sale.city]])]),(0,s._)("div",IC,[RC,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.adresse]])]),(0,s._)("div",jC,[NC,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=t=>l.sale.price=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.price]])]),(0,s._)("div",MC,[HC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.warehouse_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[YC,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.warehouses,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,ZC)))),128))],512),[[r.bM,l.warehouse_id]])]),(0,s._)("div",KC,[BC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.product_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[QC,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,GC)))),128))],512),[[r.bM,l.product_id]])]),(0,s._)("div",JC,[XC,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.product_variation_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[tD,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),9,eD)))),128))],512),[[r.bM,l.product_variation_id]])]),(0,s._)("div",aD,[rD,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=t=>l.quantity=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.quantity]])]),(0,s._)("div",sD,[(0,s._)("div",iD,[(0,s._)("label",lD,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[r.e8,l.sale.counts_from_warehouse]]),oD]),(0,s._)("label",nD,[(0,s._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),(0,s._)("div",dD,[(0,s._)("button",{onClick:e[10]||(e[10]=(...t)=>o.addItem&&o.addItem(...t)),class:"tw-block tw-ml-auto tw-py-1 tw-px-4 tw-rounded tw-bg-emerald-500 tw-text-white"}," Add ")]),l.items.length?((0,s.wg)(),(0,s.iD)("div",wD,[(0,s._)("div",cD,[(0,s._)("table",uD,[(0,s._)("thead",pD,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","variation","quantity","warehouse","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",mD,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("th",hD,(0,Q.zw)(t.product.name),1),(0,s._)("th",gD,(0,Q.zw)(t.product_variation.size)+" / "+(0,Q.zw)(t.product_variation.color),1),(0,s._)("th",fD,(0,Q.zw)(t.quantity),1),(0,s._)("th",vD,(0,Q.zw)(t.product_variation.warehouse.name),1),(0,s._)("th",yD,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])):(0,s.kq)("",!0)]),(0,s._)("div",xD,[(0,s.Wm)(G.T,{onClick:e[11]||(e[11]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[_D])),_:1}),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[bD])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var CD={props:["visible"],data(){return{isLoading:!1,isLoaded:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],sale:{fullname:"",phone:"",city:"",adresse:"",price:0,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0}},computed:{products(){return this.$store.getters["product/products"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return 0==this.warehouse_id?[]:this.products.filter((t=>t.variations.some((t=>t.warehouse_id==this.warehouse_id))))},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,orderItems:this.items,counts_from_warehouse:!0};Fa.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sale created successfully"}),this.$store.dispatch("sale/add",t.data.data.sale))}),this.$handleApiError).finally((()=>this.isLoading=!1))},deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},addItem(){if([this.warehouse_id,this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:0};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.item_id+=1},getProducts(){er.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("product/setProducts",t.data.data.products)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}},mounted(){this.getProducts(),this.sale.city=this.cities[0].name||1}};const DD=(0,d.Z)(CD,[["render",kD]]);var SD=DD;const zD={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},UD={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},LD=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),PD={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},AD={class:"md:tw-col-span-6 tw-col-span-12"},WD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),$D={class:"md:tw-col-span-6 tw-col-span-12"},ED=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),qD={class:"md:tw-col-span-6 tw-col-span-12"},OD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),TD=["value"],VD=["value"],FD={class:"md:tw-col-span-6 tw-col-span-12"},ID=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),RD={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},jD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),ND={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},MD={class:"tw-col-span-12"},HD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),YD={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},ZD={class:"tw-col-span-12 md:tw-col-span-4"},KD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),BD={class:"tw-col-span-12 md:tw-col-span-8"},QD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),GD={class:"md:tw-col-span-6 tw-col-span-12"},JD=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),XD={class:"md:tw-col-span-6 tw-col-span-12"},tS=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),eS=["value"],aS={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},rS={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},sS={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},iS=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),lS={class:"tw-flex tw-flex-col tw-justify-center"},oS=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),nS={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},dS={key:2,class:"md:tw-col-span-12 tw-col-span-12"},wS={class:"tw-max-w-full tw-overflow-auto"},cS={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},uS={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},pS={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},mS=["src"],hS={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},gS=["onUpdate:modelValue"],fS=(0,s._)("option",{value:0},"Select",-1),vS=["value"],yS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},xS=["disabled","onUpdate:modelValue"],_S=(0,s._)("option",{value:0},"Select",-1),bS=["value"],kS={key:0},CS={key:1},DS={key:2},SS={key:3},zS=["value"],US={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},LS={class:"md:tw-col-span-6 tw-col-span-12"},PS=["onUpdate:modelValue"],AS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},WS={key:0},$S={key:1,class:"md:tw-col-span-6 tw-col-span-12"},ES=["onUpdate:modelValue"],qS={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},OS={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},TS=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),VS={class:"md:tw-col-span-12 tw-col-span-12"},FS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},IS=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),RS={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},jS=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),NS={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},MS=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),HS={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},YS=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),ZS={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},KS={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},BS=(0,s._)("span",{class:"text-white"}," Cancel ",-1),QS=(0,s._)("span",{class:"text-white"}," Create ",-1);function GS(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,s.w5)((()=>[o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",zD,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",UD,[LD,(0,s._)("div",PD,[(0,s._)("div",AD,[WD,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.fullname]])]),(0,s._)("div",$D,[ED,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.phone]])]),(0,s._)("div",qD,[OD,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,TD),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,VD)))),128))],512),[[r.bM,l.sale.city]])]),(0,s._)("div",FD,[ID,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.adresse]])]),(0,s._)("div",RD,[jD,(0,s.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",ND,[(0,s._)("div",MD,[HD,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[r.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",YD,[(0,s._)("div",ZD,[KD,(0,s._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",BD,[QD,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[r.nr,l.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",GD,[JD,(0,s.Wm)(w,{"product-ids":o.product_ids,items:l.items,"onUpdate:items":e[8]||(e[8]=t=>l.items=t),order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",XD,[tS,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,eS)))),128))],512),[[r.bM,l.sale.upsell]])]),(0,s.kq)("",!0),(0,s._)("div",aS,[(0,s._)("div",rS,[(0,s._)("label",sS,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[r.e8,l.sale.counts_from_warehouse]]),iS]),(0,s._)("label",lS,[(0,s._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),oS,l.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",nS," No Order items ")),l.items.length?((0,s.wg)(),(0,s.iD)("div",dS,[(0,s._)("div",wS,[((0,s.wg)(),(0,s.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",cS,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",uS,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",pS,[o.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,mS)):(0,s.kq)("",!0)])])),(0,s._)("th",hS,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[fS,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,vS)))),128))],8,gS),[[r.bM,t.product.id]])])])]),(0,s._)("th",yS,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[_S,o.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(o.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",CS,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",DS,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",SS,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",kS,"-"))],8,bS)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,zS))],8,xS)),[[r.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",US,[(0,s._)("div",LS,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,PS),[[r.nr,t.quantity]])])]),(0,s._)("th",AS,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",WS," - ")):((0,s.wg)(),(0,s.iD)("div",$S,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,ES),[[r.nr,t.price]])]))])]),(0,s._)("th",qS,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",OS,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),TS])),_:1},8,["onClick"])])]),(0,s._)("div",VS,[(0,s.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,s._)("div",FS,[IS,(0,s._)("div",RS,[jS,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.price]])])]),(0,s._)("div",NS,[MS,(0,s._)("div",HS,[YS,(0,s._)("div",ZS,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,s._)("div",KS,[(0,s.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[BS])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[QS])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var JS={components:{AddOrderConfirmation:Ic,AddOrderAffectation:Kc,ProductOffers:wu},props:["visible","order"],data(){return{upsells:Kn,serverUrl:I,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,r)=>{if(0==a.product.id)return a;const s=this.getVariations(a.product)?.variations;return e[r]==t[a]||s.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==s?.length&&(a.product_variation=s[0],a.product_variation_id=s[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},create(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,Fa.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"New Order Added"}),this.$store.dispatch("sale/add",t.data.data.sale),this.$emit("update:visible",!1))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const a=this.products.find((e=>e.id==t));if(!a)return{exists:!1};let r=a.variations.find((t=>t.id==e));return r||(r=a.variations.length>0?a.variations[0]:null),{exists:!0,variation:r}},getProducts(){return er.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){}};const XS=(0,d.Z)(JS,[["render",GS]]);var tz=XS;const ez={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},az={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},rz={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},sz={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},iz={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},lz={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},oz={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},nz={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},dz={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"};function wz(t,e,a,r,i,l){const o=(0,s.up)("DateFilter"),n=(0,s.up)("UpsellFilter"),d=(0,s.up)("ConfirmationFilter"),w=(0,s.up)("AffectationFilter"),c=(0,s.up)("AgenteFilter"),u=(0,s.up)("DeliveryFilter"),p=(0,s.up)("ProductFilter"),m=(0,s.up)("ExcelExport");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ez,[(0,s._)("div",az,[(0,s.Wm)(o,{filter:i.config.dateFilter,"onUpdate:filter":e[0]||(e[0]=t=>i.config.dateFilter=t)},null,8,["filter"])]),(0,s._)("div",rz,[(0,s.Wm)(n,{filter:i.config.upsellFilter,"onUpdate:filter":e[1]||(e[1]=t=>i.config.upsellFilter=t)},null,8,["filter"])]),(0,s._)("div",sz,[(0,s.Wm)(d,{filter:i.config.confirmationFilter,"onUpdate:filter":e[2]||(e[2]=t=>i.config.confirmationFilter=t)},null,8,["filter"])]),(0,s._)("div",iz,[(0,s.Wm)(w,{filter:i.config.affectationFilter,"onUpdate:filter":e[3]||(e[3]=t=>i.config.affectationFilter=t)},null,8,["filter"])]),(0,s._)("div",lz,[(0,s.Wm)(c,{filter:i.config.agenteFilter,"onUpdate:filter":e[4]||(e[4]=t=>i.config.agenteFilter=t)},null,8,["filter"])]),(0,s._)("div",oz,[(0,s.Wm)(u,{filter:i.config.deliveryFilter,"onUpdate:filter":e[5]||(e[5]=t=>i.config.deliveryFilter=t)},null,8,["filter"])]),(0,s._)("div",nz,[(0,s.Wm)(p,{filter:i.config.productFilter,"onUpdate:filter":e[6]||(e[6]=t=>i.config.productFilter=t)},null,8,["filter"])]),(0,s._)("div",dz,[(0,s.Wm)(m,{selected:a.selected,filtered:a.filtered,sales:a.sales},null,8,["selected","filtered","sales"])])])])}const cz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),uz=["onClick"];function pz(t,e,a,r,i,l){const o=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[cz,(0,s.Wm)(o,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),l.onDateRangePicked],onCleared:l.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:a})=>[(0,s._)("span",{onClick:t=>a(e)},(0,Q.zw)(t),9,uz)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var mz={data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Wi.Z)(new Date,1),(0,Wi.Z)(new Date,1)]},{label:"This month",range:[(0,$i.Z)(new Date),(0,Ei.Z)(new Date)]},{label:"Last month",range:[(0,$i.Z)((0,qi.Z)(new Date,1)),(0,Ei.Z)((0,qi.Z)(new Date,1))]},{label:"This year",range:[(0,Oi.Z)(new Date),(0,Ti.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const hz=(0,d.Z)(mz,[["render",pz]]);var gz=hz;const fz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),vz={class:"tw-relative"},yz=(0,s._)("option",{value:"all"},"Select",-1),xz=(0,s._)("option",{value:"oui"},"Oui",-1),_z=(0,s._)("option",{value:"non"},"Non",-1),bz=[yz,xz,_z];function kz(t,e,a,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[fz,(0,s._)("div",vz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},bz,512),[[r.bM,l.value]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var Cz={data(){return{value:"all"}},watch:{value(t){this.$emit("update:filter",t)}}};const Dz=(0,d.Z)(Cz,[["render",kz]]);var Sz=Dz;const zz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),Uz={class:"tw-relative"},Lz=["value"];function Pz(t,e,a,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[zz,(0,s._)("div",Uz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryStatus,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value?t.value:"all",key:t.id},(0,Q.zw)(t.value?t.name:"Select"),9,Lz)))),128))],512),[[r.bM,l.deliveryFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var Az={props:["filter"],data(){return{deliveryFilter:"all",deliveryStatus:Bn}},watch:{deliveryFilter(t){this.$emit("update:filter",t)}}};const Wz=(0,d.Z)(Az,[["render",Pz]]);var $z=Wz;const Ez=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),qz={class:"tw-relative"},Oz=(0,s._)("option",{value:"all"}," Select ",-1),Tz=["value"];function Vz(t,e,a,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[Ez,(0,s._)("div",qz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Oz,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value},(0,Q.zw)(t.name),9,Tz)))),128))],512),[[r.bM,l.confirmationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var Fz={props:["filter"],data(){return{confirmationFilter:"all",confirmations:Yn}},watch:{confirmationFilter(t){this.$emit("update:filter",t)}}};const Iz=(0,d.Z)(Fz,[["render",Vz]]);var Rz=Iz;const jz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affect",-1),Nz={class:"tw-relative"},Mz=(0,s._)("option",{value:"all"},"Select",-1),Hz=(0,s._)("option",{value:null},"Without delivery",-1),Yz=["value"];function Zz(t,e,a,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[jz,(0,s._)("div",Nz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Mz,Hz,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Yz)))),128))],512),[[r.bM,l.affectationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var Kz={props:["filter"],data(){return{affectationFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))}},watch:{affectationFilter(t){this.$emit("update:filter",t)}}};const Bz=(0,d.Z)(Kz,[["render",Zz]]);var Qz=Bz;const Gz=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Agente",-1),Jz={class:"tw-relative"},Xz=(0,s._)("option",{value:"all"},"Select",-1),tU=(0,s._)("option",{value:null},"Without agente",-1),eU=["value"];function aU(t,e,a,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[Gz,(0,s._)("div",Jz,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.agenteFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[Xz,tU,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.agentes,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,eU)))),128))],512),[[r.bM,l.agenteFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])}var rU={props:["filter"],data(){return{agenteFilter:"all"}},computed:{users(){return this.$store.getters["user/users"]},agentes(){return this.users.filter((t=>2==t.role.id))}},watch:{agenteFilter(t){this.$emit("update:filter",t)}}};const sU=(0,d.Z)(rU,[["render",aU]]);var iU=sU;const lU=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Product",-1),oU={key:0},nU={key:1,class:"tw-relative"},dU=(0,s._)("option",{value:"all"},"Select",-1),wU=["value"];function cU(t,e,a,i,l,o){return(0,s.wg)(),(0,s.iD)("div",null,[lU,o.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",oU,[(0,s._)("div",null,[(0,s.Wm)(X.t,{class:"tw-text-orange-500 tw-animate-spin tw-text-lg tw-"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})])])),o.fetched?((0,s.wg)(),(0,s.iD)("div",nU,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.productFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[dU,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,wU)))),128))],512),[[r.bM,l.productFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])):(0,s.kq)("",!0)])}var uU={props:["filter"],data(){return{productFilter:"all"}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}},watch:{productFilter(t){this.$emit("update:filter",t)}},methods:{getProducts(){er.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.fetched||this.getProducts(),console.log(this.products)}};const pU=(0,d.Z)(uU,[["render",cU]]);var mU=pU;function hU(t,e,a,{confirmationFilter:r,affectationFilter:s,upsellFilter:i,deliveryFilter:l,agenteFilter:o,dateFilter:n,productFilter:d}){const w=n[0],c=n[1];return t.filter((t=>{const n=new Date(t.created_at);if(""!=a&&a!=t.id)return!1;if("all"!==r&&t.confirmation!==r)return!1;if("all"!==s&&t.affectation!=s)return!1;if("all"!==i&&t.upsell!=i)return!1;if("all"!==l&&t.delivery!=l)return!1;if("all"!==o&&t.agente_id!=o)return!1;const u=((t,e)=>{for(const a in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(t,e);if(!u)return!1;if("all"!==d&&!t.items.some((t=>t.product_id==d)))return!1;const p=n.getDate(),m=n.getMonth(),h=n.getFullYear();if(w){const t=w.getDate(),e=w.getMonth(),a=w.getFullYear();if(h<a||h===a&&m<e||h===a&&m===e&&p<t)return!1}if(c){const t=c.getDate(),e=c.getMonth(),a=c.getFullYear();if(h>a||h===a&&m>e||h===a&&m===e&&p>t)return!1}return!0}))}function gU(t){return{id:1,title:"New",value:t.filter((t=>!t.confirmation||"new"==t.confirmation)).length,pourcentage:(100*t.filter((t=>!t.confirmation||"new"==t.confirmation)).length/t.length).toFixed(2),color:"primary-green",icon:"mdi mdi-new-box"}}function fU(t){return{id:3,title:"Confirmed",value:t.filter((t=>"confirmer"==t.confirmation)).length,pourcentage:(100*t.filter((t=>"confirmer"==t.confirmation)).length/t.length).toFixed(2),color:"deep-purple-accent-2",icon:"mdi-phone-check"}}function vU(t){return{id:4,title:"Delivered",value:t.filter((t=>"livrer"==t.delivery)).length,pourcentage:(100*t.filter((t=>"livrer"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"primary-blue",icon:"mdi-account-check-outline"}}function yU(t){return{id:5,title:"Shipped",value:t.filter((t=>"expidier"==t.delivery)).length,pourcentage:(100*t.filter((t=>"expidier"==t.delivery)).length/t.filter((t=>"confirmer"==t.confirmation)).length).toFixed(2),color:"red",icon:"mdi-truck"}}const xU=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Export",-1),_U={class:"tw-relative tw-flex tw-items-center tw-gap-2 tw-justify-between"},bU={class:"tw-relative tw-w-full"},kU=(0,s._)("option",{value:"all"},"All Sales",-1),CU=(0,s._)("option",{value:"selected"},"Selected Sales",-1),DU=(0,s._)("option",{value:"filtered"},"Filtered Sales",-1),SU=[kU,CU,DU];function zU(t,e,a,i,l,o){const n=(0,s.up)("download-csv");return(0,s.wg)(),(0,s.iD)("div",null,[xU,(0,s._)("div",_U,[(0,s._)("div",bU,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.selection=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},SU,512),[[r.bM,l.selection]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})]),(0,s.Wm)(n,{delimiter:";",data:o.toImport},{default:(0,s.w5)((()=>[(0,s.Wm)(G.T,{onClick:o.handleImport,icon:"",rounded:"lg",variant:"flat",size:"x-small",color:"green",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",icon:"mdi-download",size:"x-large"})])),_:1},8,["onClick"])])),_:1},8,["data"])])])}var UU={props:["selected","filtered","sales"],data(){return{selection:"all"}},computed:{toImport(){const t=this.data.map((t=>({...t}))),e=t.map((t=>{const e=Object.keys(t);return e.forEach((e=>{t[e]=t[e]?t[e]:"NONE"})),t})),a=",",r=e.map((t=>(delete t["factorisation_id"],delete t["note_d"],delete t["cmd"],delete t["product_name"],delete t["is_done"],delete t["factorisation"],delete t["doubles"],delete t["is_double"],delete t["has_doubles"],delete t["double"],{...t,products:t.items.map((t=>`id=${t.id}${a}price=${t.price?t.price:0}${a}name=${t.product?.name}${a}ref=${t.product?.ref}${a}variation_id=${t.product_variation_id}${a}size=${t.product_variation.size?t.product_variation.size:"DEFAULT"}${a}color=${t.product_variation.color?t.product_variation.color:"DEFAULT"}${a}`))})));return r.map((t=>(delete t["items"],t)))},data(){switch(this.selection){case"selected":return this.selected;case"filtered":return this.filtered;default:return this.sales}}},methods:{handleImport(){0==this.data.length&&this.$alert({title:"No Data To Export",type:"warning"})}}};const LU=(0,d.Z)(UU,[["render",zU]]);var PU=LU,AU={components:{DateFilter:gz,UpsellFilter:Sz,DeliveryFilter:$z,ConfirmationFilter:Rz,AffectationFilter:Qz,AgenteFilter:iU,ProductFilter:mU,ExcelExport:PU},props:["sales","filtered","search","searchId","selected"],data(){return{config:{confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",deliveryFilter:"all",agenteFilter:"all",productFilter:"all",dateFilter:[null,null]}}},computed:{results(){return hU(this.sales,this.search,this.searchId,this.config)}},watch:{results(t){this.$emit("update:filtered",t)}},mounted(){this.$emit("update:filtered",this.sales)}};const WU=(0,d.Z)(AU,[["render",wz]]);var $U=WU;const EU={class:"mb-5 tw-border-b tw-border-solid tw-pb-5 tw-border-neutral-200"},qU={class:"tw-grid tw-grid-cols-4 lg:tw-grid-cols-4 tw-gap-2"},OU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},TU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},VU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-2"},FU={class:"lg:tw-col-span-1 md:tw-col-span-4 tw-col-span-4"};function IU(t,e,a,r,i,l){const o=(0,s.up)("DashItem");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",EU,[(0,s._)("div",qU,[(0,s._)("div",OU,[(0,s.Wm)(o,{dash:l.newSales},null,8,["dash"])]),(0,s._)("div",TU,[(0,s.Wm)(o,{dash:l.confirmedSales},null,8,["dash"])]),(0,s._)("div",VU,[(0,s.Wm)(o,{dash:l.deliveredSales},null,8,["dash"])]),(0,s._)("div",FU,[(0,s.Wm)(o,{dash:l.shippedSales},null,8,["dash"])])])])])}const RU={class:"tw-flex tw-justify-between tw-items-center tw-w-full tw-h-full pa-3 px-4"},jU={class:"tw-flex tw-flex-col tw-justify-center tw-w-full tw-h-full tw-text-white"},NU={class:"tw-text-xl tw-font-bold"},MU={class:"tw-flex tw-items-center tw-gap-1 tw-w-full tw-h-full tw-text-white"},HU={class:"tw-text-sm"},YU={class:"rounded-circle tw-w-fit tw-mr-3"};function ZU(t,e,a,r,i,l){const o=(0,s.up)("number");return(0,s.wg)(),(0,s.j4)(br.C,{class:"tw-rounded-lg",color:a.dash.color,height:"70"},{default:(0,s.w5)((()=>[(0,s._)("div",RU,[(0,s._)("div",jU,[(0,s._)("p",NU,(0,Q.zw)(isNaN(a.dash.pourcentage)?"0.00":a.dash.pourcentage)+" "+(0,Q.zw)(a.symbol),1),(0,s._)("span",MU,[a.numbers?((0,s.wg)(),(0,s.j4)(o,{key:0,class:"tw-font-bold",ref:"number1",from:0,to:a.dash.value,duration:1,delay:0,easing:"Power.easeOut"},null,8,["to"])):(0,s.kq)("",!0),(0,s._)("p",HU,(0,Q.zw)(a.dash.title),1)])]),(0,s._)("div",YU,[(0,s.Wm)(X.t,{color:"white",size:"large",class:"md:tw-scale-[1.8] tw-scale-[1.3]",icon:a.dash.icon},null,8,["icon"])])])])),_:1},8,["color"])}var KU={props:{dash:{required:!0},symbol:{required:!1,default:"%"},numbers:{required:!1,default:!0}}};const BU=(0,d.Z)(KU,[["render",ZU]]);var QU=BU,GU={components:{DashItem:QU},props:["sales"],computed:{newSales(){return gU(this.sales)},confirmedSales(){return fU(this.sales)},deliveredSales(){return vU(this.sales)},shippedSales(){return yU(this.sales)}}};const JU=(0,d.Z)(GU,[["render",IU]]);var XU=JU,tL={components:{SalesTable:yu,AddSale:SD,SalesAnalytics:XU,IndexFilter:$U,NewAddSale:tz},data(){return{localUrl:F,isLoaded:!1,isLoadingReset:!1,showFilters:!1,isButtonDisabled:!0,filteredSales:[],search:"",searchId:"",selected:[],showPopup:!1}},computed:{fetched(){return this.$store.getters["sale/fetched"]},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"]},cities(){return this.$store.getters["city/cities"]},selectedSales(){return this.sales.filter((t=>this.selected.includes(t.id)))}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await K.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await K.all().then((t=>{this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0)}})).catch(this.$handleApiError)},getProducts(){return er.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))},getCities(){if(0==this.cities.length)return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))},handleReset(){this.isLoadingReset=!0,0!=this.selected.length&&Fa.resetSale(this.selected).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("sale/resetSales",this.selected),this.selected=[])})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoadingReset=!1))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.fetched&&(this.isLoaded=!0),this.fetched&&(this.getProducts(),this.getCities())}};const eL=(0,d.Z)(tL,[["render",UC]]);var aL=eL;const rL=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Expidation ")])],-1),sL={key:0},iL={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},lL={class:"mb-5 tw-flex"},oL={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},nL={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},dL={class:""};function wL(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("IndexFilter"),w=(0,s.up)("SalesTable"),c=(0,s.up)("AddSale"),u=(0,s.up)("AddTicket");return(0,s.wg)(),(0,s.iD)("div",null,[rL,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",sL,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",iL,[(0,s._)("div",lL,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",oL,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[r.nr,l.search]])]),(0,s._)("div",nL,[(0,s.Wm)(X.t,{class:"tw-text-gray-500",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pound")])),_:1}),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[r.nr,l.searchId]])]),(0,s.Wm)(ea.C),t.$can("handle_expidation")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[3]||(e[3]=t=>l.showPopupTicket=!0),disabled:l.isButtonDisabled,icon:"",rounded:"lg",variant:"flat",size:"small",color:"green",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",icon:"mdi-ticket-confirmation-outline",size:"xx-large"})])),_:1},8,["disabled"])):(0,s.kq)("",!0),(0,s.Wm)(G.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,s.Wm)(d,{sales:o.sales,search:l.search,"search-id":l.searchId,filtered:l.filteredSales,"onUpdate:filtered":e[4]||(e[4]=t=>l.filteredSales=t)},null,8,["sales","search","search-id","filtered"])],2),(0,s._)("div",dL,[((0,s.wg)(),(0,s.j4)(w,{onSelected:o.handleSelected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","sales"]))]),(0,s.Wm)(c,{onCancel:e[5]||(e[5]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"]),(0,s.Wm)(u,{orders:o.selectedOrders,onCancel:e[6]||(e[6]=t=>l.showPopupTicket=!1),visible:l.showPopupTicket},null,8,["orders","visible"])])):(0,s.kq)("",!0)])}const cL={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},uL={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},pL=(0,s._)("h1",{class:"tw-font-bold"},"Choose Ticket Size",-1),mL={class:"tw-grid mt-5"},hL=(0,s._)("img",{src:"",id:"image"},null,-1),gL=(0,s._)("canvas",{id:"qr-canvas"},null,-1);function fL(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[0]||(e[0]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,s.w5)((()=>[i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",cL,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",uL,[pL,(0,s._)("div",mL,[(0,s.Wm)(G.T,{onClick:l.downloadPDF},{default:(0,s.w5)((()=>[(0,s.Uk)("Imprimer")])),_:1},8,["onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"]),hL,gL])}var vL=a(8914),yL=a(3579),xL=a.n(yL),_L=a(8385),bL={props:["visible","orders"],data(){return{localUrl:F,isLoading:!1,isLoaded:!0}},computed:{},methods:{async addOrderPage(t,e){const a=new Date;let r=a.getDate(),s=a.getMonth()+1,i=a.getFullYear();t.rect(1,1,98,148,"S"),t.setFontSize(12),t.setTextColor("orange"),t.text("Vldo",3,7),t.line(1,10,99,10);const l=e.items.map((t=>`${t.product.name}|${t.product_variation.color}|${t.product_variation.size} x ${t.quantity}`));xL()(t,{theme:"grid",startY:12,margin:{horizontal:3,vertical:0},body:[["Nom Complete: ",e.fullname],["Tlephone: ",e.phone],["Adresse: ",e.adresse],["Ville: ",e.city],["Date d'envoi: ",`${r}-${s}-${i}`],["Marchandise: ",l.join("\n")]],styles:{halign:"left",lineColor:"black",textColor:"black"},columnStyles:{0:{fontStyle:"bold",font:"Cairo",valign:"middle",fontSize:8,cellWidth:24},1:{font:"Cairo",valign:"middle",cellPadding:{vertical:1,horizontal:2}}}}),t.line(1,73,99,73),t.setFont("helvetica","bold"),t.setTextColor("black"),t.setFontSize(16),t.text(`CRBT: ${Mi(e)} ${R}`,29,80),t.line(1,83,99,83),t.setFontSize(8),t.setFont("helvetica","normal"),t.text("Vous remercier pour votre confiance, pour plus d'informaion",12,90),t.text("veuillez nous appeler sur :",32,95),t.setFont("helvetica","bold"),t.setFontSize(16),t.text("0612345678",32,105),t.line(1,115,99,115)},async downloadPDF(){var t=new vL["default"]({orientation:"p",unit:"mm",format:[100,150],putOnlyUsedFonts:!0});t.addFont(this.localUrl+"assets/fonts/Cairo-Regular.ttf","Cairo","normal"),t.addFont(this.localUrl+"assets/fonts/Cairo-Bold.ttf","Cairo","bold");for(let e=0;e<this.orders.length;e++){const a=this.orders[e];e>0&&t.addPage(),this.addOrderPage(t,a);const r=await new Promise(((t,e)=>{_L.toDataURL(I+"api/sales/scan/"+a.id,{margin:0},(function(a,r){a&&e(a),t(r)}))})),s=new Image;s.src=r,await new Promise((a=>{s.onload=()=>{t.addImage(s,68,118,28,28,"a"+e,"SLOW"),a()}}))}t.save("order_tickets.pdf")}},mounted(){}};const kL=(0,d.Z)(bL,[["render",fL]]);var CL=kL,DL={components:{SalesTable:yu,AddSale:SD,AddTicket:CL,IndexFilter:$U},data(){return{localUrl:F,confirmations:Yn,deliveryStatus:Bn,isLoaded:!1,showFilters:!1,search:"",searchId:"",isButtonDisabled:!0,filteredSales:[],selected:[],showPopup:!1,showPopupTicket:!1}},computed:{selectedOrders(){return this.sales.filter((t=>this.selected.includes(t.id)))},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"].filter((t=>"dispatch"==t.delivery))},cities(){return this.$store.getters["city/cities"]}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await K.all().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return this.isLoaded=!1,Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)},getCities(){if(0==this.cities.length)return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.$store.getters["sale/fetched"]?this.isLoaded=!0:this.getSales(),this.getCities()}};const SL=(0,d.Z)(DL,[["render",wL]]);var zL=SL;const UL=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Expidation ")])],-1),LL={key:0},PL={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},AL={class:"mb-5 tw-flex"},WL={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},$L={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},EL={class:""};function qL(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("IndexFilter"),w=(0,s.up)("SalesTable"),c=(0,s.up)("AddSale"),u=(0,s.up)("AddTicket");return(0,s.wg)(),(0,s.iD)("div",null,[UL,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",LL,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",PL,[(0,s._)("div",AL,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",WL,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by client, phone..."},null,512),[[r.nr,l.search]])]),(0,s._)("div",$L,[(0,s.Wm)(X.t,{class:"tw-text-gray-500",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pound")])),_:1}),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.searchId=t),type:"number",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search By ID"},null,512),[[r.nr,l.searchId]])]),(0,s.Wm)(ea.C),(0,s.Wm)(G.T,{onClick:o.getSales,icon:"",rounded:"lg",variant:"flat",size:"small",color:"blue",class:"text-white tw-mr-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",icon:"mdi-autorenew",size:"xx-large"})])),_:1},8,["onClick"])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[1000px] !tw-overflow-visible":l.showFilters}])},[(0,s.Wm)(d,{sales:o.sales,search:l.search,"search-id":l.searchId,filtered:l.filteredSales,"onUpdate:filtered":e[3]||(e[3]=t=>l.filteredSales=t)},null,8,["sales","search","search-id","filtered"])],2),(0,s._)("div",EL,[((0,s.wg)(),(0,s.j4)(w,{onSelected:o.handleSelected,key:l.filteredSales.length,sales:l.filteredSales},null,8,["onSelected","sales"]))]),(0,s.Wm)(c,{onCancel:e[4]||(e[4]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"]),(0,s.Wm)(u,{orders:o.selectedOrders,onCancel:e[5]||(e[5]=t=>l.showPopupTicket=!1),visible:l.showPopupTicket},null,8,["orders","visible"])])):(0,s.kq)("",!0)])}var OL={components:{SalesTable:yu,AddSale:SD,AddTicket:CL,IndexFilter:$U},data(){return{localUrl:F,confirmations:Yn,deliveryStatus:Bn,isLoaded:!1,showFilters:!1,filteredSales:[],search:"",searchId:"",isButtonDisabled:!0,selected:[],showPopup:!1,showPopupTicket:!1}},computed:{selectedOrders(){return this.sales.filter((t=>this.selected.includes(t.id)))},users(){return this.$store.getters["user/users"]},deliveries(){return this.users.filter((t=>3==t.role.id))},agentes(){return this.users.filter((t=>2==t.role.id))},sales(){return this.$store.getters["sale/sales"].filter((t=>"expidier"==t.delivery))},cities(){return this.$store.getters["city/cities"]}},methods:{handleSelected(t){this.selected=t,this.selected.length>0?this.isButtonDisabled=!1:this.isButtonDisabled=!0},async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},async getUsers(){await K.all().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setUsers",t.data.data.users)}),this.$handleApiError)},getSales(){return this.isLoaded=!1,Fa.all().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;console.log(t.data),this.$store.dispatch("sale/setSales",e),this.$store.dispatch("sale/setFetched",!0),this.isLoaded=!0}})).catch(this.$handleApiError)},getCities(){if(0==this.cities.length)return K.cities().then((t=>{const e=t.data.data;this.$store.dispatch("city/setCities",e)}))}},async mounted(){0==this.deliveries.length&&(await this.getDeliveries(),this.getUsers()),this.$store.getters["sale/fetched"]?this.isLoaded=!0:this.getSales(),this.getCities()}};const TL=(0,d.Z)(OL,[["render",qL]]);var VL=TL;const FL={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},IL={class:"tw-px-3"},RL={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},jL={class:"tw-flex tw-items-center tw-gap-x-3"},NL=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),ML={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},HL=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"These orders have needs to reconfirmed.",-1),YL=(0,s._)("div",{class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},[(0,s._)("button",{class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})]),(0,s._)("span",null,"Create")])],-1);function ZL(t,e,a,r,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("IndexTable");return(0,s.wg)(),(0,s.iD)("div",FL,[(0,s._)("section",IL,[(0,s._)("div",RL,[(0,s._)("div",null,[(0,s._)("div",jL,[NL,(0,s._)("span",ML,(0,Q.zw)(i.totalOrders)+" order",1)]),HL]),YL]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[0]||(e[0]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t),onFilter:e[2]||(e[2]=t=>l.handlePerPageChange(i.per_page)),onClear:l.handleClearFilters,onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"active-statistics":"","per-page":i.per_page},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])])])}class KL{async statistics(t){return await Y.getCookie(),M.post("api/v1/admin/statistics",t)}async paginate(t="/",e){return await Y.getCookie(),M.post("api/v1/admin/orders"+t,e)}async update(t,e){return await Y.getCookie(),M.post("api/v1/admin/orders/"+t+"/update",e)}}var BL=new KL;const QL={class:"tw-flex tw-flex-col"},GL={class:"tw-overflow-x-auto"},JL={class:"tw-inline-block tw-min-w-full tw-align-middle"},XL={class:"tw-overflow-hidden tw-border tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},tP={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},eP={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},aP=(0,s._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,s._)("span",null,"ID")],-1),rP={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},sP=(0,s._)("span",null,"Created",-1),iP=(0,s._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),lP=[sP,iP],oP=(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),nP=(0,s._)("th",{scope:"col",class:"tw-px-6 !tw-w-5 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),dP=(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Product ",-1),wP=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-6 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),cP=(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),uP=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-6 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),pP=(0,s._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,s._)("span",{class:"tw-sr-only"},"Actions")],-1),mP={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},hP={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},gP=(0,s._)("tr",null,[(0,s._)("td",{colspan:"8"},[(0,s._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),fP=[gP],vP={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},yP={colspan:"9"},xP={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-300 md:tw-p-6 dark:tw-border-gray-300"},_P=(0,s._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})]),(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"})],-1),bP=(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})],-1),kP=(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"},null,-1),CP=[bP,kP],DP={class:"tw-mt-6"};function SP(t,e,a,r,i,l){const o=(0,s.up)("TableRow"),n=((0,s.up)("loading"),(0,s.up)("TablePaginationNoNums"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",QL,[(0,s._)("div",GL,[(0,s._)("div",JL,[(0,s._)("div",XL,[(0,s._)("table",tP,[(0,s._)("thead",eP,[(0,s._)("tr",null,[aP,(0,s._)("th",rP,[(0,s._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},lP)]),oP,nP,dP,wP,cP,uP,pP])]),!a.loading&&a.items.length>0?((0,s.wg)(),(0,s.iD)("tbody",mP,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.items,(a=>((0,s.wg)(),(0,s.j4)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),key:a.id,item:a},null,8,["item"])))),128))])):(0,s.kq)("",!0),a.loading||0!=a.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("tbody",hP,fP)),a.loading?((0,s.wg)(),(0,s.iD)("tbody",vP,[(0,s._)("tr",null,[(0,s.kq)("",!0),(0,s._)("td",yP,[(0,s._)("div",xP,[_P,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.perPage-1,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},CP)))),128))])])])])):(0,s.kq)("",!0)])])])])]),(0,s._)("div",DP,[(0,s.Wm)(n,{from:a.from,to:a.to,"last-page":a.lastPage,"per-page":a.perPage,total:a.total,"current-page":a.currentPage,onPageChange:e[2]||(e[2]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const zP={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},UP={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},LP={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},PP={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},AP=["disabled"],WP=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),$P=(0,s._)("span",null," previous ",-1),EP=[WP,$P],qP=["disabled"],OP=(0,s._)("span",null," Next ",-1),TP=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),VP=[OP,TP];function FP(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",zP,[(0,s._)("div",UP,[(0,s.Uk)(" Page "),(0,s._)("span",LP,(0,Q.zw)(a.currentPage)+" of "+(0,Q.zw)(a.lastPage),1)]),(0,s._)("div",PP,[(0,s._)("button",{disabled:a.currentPage<=1,onClick:e[0]||(e[0]=t=>l.changePage(a.currentPage-1)),class:(0,Q.C_)([[a.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},EP,10,AP),(0,s._)("button",{disabled:a.currentPage>=l.totalPages,onClick:e[1]||(e[1]=t=>l.changePage(a.currentPage+1)),class:(0,Q.C_)([[a.currentPage>=l.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},VP,10,qP)])])])}var IP={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const a=[];for(let r=t;r<=e;r++)a.push(r);return a}},methods:{changePage(t){this.$emit("pageChange",t)}}};const RP=(0,d.Z)(IP,[["render",FP]]);var jP=RP;const NP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},MP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},HP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},YP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},ZP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},KP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},BP={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},QP={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},GP={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},JP={class:"tw-space-y-1"},XP={class:"tw-font-bold tw-text-green-500"},tA={class:"tw-block tw-max-w-[150px] tw-truncate"},eA={key:0,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},aA={key:1,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},rA={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},sA={class:"tw-px-12 tw-py-2 tw-text-sm tw-whitespace-nowrap"},iA=(0,s._)("div",{class:"tw-w-1.5 tw-h-1.5 tw-rounded-full tw-bg-emerald-500"},null,-1),lA={key:1},oA={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},nA={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function dA(t,e,a,r,i,l){const o=(0,s.up)("TableActions");return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",NP,[(0,s._)("div",null,[(0,s._)("h2",MP,(0,Q.zw)(a.item.id),1)])]),(0,s._)("td",HP,[(0,s._)("div",null,[(0,s._)("h2",YP,[(0,s._)("p",null,(0,Q.zw)(i.moment(a.item.created_at).format("DD[/]MM[/]YY")),1),(0,s.kq)("",!0)])])]),(0,s._)("td",ZP,[(0,s._)("div",null,[(0,s._)("h2",KP,(0,Q.zw)(a.item.fullname),1)])]),(0,s._)("td",BP,[(0,s._)("div",null,[(0,s._)("h2",QP,(0,Q.zw)(a.item.phone),1)])]),(0,s._)("td",GP,[(0,s._)("div",null,[(0,s._)("ul",JP,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.item.items,(t=>((0,s.wg)(),(0,s.iD)("li",{dir:"rtl",class:"tw-font-[cairo] tw-flex tw-items-center tw-gap-1",key:t.id},[(0,s._)("span",XP,(0,Q.zw)(t.quantity)+" x ",1),(0,s.Uk)(),(0,s._)("span",tA,(0,Q.zw)(t.product.name),1),(0,s.Uk)(),t.product_variation.color&&!["/","-"].includes(t.product_variation.color)?((0,s.wg)(),(0,s.iD)("span",eA,(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0),(0,s.Uk)(),t.product_variation.size&&!["/","-"].includes(t.product_variation.size)?((0,s.wg)(),(0,s.iD)("span",aA,(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",rA,[(0,s._)("span",{class:(0,Q.C_)([[l.confirmation.bgLight,l.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(l.confirmation.name),3)]),(0,s._)("td",sA,[a.item.delivery_fullname?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([["tw-text-emerald-800","tw-bg-emerald-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-pl-1.5 tw-py-0.5 tw-rounded tw-w-fit tw-flex tw-items-center tw-gap-2"])},[iA,(0,s._)("span",null,(0,Q.zw)(a.item.delivery_fullname),1)])):((0,s.wg)(),(0,s.iD)("div",lA,[(0,s._)("span",{class:(0,Q.C_)([["tw-text-gray-800","tw-bg-gray-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},"No Delivery")]))]),(0,s._)("td",oA,[(0,s._)("span",{class:(0,Q.C_)([[l.deliveryState.bgLight,l.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(l.deliveryState.value?l.deliveryState.name:"Not Selected"),3)]),(0,s._)("td",nA,[(0,s._)("div",null,[(0,s.Wm)(o,{onUpdate:e[0]||(e[0]=e=>t.$emit("update",e)),item:a.item},null,8,["item"])])])])}var wA=a(6797),cA=a.n(wA);const uA={class:"tw-h-full"},pA={class:"tw-flex tw-items-center tw-gap-2"},mA=["href"],hA={key:0};function gA(t,e,a,r,i,l){const o=(0,s.up)("UpdatePopup");return(0,s.wg)(),(0,s.iD)("div",uA,[(0,s._)("div",pA,[(0,s._)("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.item.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})],8,mA),(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.popup=!0),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])]),i.popup?((0,s.wg)(),(0,s.iD)("div",hA,[(0,s.Wm)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t),item:a.item},null,8,["visible","item"])])):(0,s.kq)("",!0)])}const fA={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},vA=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),yA={class:"tw-bg-white tw-p-4"},xA={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},_A={class:"tw-col-span-2 md:tw-col-span-1"},bA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),kA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},CA={class:"tw-col-span-2 md:tw-col-span-1"},DA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),SA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},zA={class:"tw-col-span-2 md:tw-col-span-1"},UA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),LA={class:"tw-relative"},PA=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),AA=["value"],WA=["value"],$A=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),EA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},qA={class:"tw-col-span-2 md:tw-col-span-1"},OA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),TA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},VA={class:"tw-col-span-2"},FA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),IA={class:"tw-relative"},RA=["value"],jA=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),NA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},MA={key:0,class:"md:tw-col-span-1 tw-col-span-2"},HA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),YA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},ZA={key:1,class:"md:tw-col-span-1 tw-col-span-2"},KA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),BA={class:"tw-col-span-2"},QA=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),GA={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},JA={class:"md:tw-col-span-1 tw-col-span-2"},XA={class:"md:tw-col-span-1 tw-col-span-2"},tW=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),eW={class:"tw-relative"},aW=["value"],rW=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),sW={class:"tw-col-span-2"},iW={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},lW={key:0,class:"tw-text-red-400 tw-text-xs"},oW={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},nW=["disabled"],dW=(0,s._)("span",null,"Update",-1);function wW(t,e,a,i,l,o){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(w,{visible:a.visible,closeable:!1,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",fA,[vA,(0,s._)("div",yA,[(0,s._)("div",xA,[(0,s._)("div",_A,[bA,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>l.errors.fullname=null),type:"text",class:(0,Q.C_)([[l.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[r.nr,l.itemCopy.fullname]]),l.errors.fullname?((0,s.wg)(),(0,s.iD)("label",kA,(0,Q.zw)(l.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",CA,[DA,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>l.errors.phone=null),class:(0,Q.C_)([[l.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[r.nr,l.itemCopy.phone]]),l.errors.phone?((0,s.wg)(),(0,s.iD)("label",SA,(0,Q.zw)(l.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",zA,[UA,(0,s._)("div",LA,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.itemCopy.city=t),onChange:e[5]||(e[5]=t=>l.errors.city=null),class:(0,Q.C_)([[l.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[PA,(0,s._)("option",{value:l.itemCopy.city,disabled:""},(0,Q.zw)(l.itemCopy.city),9,AA),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,WA)))),128))],34),[[r.bM,l.itemCopy.city]]),$A]),l.errors.city?((0,s.wg)(),(0,s.iD)("label",EA,(0,Q.zw)(l.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",qA,[OA,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>l.errors.adresse=null),class:(0,Q.C_)([[l.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[r.nr,l.itemCopy.adresse]]),l.errors.adresse?((0,s.wg)(),(0,s.iD)("label",TA,(0,Q.zw)(l.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",VA,[FA,(0,s._)("div",IA,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.itemCopy.confirmation=t),onChange:e[9]||(e[9]=t=>l.errors.confirmation=null),class:(0,Q.C_)([[l.errors.confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,RA)))),128))],34),[[r.bM,l.itemCopy.confirmation]]),jA]),l.errors.confirmation?((0,s.wg)(),(0,s.iD)("label",NA,(0,Q.zw)(l.errors.confirmation),1)):(0,s.kq)("",!0)]),"reporter"==l.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",MA,[HA,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>l.errors.reported_agente_date=null),class:(0,Q.C_)([[l.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[r.nr,l.itemCopy.reported_agente_date]]),l.errors.reported_agente_date?((0,s.wg)(),(0,s.iD)("label",YA,(0,Q.zw)(l.errors.reported_agente_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==l.itemCopy.confirmation?((0,s.wg)(),(0,s.iD)("div",ZA,[KA,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[r.nr,l.itemCopy.reported_agente_note]])])):(0,s.kq)("",!0),(0,s._)("div",BA,[QA,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.itemCopy.note=t),onInput:e[14]||(e[14]=t=>l.errors.note=null),class:(0,Q.C_)([[l.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[r.nr,l.itemCopy.note]]),l.errors.note?((0,s.wg)(),(0,s.iD)("label",GA,(0,Q.zw)(l.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",JA,[(0,s.Wm)(n,{item:l.itemCopy,error:l.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>l.errors.affectation=t),affectation:l.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>l.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",XA,[tW,(0,s._)("div",eW,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>l.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,aW)))),128))],512),[[r.bM,l.itemCopy.upsell]]),rW])]),(0,s._)("div",sW,[(0,s._)("label",iW,[(0,s.Uk)("Order Items "),l.errors.items?((0,s.wg)(),(0,s.iD)("span",lW," # "+(0,Q.zw)(l.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:l.itemCopy,error:l.errors.items,products:l.products,"products-fetched":l.products_fetched,items:l.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>l.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",oW,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>o.handleUpdate&&o.handleUpdate(...t)),disabled:l.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[l.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),dW],8,nW)])])])),_:1},8,["visible","onCancel"])])}const cW=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.confirmation?e.affectation&&"confirmer"!=e.confirmation?(t.errors.affectation="Cannot update affectation: Order not confirmed.",!1):!!uW(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),uW=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let a=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",a=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",a=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",a=!1,!1):void 0)),a},pW=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const a=e.data.order;t.$emit("update",a),t.isLoading=!1,t.cancel(),t.errors={}},mW=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},hW=(t,e)=>{t.isLoading=!0,t.errors={},Zl.update(e.id,e).then((e=>pW(t,e.data))).catch((e=>mW(t,e.response.data))).finally((()=>t.isLoading=!1))},gW={key:0,class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},fW={key:1,class:"md:tw-col-span-12 tw-col-span-12"},vW={class:"tw-max-w-full tw-overflow-auto"},yW={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},xW={class:"tw-bg-gray-50"},_W={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},bW={key:0},kW=(0,s._)("td",{colspan:"3"},null,-1),CW=(0,s._)("td",null,[(0,s._)("div",{class:"tw-p-2"},[(0,s._)("p",null,"Total: ")])],-1),DW={colspan:"2",class:"tw-p-2"},SW={class:"tw-p-2 tw-py-1 tw-text-sm tw-text-green-500 tw-w-24 tw-font-medium tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},zW={colspan:"6"},UW={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},LW=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),PW=(0,s._)("span",null,"Add Item",-1),AW=[LW,PW],WW={key:1},$W={colspan:"6"},EW={class:"tw-scale-75 tw-p-5"};function qW(t,e,a,r,i,l){const o=(0,s.up)("ItemRow"),n=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[a.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",gW," No Order items ")),a.items.length?((0,s.wg)(),(0,s.iD)("div",fW,[(0,s._)("div",vW,[((0,s.wg)(),(0,s.iD)("table",{key:a.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",yW,[(0,s._)("tr",xW,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",_W,(0,Q.zw)(t),1)],2))),64))])]),a.productsFetched?((0,s.wg)(),(0,s.iD)("tbody",bW,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.items,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,item:t,products:a.products,onDelete:l.deleteItem,onUpdate:l.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,s._)("tr",null,[kW,CW,(0,s._)("td",DW,[(0,s._)("div",SW,[(0,s._)("p",null,(0,Q.zw)(i.currency)+" "+(0,Q.zw)(l.price),1)])])]),(0,s._)("tr",null,[(0,s._)("td",zW,[(0,s._)("div",UW,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},AW)])])])])):((0,s.wg)(),(0,s.iD)("tbody",WW,[(0,s._)("tr",null,[(0,s._)("td",$W,[(0,s._)("div",EW,[(0,s.Wm)(n)])])])]))]))])])):(0,s.kq)("",!0)])}const OW=(0,s._)("td",null,null,-1),TW={class:"tw-p-2"},VW={class:"tw-relative"},FW=["value"],IW=(0,s._)("option",{value:0,selected:""},"Choose Product",-1),RW=["value"],jW=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),NW={class:"tw-p-2"},MW={key:0,class:"tw-relative"},HW=["value"],YW=(0,s._)("option",{value:"",disabled:""},"Choose Variation",-1),ZW=["value"],KW={key:1,class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},BW=(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})],-1),QW=[BW],GW={class:"tw-p-2"},JW=["value"],XW={class:"tw-p-2"},t$=["value"],e$={class:"tw-flex tw-justify-center"};function a$(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("tr",null,[OW,(0,s._)("td",null,[(0,s._)("div",TW,[(0,s._)("div",VW,[(0,s._)("select",{onChange:e[0]||(e[0]=(...t)=>l.handleProductChange&&l.handleProductChange(...t)),value:a.item.product_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[IW,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.products,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.name),9,RW)))),128))],40,FW),jW])])]),(0,s._)("td",null,[(0,s._)("div",NW,[a.item.product_id?((0,s.wg)(),(0,s.iD)("div",MW,[l.product.variations.length>1?((0,s.wg)(),(0,s.iD)("select",{key:0,onChange:e[1]||(e[1]=(...t)=>l.handleVariationChange&&l.handleVariationChange(...t)),value:a.item.product_variation_id,class:"tw-block tw-border-solid focus:tw-outline-none tw-w-full tw-p-2 tw-pr-6 tw-text-xs tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},[YW,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.color)+" "+(0,Q.zw)(t.size),9,ZW)))),128))],40,HW)):(0,s.kq)("",!0),l.product.variations.length>1?((0,s.wg)(),(0,s.iD)("div",KW,QW)):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])]),(0,s._)("td",null,[(0,s._)("div",GW,[(0,s._)("input",{onInput:e[2]||(e[2]=e=>t.$emit("update",{...a.item,quantity:parseInt(e.target.value)>=0?parseInt(e.target.value):0})),value:a.item.quantity,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,JW)])]),(0,s._)("td",null,[(0,s._)("div",XW,[(0,s._)("input",{onInput:e[3]||(e[3]=e=>t.$emit("update",{...a.item,price:parseFloat(e.target.value)})),value:a.item.price,min:"0",type:"number",class:"focus:tw-outline-none tw-border-solid tw-block tw-w-24 tw-p-2 tw-text-gray-900 tw-border tw-border-gray-300 tw-rounded-lg tw-bg-gray-50 sm:tw-text-xs focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},null,40,t$)])]),(0,s._)("td",null,[(0,s._)("div",e$,[(0,s._)("button",{onClick:e[4]||(e[4]=(...t)=>l.handleDelete&&l.handleDelete(...t)),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-red-500/20 hover:tw-bg-red-500/10 hover:tw-border-red-500/70 tw-duration-300 tw-text-red-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])])])])}var r$={props:{item:{required:!0},products:{required:!0}},computed:{product(){return 0==this.item.product_id?null:this.products.find((t=>t.id==this.item.product_id))}},methods:{handleProductChange(t){const e=parseInt(t.target.value);if(!e)return!1;const a=this.products.find((t=>t.id==e));console.log(a.variations.length>0?a.variations[0].id:null);const r={...this.item,product_id:e,product:a,product_ref:a.ref,product_variation_id:a.variations.length>0?a.variations[0].id:null,product_variation:a.variations.length>0?a.variations[0]:null};this.$emit("update",r)},handleVariationChange(t){this.$emit("update",{...this.item,product_variation:this.product.variations.find((e=>e.id==parseInt(t.target.value))),product_variation_id:parseInt(t.target.value)})},handleDelete(){this.$emit("delete",this.item.id)}},mounted(){}};const s$=(0,d.Z)(r$,[["render",a$]]);var i$=s$,l$={components:{ItemRow:i$},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0,default:!1},order:{required:!0}},data(){return{currency:R}},computed:{price(){return Mi(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1]:1,e=t?t.id+1:1,a={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},r=[...this.items,a];this.$emit("update:items",r)}},mounted(){}};const o$=(0,d.Z)(l$,[["render",qW]]);var n$=o$;const d$=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),w$={key:0,class:"tw-relative"},c$=["value","disabled"],u$=(0,s._)("option",{value:""},"Choose a Delivery",-1),p$=["value"],m$=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),h$={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},g$={key:2,class:"tw-relative"},f$={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},v$=(0,s._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,s._)("option",{value:null,selected:""},"Loading...")],-1),y$=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function x$(t,e,a,r,i,l){const o=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[d$,i.fetched?((0,s.wg)(),(0,s.iD)("div",w$,[(0,s._)("select",{value:a.affectation,onChange:e[0]||(e[0]=(...t)=>l.handleChange&&l.handleChange(...t)),disabled:"confirmer"!=a.item.confirmation,class:(0,Q.C_)([[a.error&&"!tw-border-red-400","confirmer"!=a.item.confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[u$,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,p$)))),128))],42,c$),m$])):(0,s.kq)("",!0),i.fetched&&a.error?((0,s.wg)(),(0,s.iD)("label",h$,(0,Q.zw)(a.error),1)):(0,s.kq)("",!0),i.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",g$,[(0,s._)("div",f$,[(0,s.Wm)(o)]),v$,y$]))])}var _$={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const b$=(0,d.Z)(_$,[["render",x$]]);var k$=b$,C$={components:{OrderItems:n$,OrderAffectation:k$},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmations:Yn,upsells:Kn,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=cW(this,this.itemCopy);if(!t)return!1;hW(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,er.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const D$=(0,d.Z)(C$,[["render",wW]]);var S$=D$,z$={components:{UpdatePopup:S$},props:{item:{required:!0}},data(){return{popup:!1,isLoading:!1}},methods:{handle(){}}};const U$=(0,d.Z)(z$,[["render",gA]]);var L$=U$,P$={components:{TableActions:L$},props:{item:{required:!0}},data(){return{moment:cA()}},computed:{confirmation(){return Yn.find((t=>t.value==this.item.confirmation))},deliveryState(){return Bn.find((t=>t.value==this.item.delivery))}},methods:{}};const A$=(0,d.Z)(P$,[["render",dA]]);var W$=A$,$$={components:{TablePaginationNoNums:jP,TableRow:W$},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}}};const E$=(0,d.Z)($$,[["render",SP]]);var q$=E$;const O$={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},T$={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},V$=["disabled"],F$=["disabled"],I$=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),R$=[I$],j$=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),N$=[j$],M$=["disabled"],H$=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),Y$=[H$],Z$=["disabled"],K$=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"m16.2 20.5l2.8-2.8V20h1v-4h-4v1h2.3l-2.8 2.8l.7.7ZM5 21q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h14q.825 0 1.413.588T21 5v6.7q-.475-.225-.975-.388T19 11.075V5H5v14h6.05q.075.55.238 1.05t.387.95H5Zm0-3v1V5v6.075V11v7Zm2-1h4.075q.075-.525.238-1.025t.362-.975H7v2Zm0-4h6.1q.8-.75 1.787-1.25T17 11.075V11H7v2Zm0-4h10V7H7v2Zm11 14q-2.075 0-3.538-1.463T13 18q0-2.075 1.463-3.538T18 13q2.075 0 3.538 1.463T23 18q0 2.075-1.463 3.538T18 23Z"})],-1),B$=[K$],Q$={class:"tw-relative"},G$=["value"],J$=(0,s.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option>',6),X$=[J$],tE=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),eE={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},aE=["value"],rE={class:"tw-overflow-hidden tw-col-span-1"},sE={class:"tw-overflow-hidden tw-col-span-1"},iE={class:"tw-overflow-hidden tw-col-span-1"};function lE(t,e,a,i,l,o){const n=(0,s.up)("FiltersWrapper"),d=(0,s.up)("IndexExport"),w=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",O$,[(0,s._)("div",T$,[(0,s._)("button",{class:(0,Q.C_)([[l.showAll&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 hover:tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"]),disabled:l.showAll,onClick:e[0]||(e[0]=t=>o.filterToday(!1))}," View all ",10,V$),(0,s._)("button",{class:(0,Q.C_)([[l.showToday&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"]),disabled:l.showToday,onClick:e[1]||(e[1]=t=>o.filterToday(!0))}," Today ",10,F$),(0,s._)("button",{onClick:e[2]||(e[2]=t=>l.showFilters=!l.showFilters),class:(0,Q.C_)([[l.showFilters&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},R$,2),a.activeStatistics&&a.statistics?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[3]||(e[3]=t=>l.showStatistics=!l.showStatistics),class:(0,Q.C_)([[l.showStatistics&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},N$,2)):(0,s.kq)("",!0),(0,s._)("button",{onClick:e[4]||(e[4]=e=>t.$emit("fresh")),disabled:a.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Y$,8,M$),(0,s._)("button",{onClick:e[5]||(e[5]=t=>l.showExport=!l.showExport),class:(0,Q.C_)([[l.showExport&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"]),disabled:a.loading},B$,10,Z$),(0,s._)("div",Q$,[(0,s._)("select",{onChange:e[6]||(e[6]=(...t)=>o.handlePerPageChange&&o.handlePerPageChange(...t)),value:a.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},X$,40,G$),tE])]),(0,s._)("div",eE,[(0,s._)("input",{type:"text",placeholder:"Search",value:a.search,onInput:e[7]||(e[7]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[8]||(e[8]=(0,r.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,aE),(0,s._)("button",{onClick:e[9]||(e[9]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-magnify")])),_:1})])])]),(0,s._)("div",{class:(0,Q.C_)([[l.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",rE,[(0,s.Wm)(n,{onClear:e[10]||(e[10]=e=>t.$emit("clear")),onFilter:e[11]||(e[11]=e=>t.$emit("filter")),filters:a.filters,onUpdate:e[12]||(e[12]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),(0,s._)("div",{class:(0,Q.C_)([[l.showExport?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",sE,[(0,s.Wm)(d)])],2),a.statistics?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([[l.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",iE,[(0,s.Wm)(w,{statistics:a.statistics},null,8,["statistics"])])],2)):(0,s.kq)("",!0)])}const oE={class:"tw-mb-4"},nE={class:"tw-grid tw-grid-cols-12 tw-gap-4"},dE={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},wE={class:"tw-flex tw-items-center tw-justify-between"},cE={class:"tw-text-xl tw-font-bold tw-text-gray-900"},uE={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function pE(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",oE,[(0,s._)("div",nE,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.visible,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,s._)("div",dE,[(0,s._)("p",{class:(0,Q.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[l.getConfirmation(t.confirmation).textLight,l.getConfirmation(t.confirmation).bgLight]])},(0,Q.zw)(t.name),3),(0,s._)("div",wE,[(0,s._)("span",cE,(0,Q.zw)(t.total),1),(0,s._)("span",uE,(0,Q.zw)(t.percent)+"%",1)])])])))),128))])])}var mE={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return Yn.find((e=>e.value==t))}}};const hE=(0,d.Z)(mE,[["render",pE]]);var gE=hE;const fE={class:"tw-mb-4"};function vE(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",fE," Exporting... ")}var yE={};const xE=(0,d.Z)(yE,[["render",vE]]);var _E=xE;const bE={class:"tw-mb-4"},kE={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},CE={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},DE=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created From",-1),SE=["value"],zE={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},UE=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created To",-1),LE=["value"],PE={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},AE=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Dropped From",-1),WE=["value"],$E={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},EE=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Dropped To",-1),qE=["value"],OE={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},TE=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),VE=["value"],FE=(0,s._)("option",{value:"all",selected:""},"All",-1),IE=["value"],RE={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},jE=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),NE=["value"],ME=(0,s._)("option",{value:"all",selected:""},"All",-1),HE=["value"],YE={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},ZE=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),KE=["value"],BE=(0,s._)("option",{value:"all",selected:""},"All",-1),QE=(0,s._)("option",{value:"oui",class:"tw-capitalize"},"Yes",-1),GE=(0,s._)("option",{value:"non",class:"tw-capitalize"},"Non",-1),JE=[BE,QE,GE],XE={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},tq=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),eq=(0,s._)("span",null,"Clear",-1),aq=[tq,eq],rq=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),sq=(0,s._)("span",null,"Filter",-1),iq=[rq,sq];function lq(t,e,a,r,i,l){(0,s.up)("DateFilter");const o=(0,s.up)("AgentFilter"),n=(0,s.up)("AffectationFilter");return(0,s.wg)(),(0,s.iD)("div",bE,[(0,s._)("div",kE,[(0,s.kq)("",!0),(0,s._)("div",CE,[DE,(0,s._)("input",{value:a.filters.created_from,type:"date",onChange:e[1]||(e[1]=e=>t.$emit("update",{...a.filters,created_from:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,SE)]),(0,s._)("div",zE,[UE,(0,s._)("input",{value:a.filters.created_to,type:"date",onChange:e[2]||(e[2]=e=>t.$emit("update",{...a.filters,created_to:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,LE)]),(0,s._)("div",PE,[AE,(0,s._)("input",{value:a.filters.dropped_from,type:"date",onChange:e[3]||(e[3]=e=>t.$emit("update",{...a.filters,dropped_from:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,WE)]),(0,s._)("div",$E,[EE,(0,s._)("input",{value:a.filters.dropped_to,type:"date",onChange:e[4]||(e[4]=e=>t.$emit("update",{...a.filters,dropped_to:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,qE)]),(0,s.Wm)(o,{filters:a.filters,onUpdate:e[5]||(e[5]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s._)("div",OE,[TE,(0,s._)("select",{value:a.filters.confirmation,onChange:e[6]||(e[6]=e=>t.$emit("update",{...a.filters,confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[FE,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.value},(0,Q.zw)(t.name),11,IE)))),128))],40,VE)]),(0,s.Wm)(n,{filters:a.filters,onUpdate:e[7]||(e[7]=e=>t.$emit("update",e))},null,8,["filters"]),(0,s._)("div",RE,[jE,(0,s._)("select",{onChange:e[8]||(e[8]=e=>t.$emit("update",{...a.filters,delivery:e.target.value})),value:a.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[ME,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value?t.value:"",key:t.id},(0,Q.zw)(t.name),11,HE)))),128))],40,NE)]),(0,s._)("div",YE,[ZE,(0,s._)("select",{value:a.filters.upsell,onChange:e[9]||(e[9]=e=>t.$emit("update",{...a.filters,upsell:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},JE,40,KE)]),(0,s._)("div",XE,[(0,s._)("button",{onClick:e[10]||(e[10]=e=>t.$emit("clear")),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},aq),(0,s._)("button",{onClick:e[11]||(e[11]=e=>t.$emit("filter")),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},iq)])])])}const oq={class:"tw-text-sm tw-text-neutral-600"},nq=["onClick"];function dq(t,e,a,r,i,l){const o=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("span",oq,(0,Q.zw)(a.name),1),(0,s.Wm)(o,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),l.onDateRangePicked],onCleared:l.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:a})=>[(0,s._)("span",{onClick:t=>a(e)},(0,Q.zw)(t),9,nq)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var wq={props:["name"],data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Wi.Z)(new Date,1),(0,Wi.Z)(new Date,1)]},{label:"This month",range:[(0,$i.Z)(new Date),(0,Ei.Z)(new Date)]},{label:"Last month",range:[(0,$i.Z)((0,qi.Z)(new Date,1)),(0,Ei.Z)((0,qi.Z)(new Date,1))]},{label:"This year",range:[(0,Oi.Z)(new Date),(0,Ti.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const cq=(0,d.Z)(wq,[["render",dq]]);var uq=cq;const pq={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},mq=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),hq=["value"],gq=(0,s._)("option",{value:"all"},"All",-1),fq=(0,s._)("option",{value:""},"No Delivery",-1),vq=["value"];function yq(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",pq,[mq,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,affectation:e.target.value})),value:a.filters.affectation,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[gq,fq,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,vq)))),128))],40,hq)])}var xq={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.fetched?this.users.filter((t=>"delivery"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const _q=(0,d.Z)(xq,[["render",yq]]);var bq=_q;const kq={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Cq=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Agent",-1),Dq=["value"],Sq=(0,s._)("option",{value:"all"},"All",-1),zq=(0,s._)("option",{value:""},"No Agent",-1),Uq=["value"];function Lq(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",kq,[Cq,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,agente_id:e.target.value})),value:a.filters.agente_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Sq,zq,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Uq)))),128))],40,Dq)])}var Pq={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},agents(){return this.fetched?this.users.filter((t=>"agente"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const Aq=(0,d.Z)(Pq,[["render",Lq]]);var Wq=Aq,$q={components:{DateFilter:uq,AffectationFilter:bq,AgentFilter:Wq},props:{filters:{required:!0,default:{}}},data(){return{confirmations:Yn,deliveries:Bn,dateFilter:["",""]}}};const Eq=(0,d.Z)($q,[["render",lq]]);var qq=Eq,Oq={components:{IndexStatistics:gE,FiltersWrapper:qq,IndexExport:_E},props:{perPage:{type:Number},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1,showExport:!1,showAll:!0,showToday:!1}},methods:{handlePerPageChange(t){this.$emit("perPageChange",t.target.value)},filterToday(t){var e=null;t?(this.showAll=!1,this.showToday=!0,e=cA()(),e=e.format("YYYY-MM-DD")):(this.showAll=!0,this.showToday=!1),this.$emit("update:filters",{...this.filters,created_from:e,created_to:e}),this.$emit("filter")}},mounted(){}};const Tq=(0,d.Z)(Oq,[["render",lE]]);var Vq=Tq,Fq={components:{IndexTable:q$,IndexFilters:Vq},data(){return{fetching:!0,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",delivery:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,BL.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Hi(t.first_page_url),this.lase_page_url=Hi(t.last_page_url),this.next_page_url=Hi(t.next_page_url),this.prev_page_url=Hi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",delivery:"all"},this.handlePageChange(1)},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){console.log(t),this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const Iq=(0,d.Z)(Fq,[["render",ZL]]);var Rq=Iq,jq={name:"sales",path:"/sales",component:sr,meta:{module:"sale"},children:[{name:"sale/list",path:"",component:aL,meta:{module:"sale",subModule:"sale/list",title:"Sales List",gate:"show_all_sales"}},{name:"sale/newlist",path:"new",component:Rq,meta:{module:"sale",subModule:"sale/newlist",title:"Sales List",gate:"show_all_sales"}},{name:"sale/expidation",path:"expidation",component:zL,meta:{module:"sale",subModule:"sale/expidation",title:"Expidation",gate:"show_all_expidations"}},{name:"sale/shipping",path:"shipping",component:VL,meta:{module:"sale",subModule:"sale/shipping",title:"Shipping",gate:"show_all_expidations"}}]};const Nq={class:"mb-5 tw-flex tw-justify-between tw-items-center"},Mq=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"My Orders"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See orders affected to you")],-1),Hq={key:0},Yq=(0,s._)("span",{class:"text-white"}," Add Sale ",-1),Zq={key:0},Kq={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Bq={class:"mb-5 tw-flex"},Qq={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},Gq={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},Jq={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},Xq=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sort By",-1),tO={class:"tw-relative"},eO=["value"],aO={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},rO=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Order By",-1),sO={class:"tw-relative"},iO=["value"],lO={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},oO=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),nO={class:"tw-relative"},dO=(0,s._)("option",{value:"all"},"Select",-1),wO=(0,s._)("option",{value:"oui"},"Oui",-1),cO=(0,s._)("option",{value:"non"},"Non",-1),uO=[dO,wO,cO],pO={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},mO=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),hO={class:"tw-relative"},gO=["value"],fO={key:0},vO={key:1,class:""},yO=(0,s._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order liste is empty !",-1),xO=[yO];function _O(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("OrdersTable"),w=(0,s.up)("AddNewOrder");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Nq,[Mq,l.isLoaded?((0,s.wg)(),(0,s.iD)("div",Hq,[(0,s.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),Yq])),_:1})])):(0,s.kq)("",!0)]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Zq,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",Kq,[(0,s._)("div",Bq,[(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",Qq,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",Gq,[(0,s._)("div",Jq,[Xq,(0,s._)("div",tO,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.sorting.sortBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.sorting.fields,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,eO)))),128))],512),[[r.bM,l.sorting.sortBy]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",aO,[rO,(0,s._)("div",sO,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.sorting.orderBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.sorting.options,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,iO)))),128))],512),[[r.bM,l.sorting.orderBy]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",lO,[oO,(0,s._)("div",nO,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},uO,512),[[r.bM,l.upsellFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",pO,[mO,(0,s._)("div",hO,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,gO)))),128))],512),[[r.bM,l.confirmationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.orders.length>0?((0,s.wg)(),(0,s.iD)("div",fO,[(0,s.Wm)(d,{orders:o.filteredOrders},null,8,["orders"])])):((0,s.wg)(),(0,s.iD)("div",vO,xO))])):(0,s.kq)("",!0),(0,s.Wm)(w,{onCancel:e[7]||(e[7]=t=>l.showPopup=!1),visible:l.showPopup,"onUpdate:visible":e[8]||(e[8]=t=>l.showPopup=t)},null,8,["visible"])])}const bO={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},kO={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},CO={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},DO=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),SO={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},zO={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},UO={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},LO=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),PO=["value"],AO={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},WO={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},$O={class:"tw-flex tw-flex-wrap tw-gap-2"},EO={class:"tw-text-white"};function qO(t,e,a,i,l,o){const n=(0,s.up)("OrderRow");return a.orders.length>0?((0,s.wg)(),(0,s.iD)("div",{key:a.orders.length},[(0,s._)("div",bO,[(0,s._)("table",kO,[(0,s._)("thead",CO,[(0,s._)("tr",null,[DO,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",SO,(0,Q.zw)(t),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.items,(t=>((0,s.wg)(),(0,s.j4)(n,{showNote:!!a.note,key:t.id,order:t},null,8,["showNote","order"])))),128))])])]),(0,s._)("div",zO,[(0,s._)("div",UO,[LO,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,PO)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",AO,[(0,s._)("div",WO,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.orders.length:o.nextRange)+" of "+(0,Q.zw)(a.orders.length)+" items ",1),(0,s._)("div",$O,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",EO,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])):(0,s.kq)("",!0)}const OO=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),TO={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},VO={class:"tw-px-6 tw-py-4 tw-relative"},FO={key:0},IO={class:"tw-px-6 tw-py-4"},RO={class:"tw-px-6 tw-py-4 tw-relative"},jO={class:"tw-pb-2"},NO={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},MO={key:0},HO={key:1},YO={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},ZO={key:0,class:"tw-bg-emerald-500/10 tw-text-emerald-500 tw-px-2 tw-rounded-t"},KO={key:1,class:"tw-bg-blue-500/10 tw-text-blue-500 tw-px-2 tw-rounded-t"},BO={class:"tw-px-6 tw-py-4 tw-relative"},QO={class:"tw-flex tw-items-center tw-justify-center"},GO={class:"tw-flex tw-gap-1"},JO={key:0},XO={class:"tw-px-6 tw-py-4"},tT={class:"tw-px-6 tw-py-4"},eT={class:"tw-px-6 tw-py-4"},aT={class:"!tw-max-w-[300px] !tw-min-w-[300px] tw-whitespace-normal"},rT={key:1,class:"tw-px-6 tw-py-4"},sT={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},iT={class:"tw-px-6 tw-py-4"},lT={class:"tw-min-w-[300px]"},oT=(0,s._)("p",null,"Edit note",-1);function nT(t,e,a,r,i,l){(0,s.up)("OrderUpsell");const o=(0,s.up)("OrderConfirmation"),n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderActions"),w=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[((0,s.wg)(),(0,s.iD)("tr",{key:a.order.id,class:(0,Q.C_)([["reporter"==a.order.confirmation&&"tw-relative",l.isReportedToday(a.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[OO,(0,s._)("th",TO,(0,Q.zw)(l.id),1),(0,s._)("td",VO,[(0,s.Uk)((0,Q.zw)(a.order?.created_at?.split("T")[0])+" ",1),"reporter"==a.order.confirmation?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(a.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[l.isReportedToday(a.order)?((0,s.wg)(),(0,s.iD)("span",FO," Reported for today ")):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)]),(0,s._)("td",IO,(0,Q.zw)(l.fullname),1),(0,s._)("td",RO,[(0,s._)("div",jO,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.order.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",NO,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",MO,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",HO,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))]),(0,s._)("div",YO,[a.order.counts_from_warehouse?((0,s.wg)(),(0,s.iD)("p",ZO," warehouse ")):(0,s.kq)("",!0),a.order.counts_from_warehouse?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",KO," delivery "))])])]),(0,s.kq)("",!0),(0,s._)("td",BO,[(0,s._)("div",QO,[((0,s.wg)(),(0,s.j4)(o,{class:(0,Q.C_)("reporter"==a.order.confirmation&&"tw-mb-1"),order:a.order,confirmation:l.confirmation,key:l.confirmation,id:l.id},null,8,["class","order","confirmation","id"])),"reporter"==a.order.confirmation?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(a.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",GO,["reporter"==a.order.confirmation?((0,s.wg)(),(0,s.iD)("span",JO,[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,Q.zw)(a.order?.reported_agente_date?.split("T")[0]),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",XO,["confirmer"===l.confirmation?((0,s.wg)(),(0,s.j4)(n,{order:a.order,id:l.id,affectation:l.affectation,key:l.affectation},null,8,["order","id","affectation"])):(0,s.kq)("",!0)]),(0,s._)("td",tT,(0,Q.zw)(l.getPrice(a.order)),1),(0,s._)("td",eT,[(0,s._)("div",aT,(0,Q.zw)(a.order.city),1)]),a.showNote?((0,s.wg)(),(0,s.iD)("td",rT,[(0,s._)("div",sT,[(0,s.Uk)((0,Q.zw)(a.order.note)+" ",1),(0,s.Wm)(X.t,{onClick:l.handleClick,size:"x-small",class:(0,Q.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":i.isLoading}])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,s.kq)("",!0),(0,s._)("td",iT,[(0,s.Wm)(d,{order:a.order},null,8,["order"])])],2)),(0,s.Wm)(w,{type:"info",title:"Add Note",onResolved:l.handleResolved,loading:i.isLoading,visible:i.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",lT,[oT,(0,s.Wm)(Pp.z,{modelValue:i.newNote,"onUpdate:modelValue":e[0]||(e[0]=t=>i.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}const dT={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},wT=["onClick"],cT={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},uT=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter note",-1),pT={class:"tw-flex tw-justify-end tw-mt-2"};function mT(t,e,a,i,l,o){const n=(0,s.up)("popup-full"),d=(0,s.up)("OrderReporting"),w=(0,s.up)("OrderAnnuler");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.confirmation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>o.toggle&&o.toggle(...t)),class:(0,Q.C_)([[o.selected.text,o.selected.bg,o.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,Q.zw)(o.selected.name)+" ",1),l.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(l.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),l.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!l.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",dT,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>o.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,wT)))),128))])],2),(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>l.showPopup=!1),visible:l.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",cT,[uT,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n        ",512),[[r.nr,l.note]]),(0,s._)("div",pT,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleClick},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"]),(0,s.Wm)(d,{order:a.order,visible:l.showPopupReporter,onCancel:e[3]||(e[3]=t=>l.showPopupReporter=!1)},null,8,["order","visible"]),(0,s.Wm)(w,{order:a.order,visible:l.showPopupAnnuler,onCancel:e[4]||(e[4]=t=>l.showPopupAnnuler=!1)},null,8,["order","visible"])])),[[Bt.L,o.close]])}const hT={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},gT=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),fT=(0,s._)("br",null,null,-1),vT=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),yT={class:"tw-flex tw-justify-end tw-mt-2"};function xT(t,e,a,i,l,o){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:a.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",hT,[gT,(0,s.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),fT,vT,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[r.nr,l.note]]),(0,s._)("div",yT,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var _T={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_agente_date=this.realDate,t.reported_agente_note=this.note,t.confirmation="reporter",this.isLoading=!0,Fa.agenteUpdateConfirmation(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${a}`,`${a}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){}};const bT=(0,d.Z)(_T,[["render",xT]]);var kT=bT;const CT={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},DT=(0,s._)("br",null,null,-1),ST=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),zT={class:"tw-flex tw-justify-end tw-mt-2"};function UT(t,e,a,i,l,o){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:a.order.id},[(0,s.Wm)(n,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[1]||(e[1]=t=>o.cancel()),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",CT,[DT,ST,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n          ",512),[[r.nr,l.note]]),(0,s._)("div",zT,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var LT={props:["visible","order"],data(){return{isLoading:!1,note:"",newOrder:null}},methods:{handleConfirm(){const t={...this.order};t.reported_agente_note=this.note,t.confirmation="annuler",this.isLoading=!0,Fa.agenteUpdateConfirmation(t.id,"annuler",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order annuler successfully"}),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},cancel(){this.$emit("cancel")}},mounted(){}};const PT=(0,d.Z)(LT,[["render",UT]]);var AT=PT,WT={props:["confirmation","id","order"],components:{OrderReporting:kT,OrderAnnuler:AT},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Yn,showPopupReporter:!1,showPopupAnnuler:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleResolved(t){t?(this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))):this.showPopup=!1},handleClick(){this.selectedId=this.nextOption,this.showPopup=!1,this.updateOrderWithNote().catch(this.$handleApiError).finally((()=>this.showPopup=!1))},async handleChange(t){if(t.id===this.selectedId)return!1;["confirmer","reporter","annuler"].includes(t.value)?"reporter"===t.value?this.showPopupReporter=!0:"annuler"===t.value?this.showPopupAnnuler=!0:(this.nextOption=t.id,this.showPopup=!0):(this.selectedId=t.id,this.updateOrder()),this.close()},async updateOrder(){return this.isLoading=!0,Fa.agenteUpdateConfirmation(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmation(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},async updateOrderWithNote(){return this.isLoading=!0,Fa.agenteUpdateConfirmationWithNote(this.id,this.selected.value,this.note).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateConfirmationWithNote(this.id,this.selected.value,this.note),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateConfirmation(t,e){this.$store.dispatch("order/updateConfirmation",{id:t,confirmation:e}),this.$emit("update",e)},updateConfirmationWithNote(t,e,a){this.$store.dispatch("order/updateConfirmationWithNote",{id:t,confirmation:e,note:a}),this.$emit("update",e)}},mounted(){this.availableOptions.includes(this.confirmation)?this.selectedId=this.allOptions.find((t=>t.value==this.confirmation)).id:this.selectedId=0}};const $T=(0,d.Z)(WT,[["render",mT]]);var ET=$T;const qT={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700"},OT=["onClick"];function TT(t,e,a,r,i,l){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.upsell,class:"tw-relative tw-w-[60px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center"]),type:"button"},[(0,s.Uk)((0,Q.zw)(l.selected.name)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",qT,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100",[t.text,t.bg]])},(0,Q.zw)(t.name),3)],8,OT)))),128))])],2)])),[[Bt.L,l.close]])}var VT={props:["upsell","id"],data(){return{isLoading:!1,isOpen:!1,selectedId:0,allOptions:Kn}},computed:{options(){return this.allOptions},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id==this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){Fa.agenteUpdateUpsell(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateUpsell(this.id,this.selected.value),this.$emit("update",this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t)))},updateUpsell(t,e){this.$store.dispatch("order/updateUpsell",{id:t,upsell:e})}},mounted(){switch(console.log(this.upsell),this.upsell){case"oui":console.log("found oui"),this.selectedId=1;break;case"non":console.log("found non"),this.selectedId=2;break;default:console.log("found nothing"),this.selectedId=0;break}}};const FT=(0,d.Z)(VT,[["render",TT]]);var IT=FT;const RT={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},jT=["onClick"],NT={class:"tw-block tw-px-4 tw-py-2 hover:tw-bg-gray-100"},MT={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function HT(t,e,a,r,i,l){return l.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:"tw-whitespace-nowrap focus:tw-ring-4 tw-ring-neutral-200 tw-bg-neutral-600/10 tw-text-neutral-800 focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center",type:"button"},[(0,s.Uk)((0,Q.zw)(l.selected.firstname)+" "+(0,Q.zw)(l.selected.lastname)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)]),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",RT,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>l.handleChange(t),key:t.id},[(0,s._)("a",NT,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)],8,jT)))),128))])],2)])),[[Bt.L,l.close]]):((0,s.wg)(),(0,s.iD)("div",MT,[(0,s.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var YT={props:["affectation","id","order"],data(){return{isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},fetched(){return this.$store.getters["user/fetched"]},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.order.items.some((e=>e.product_id==t.product_id))))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(this.old=this.affectation,t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},updateOrder(){Fa.agenteUpdateAffectaion(this.id,this.selectedId).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateAffectation(this.id,this.selected.id),this.isLoading=!1)}),(t=>{this.$handleApiError(t),this.isLoading=!1,this.selectedId=this.old}))},updateAffectation(t,e){this.$store.dispatch("order/updateAffectation",{id:t,affectation:e})}},mounted(){this.selectedId=this.affectation,console.log("id: ",this.id," affecte: ",this.affectation)}};const ZT=(0,d.Z)(YT,[["render",HT]]);var KT=ZT;const BT={key:0},QT={key:2},GT={key:3};function JT(t,e,a,r,i,l){const o=(0,s.up)("UpdateDoubleOrder"),n=(0,s.up)("UpdateOrder");return a.order?((0,s.wg)(),(0,s.iD)("div",BT,[a.only.includes("whatsapp")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,s.kq)("",!0),a.only.includes("update")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),a.double?((0,s.wg)(),(0,s.iD)("div",QT,[i.showUpdatePopup?((0,s.wg)(),(0,s.j4)(o,{key:0,onUpdateOrder:e[1]||(e[1]=e=>t.$emit("updateOrder",e)),visible:i.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>i.showUpdatePopup=t),order:a.order},null,8,["visible","order"])):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",GT,[i.showUpdatePopup?((0,s.wg)(),(0,s.j4)(n,{key:0,visible:i.showUpdatePopup,"onUpdate:visible":e[3]||(e[3]=t=>i.showUpdatePopup=t),order:a.order},null,8,["visible","order"])):(0,s.kq)("",!0)]))])):(0,s.kq)("",!0)}const XT={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},tV={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},eV=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),aV={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},rV={class:"md:tw-col-span-6 tw-col-span-12"},sV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),iV={class:"md:tw-col-span-6 tw-col-span-12"},lV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),oV={class:"md:tw-col-span-6 tw-col-span-12"},nV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),dV=["value"],wV=["value"],cV={class:"md:tw-col-span-6 tw-col-span-12"},uV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),pV={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},mV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),hV={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},gV={class:"tw-col-span-12"},fV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),vV={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},yV={class:"tw-col-span-12 md:tw-col-span-4"},xV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),_V={class:"tw-col-span-12 md:tw-col-span-8"},bV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),kV={class:"md:tw-col-span-6 tw-col-span-12"},CV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),DV={class:"md:tw-col-span-6 tw-col-span-12"},SV=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),zV=["value"],UV=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),LV={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},PV={key:2,class:"md:tw-col-span-12 tw-col-span-12"},AV={class:"tw-max-w-full tw-overflow-auto"},WV={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},$V={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},EV={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},qV=["src"],OV={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},TV=["onUpdate:modelValue"],VV=(0,s._)("option",{value:0},"Select",-1),FV=["value"],IV={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},RV=["disabled","onUpdate:modelValue"],jV=(0,s._)("option",{value:0},"Select",-1),NV=["value"],MV={key:0},HV={key:1},YV={key:2},ZV={key:3},KV=["value"],BV={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},QV={class:"md:tw-col-span-6 tw-col-span-12"},GV=["onUpdate:modelValue"],JV={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},XV={key:0},tF={key:1,class:"md:tw-col-span-6 tw-col-span-12"},eF=["onUpdate:modelValue"],aF={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},rF={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},sF=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),iF={class:"md:tw-col-span-12 tw-col-span-12"},lF={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},oF=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),nF={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},dF=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),wF={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},cF=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),uF={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},pF=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),mF={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},hF={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},gF=(0,s._)("span",{class:"text-white"}," Cancel ",-1),fF=(0,s._)("span",{class:"text-white"}," Update ",-1);function vF(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[12]||(e[12]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,s.w5)((()=>[o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",XT,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",tV,[eV,(0,s._)("div",aV,[(0,s._)("div",rV,[sV,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.fullname]])]),(0,s._)("div",iV,[lV,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.phone]])]),(0,s._)("div",oV,[nV,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,dV),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,wV)))),128))],512),[[r.bM,l.sale.city]])]),(0,s._)("div",cV,[uV,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.adresse]])]),(0,s._)("div",pV,[mV,(0,s.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onChange:o.handleConfirmationChange,onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported},null,8,["order","id","confirmation","onChange","onReported"]),(0,s._)("div",hV,[(0,s._)("div",gV,[fV,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[r.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",vV,[(0,s._)("div",yV,[xV,(0,s._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",_V,[bV,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[r.nr,l.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",kV,[CV,(0,s.Wm)(w,{"product-ids":o.product_ids,items:o.formatedItems,order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[8]||(e[8]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",DV,[SV,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,zV)))),128))],512),[[r.bM,l.sale.upsell]])]),(0,s.kq)("",!0),UV,l.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",LV," No Order items ")),l.items.length?((0,s.wg)(),(0,s.iD)("div",PV,[(0,s._)("div",AV,[((0,s.wg)(),(0,s.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",WV,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",$V,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",EV,[o.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,qV)):(0,s.kq)("",!0)])])),(0,s._)("th",OV,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[VV,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,FV)))),128))],8,TV),[[r.bM,t.product.id]])])])]),(0,s._)("th",IV,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[jV,o.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(o.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",HV,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",YV,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",ZV,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",MV,"-"))],8,NV)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,KV))],8,RV)),[[r.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",BV,[(0,s._)("div",QV,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,GV),[[r.nr,t.quantity]])])]),(0,s._)("th",JV,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",XV," - ")):((0,s.wg)(),(0,s.iD)("div",tF,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,eF),[[r.nr,t.price]])]))])]),(0,s._)("th",aF,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",rF,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),sF])),_:1},8,["onClick"])])]),(0,s._)("div",iF,[(0,s.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,s._)("div",lF,[oF,(0,s._)("div",nF,[dF,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[11]||(e[11]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.price]])])]),(0,s._)("div",wF,[cF,(0,s._)("div",uF,[pF,(0,s._)("div",mF,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,s._)("div",hF,[(0,s.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[gF])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[fF])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}const yF={class:"tw-relative"},xF=["disabled"],_F=["value"],bF={key:1,class:"tw-relative tw-min-w-[100px] tw-flex tw-items-center"};function kF(t,e,a,i,l,o){return l.fetched?(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.affectation,class:"tw-relative tw-min-w-[100px]"},[(0,s._)("div",null,[(0,s._)("div",yF,[(0,s.wy)((0,s._)("select",{disabled:"confirmer"!=a.confirmation,"onUpdate:modelValue":e[0]||(e[0]=t=>o.affectationValue=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.options,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,_F)))),128))],8,xF),[[r.bM,o.affectationValue]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),[[Bt.L,o.close]]):((0,s.wg)(),(0,s.iD)("div",bF,[(0,s.Wm)(X.t,{class:"tw-animate-spin tw-ml-1 tw-text-orange-500"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})]))}var CF={props:["affectation","id","order","confirmation","items","productIds"],data(){return{fetched:!1,isOpen:!1,isLoading:!1,selectedId:null}},computed:{options(){return[{id:null,firstname:"select",lastname:""},...this.deliveries]},affectationValue:{get(){return this.affectation},set(t){this.$emit("update:affectation",t)}},selected(){const t=[...this.deliveries.map((t=>parseInt(t.id)))];return null!=this.selectedId&&t.includes(parseInt(this.selectedId))?this.options.filter((t=>t.id==this.selectedId))[0]:{id:null,firstname:"select",lastname:""}},users(){return this.$store.getters["user/users"]},allDeliveries(){return this.users.filter((t=>"delivery"==t.role_name))},deliveries(){return this.allDeliveries.filter((t=>t.delivery_products.some((t=>this.productIds.includes(t.product_id)))))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;this.selectedId=t.id,this.isLoading=!0,this.updateOrder(),this.close()},getUsers(){this.fetched=!1,K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.$store.dispatch("user/setFetched",!0),this.fetched=!0}})).catch(this.$handleApiError)}},mounted(){this.selectedId=this.affectation,this.getUsers()}};const DF=(0,d.Z)(CF,[["render",kF]]);var SF=DF,zF={components:{AddOrderConfirmation:Ic,AddOrderAffectation:SF,ProductOffers:wu},props:["visible","order"],data(){return{upsells:Kn,serverUrl:I,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,r)=>{if(0==a.product.id)return a;const s=this.getVariations(a.product)?.variations;return e[r]==t[a]||s.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==s?.length&&(a.product_variation=s[0],a.product_variation_id=s[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,Fa.update(t.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/update",{id:t.id,order:e.data.data.sale}),this.$emit("update:visible",!1),this.$emit("updateOrder",e.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const a=this.products.find((e=>e.id==t));if(!a)return{exists:!1};let r=a.variations.find((t=>t.id==e));return r||(r=a.variations.length>0?a.variations[0]:null),{exists:!0,variation:r}},getProducts(){return er.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const UF=(0,d.Z)(zF,[["render",vF]]);var LF=UF;const PF={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},AF={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[880px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},WF=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),$F={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},EF={class:"md:tw-col-span-6 tw-col-span-12"},qF=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),OF={class:"md:tw-col-span-6 tw-col-span-12"},TF=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),VF={class:"md:tw-col-span-6 tw-col-span-12"},FF=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),IF=["value"],RF=["value"],jF={class:"md:tw-col-span-6 tw-col-span-12"},NF=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),MF={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},HF=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),YF={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},ZF={class:"tw-col-span-12"},KF=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),BF={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},QF={class:"tw-col-span-12 md:tw-col-span-4"},GF=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),JF={class:"tw-col-span-12 md:tw-col-span-8"},XF=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),tI={class:"md:tw-col-span-6 tw-col-span-12"},eI=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),aI={class:"md:tw-col-span-6 tw-col-span-12"},rI=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),sI=["value"],iI=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),lI={key:5,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},oI={key:6,class:"md:tw-col-span-12 tw-col-span-12"},nI={class:"tw-max-w-full tw-overflow-auto"},dI={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},wI={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},cI={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},uI=["src"],pI={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},mI=["onUpdate:modelValue"],hI=(0,s._)("option",{value:0},"Select",-1),gI=["value"],fI={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},vI=["disabled","onUpdate:modelValue"],yI=(0,s._)("option",{value:0},"Select",-1),xI=["value"],_I={key:0},bI={key:1},kI={key:2},CI={key:3},DI=["value"],SI={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},zI={class:"md:tw-col-span-6 tw-col-span-12"},UI=["onUpdate:modelValue"],LI={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},PI={key:0},AI={key:1,class:"md:tw-col-span-6 tw-col-span-12"},WI=["onUpdate:modelValue"],$I={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},EI={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},qI=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),OI={class:"md:tw-col-span-12 tw-col-span-12"},TI={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},VI=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),FI={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},II=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),RI={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},jI=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),NI={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},MI=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),HI={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},YI={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},ZI=(0,s._)("span",{class:"text-white"}," Cancel ",-1),KI=(0,s._)("span",{class:"text-white"}," Update ",-1);function BI(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[16]||(e[16]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,s.w5)((()=>[o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",PF,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",AF,[WF,(0,s._)("div",$F,[(0,s._)("div",EF,[qF,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.fullname]])]),(0,s._)("div",OF,[TF,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.phone]])]),(0,s._)("div",VF,[FF,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,IF),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,RF)))),128))],512),[[r.bM,l.sale.city]])]),(0,s._)("div",jF,[NF,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.adresse]])]),(0,s._)("div",MF,[HF,(0,s.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",YF,[(0,s._)("div",ZF,[KF,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[r.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",BF,[(0,s._)("div",QF,[GF,(0,s._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",JF,[XF,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[r.nr,l.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",tI,[eI,(0,s.Wm)(w,{"product-ids":o.product_ids,items:l.items,order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[8]||(e[8]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",aI,[rI,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,sI)))),128))],512),[[r.bM,l.sale.upsell]])]),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),iI,l.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",lI," No Order items ")),l.items.length?((0,s.wg)(),(0,s.iD)("div",oI,[(0,s._)("div",nI,[((0,s.wg)(),(0,s.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",dI,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",wI,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",cI,[o.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,uI)):(0,s.kq)("",!0)])])),(0,s._)("th",pI,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[hI,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,gI)))),128))],8,mI),[[r.bM,t.product.id]])])])]),(0,s._)("th",fI,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[yI,o.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(o.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",bI,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",kI,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",CI,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",_I,"-"))],8,xI)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,DI))],8,vI)),[[r.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",SI,[(0,s._)("div",zI,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,UI),[[r.nr,t.quantity]])])]),(0,s._)("th",LI,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",PI," - ")):((0,s.wg)(),(0,s.iD)("div",AI,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,WI),[[r.nr,t.price]])]))])]),(0,s._)("th",$I,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",EI,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),qI])),_:1},8,["onClick"])])]),(0,s._)("div",OI,[(0,s.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,s._)("div",TI,[VI,(0,s._)("div",FI,[II,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[15]||(e[15]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.price]])])]),(0,s._)("div",RI,[jI,(0,s._)("div",NI,[MI,(0,s._)("div",HI,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,s._)("div",YI,[(0,s.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[ZI])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[KI])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var QI={components:{AddOrderConfirmation:Ic,AddOrderAffectation:SF,ProductOffers:eg},props:["visible","order"],data(){return{upsells:Kn,serverUrl:I,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!1}}},watch:{product_id(){this.selectedProduct&&this.selectedProduct.variations.length>0?this.product_variation_id=this.selectedProduct.variations[0].id:this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,r)=>{if(0==a.product.id)return a;const s=this.getVariations(a.product)?.variations;return e[r]==t[a]||s.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==s?.length&&(a.product_variation=s[0],a.product_variation_id=s[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city},formatedItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return t}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,order_id:this.order.id,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},update(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;const t={id:this.sale.id,fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};"confirmer"!=t.confirmation&&(t.affectation=null,t.delivery=null),this.isLoading=!0,Fa.update(t.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$emit("update:visible",!1),this.$emit("updateOrder",t.data.data.sale))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.sale={...this.order},this.items=[...this.order.items],this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},getProducts(){return er.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){this.sale={...this.order},this.items=[...this.order.items]}};const GI=(0,d.Z)(QI,[["render",BI]]);var JI=GI,XI={emits:["updateOrder"],components:{UpdateOrder:LF,UpdateDoubleOrder:JI},props:{order:{required:!0},only:{required:!1,default:["update","whatsapp"]},double:{required:!1,default:!1}},name:"orderActions",data(){return{showPopup:!1,showUpdatePopup:!1,isLoading:!1,newOrder:null}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{},mounted(){}};const tR=(0,d.Z)(XI,[["render",JT]]);var eR=tR,aR={props:["order","showNote"],components:{OrderConfirmation:ET,OrderUpsell:IT,OrderAffectation:KT,OrderActions:eR},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return Mi(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,Fa.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${a}`}};const rR=(0,d.Z)(aR,[["render",nT]]);var sR=rR,iR={props:["orders","note"],data(){return{allowedLimit:[5,10,20,50,100,200,500],currentPage:1,paginationLimit:50,todayDate:null,columnsNote:["id","date","client","product","confirmation","affectation","price","city","note","actions"],columnsNormal:["id","date","client","product","confirmation","affectation","price","city","actions"]}},components:{OrderRow:sR},computed:{columns(){return this.note?this.columnsNote:this.columnsNormal},deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{getDeliveries(){K.deliveries().then((t=>{this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date?.split("T")[0]==this.todayDate}},mounted(){0==this.deliveries.length&&this.getDeliveries();const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${a}`,console.log(this.reportedForToday)}};const lR=(0,d.Z)(iR,[["render",qO]]);var oR=lR;const nR={key:0,class:"md:tw-w-[80%] tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},dR={key:1,class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[950px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},wR=(0,s._)("h1",{class:"tw-text-lg"},"Update Order",-1),cR={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},uR={class:"md:tw-col-span-6 tw-col-span-12"},pR=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Client",-1),mR={class:"md:tw-col-span-6 tw-col-span-12"},hR=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Phone",-1),gR={class:"md:tw-col-span-6 tw-col-span-12"},fR=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"City",-1),vR=["value"],yR=["value"],xR={class:"md:tw-col-span-6 tw-col-span-12"},_R=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Address",-1),bR={class:"md:tw-col-span-12 tw-col-span-12 tw-mt-3 tw-border-t tw-border-neutral-300 tw-pt-3"},kR=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Confirmation",-1),CR={class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},DR={class:"tw-col-span-12"},SR=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Note:",-1),zR={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-3 tw-my-3"},UR={class:"tw-col-span-12 md:tw-col-span-4"},LR=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Date:",-1),PR={class:"tw-col-span-12 md:tw-col-span-8"},AR=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Reported Note:",-1),WR={class:"md:tw-col-span-6 tw-col-span-12"},$R=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Affectation",-1),ER={class:"md:tw-col-span-6 tw-col-span-12"},qR=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Upsell",-1),OR=["value"],TR={class:"md:tw-col-span-6 tw-col-span-12 tw-mt-4"},VR={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},FR={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit -tw-rotate-90 tw-scale-75"},IR=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),RR={class:"tw-flex tw-flex-col tw-justify-center"},jR=(0,s._)("p",{class:"tw-col-span-12 tw-mt-5 tw-mb-2"},"Order Items",-1),NR={key:1,class:"tw-col-span-12 tw-rounded tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},MR={key:2,class:"md:tw-col-span-12 tw-col-span-12"},HR={class:"tw-max-w-full tw-overflow-auto"},YR={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},ZR={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},KR={class:"tw-mx-auto tw-w-[50px] tw-h-[35px] tw-shadow tw-shadow-gray-200 tw-rounded tw-overflow-hidden tw-cursor-pointer"},BR=["src"],QR={scope:"row",class:"tw-pr-6 tw-py-2 tw-font-medium tw-text-gray-900"},GR=["onUpdate:modelValue"],JR=(0,s._)("option",{value:0},"Select",-1),XR=["value"],tj={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},ej=["disabled","onUpdate:modelValue"],aj=(0,s._)("option",{value:0},"Select",-1),rj=["value"],sj={key:0},ij={key:1},lj={key:2},oj={key:3},nj=["value"],dj={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},wj={class:"md:tw-col-span-6 tw-col-span-12"},cj=["onUpdate:modelValue"],uj={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},pj={key:0},mj={key:1,class:"md:tw-col-span-6 tw-col-span-12"},hj=["onUpdate:modelValue"],gj={scope:"row",class:"tw-px-6 tw-py-2 tw-font-medium tw-text-gray-900"},fj={class:"tw-w-full tw-col-span-12 tw-flex tw-justify-end tw-mt-3"},vj=(0,s._)("span",{class:"!tw-text-sm !tw-capitalize"},"Add",-1),yj={class:"md:tw-col-span-12 tw-col-span-12"},xj={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},_j=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),bj={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},kj=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-mb-2 tw-whitespace-nowrap"},"Price: ",-1),Cj={class:"md:tw-col-span-12 tw-col-span-12 tw-grid tw-grid-cols-12 tw-mt-5 tw-gap-5"},Dj=(0,s._)("div",{class:"md:tw-col-span-6 tw-col-span-12"},null,-1),Sj={class:"md:tw-col-span-6 tw-col-span-12 tw-flex tw-items-center tw-mb-2 tw-gap-5 tw-justify-end"},zj=(0,s._)("div",{class:"tw-font-medium tw-text-zinc-700 tw-whitespace-nowrap"},"Total Price: ",-1),Uj={class:"tw-text-xl tw-text-green-500 tw-font-bold tw-px-2 tw-py-1 tw-rounded tw-bg-green-100"},Lj={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},Pj=(0,s._)("span",{class:"text-white"}," Cancel ",-1),Aj=(0,s._)("span",{class:"text-white"}," Create ",-1);function Wj(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("AddOrderConfirmation"),w=(0,s.up)("AddOrderAffectation"),c=(0,s.up)("ProductOffers"),u=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(u,{onCancel:e[14]||(e[14]=e=>t.$emit("update:visible",!1)),visible:a.visible},{default:(0,s.w5)((()=>[o.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",nR,[(0,s.Wm)(n)])),o.isLoaded?((0,s.wg)(),(0,s.iD)("div",dR,[wR,(0,s._)("div",cR,[(0,s._)("div",uR,[pR,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sale.fullname=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.fullname]])]),(0,s._)("div",mR,[hR,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sale.phone=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.phone]])]),(0,s._)("div",gR,[fR,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sale.city=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[(0,s._)("option",{disabled:"",value:l.sale.city},(0,Q.zw)(l.sale.city),9,vR),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,yR)))),128))],512),[[r.bM,l.sale.city]])]),(0,s._)("div",xR,[_R,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>l.sale.adresse=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.adresse]])]),(0,s._)("div",bR,[kR,(0,s.Wm)(d,{order:l.sale,id:l.sale.id,confirmation:l.sale.confirmation,"onUpdate:confirmation":e[4]||(e[4]=t=>l.sale.confirmation=t),onConfirmed:e[5]||(e[5]=t=>l.sale.note=t),onReported:o.handleReported,onChange:o.handleConfirmationChange},null,8,["order","id","confirmation","onReported","onChange"]),(0,s._)("div",CR,[(0,s._)("div",DR,[SR,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[6]||(e[6]=t=>l.sale.note=t)},null,512),[[r.nr,l.sale.note]])])]),"reporter"==l.sale.confirmation&&l.sale.reported_agente_date?((0,s.wg)(),(0,s.iD)("div",zR,[(0,s._)("div",UR,[LR,(0,s._)("div",null,(0,Q.zw)(l.sale.reported_agente_date.split("T")[0]),1)]),(0,s._)("div",PR,[AR,(0,s.wy)((0,s._)("textarea",{class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500","onUpdate:modelValue":e[7]||(e[7]=t=>l.sale.reported_agente_note=t)},null,512),[[r.nr,l.sale.reported_agente_note]])])])):(0,s.kq)("",!0)]),(0,s._)("div",WR,[$R,(0,s.Wm)(w,{"product-ids":o.product_ids,items:l.items,"onUpdate:items":e[8]||(e[8]=t=>l.items=t),order:l.sale,confirmation:l.sale.confirmation,affectation:l.sale.affectation,"onUpdate:affectation":e[9]||(e[9]=t=>l.sale.affectation=t),id:l.sale.id},null,8,["product-ids","items","order","confirmation","affectation","id"])]),(0,s._)("div",ER,[qR,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.sale.upsell=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,key:t.id},(0,Q.zw)(t.name),9,OR)))),128))],512),[[r.bM,l.sale.upsell]])]),(0,s.kq)("",!0),(0,s._)("div",TR,[(0,s._)("div",VR,[(0,s._)("label",FR,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=t=>l.sale.counts_from_warehouse=t),class:"tw-sr-only tw-peer"},null,512),[[r.e8,l.sale.counts_from_warehouse]]),IR]),(0,s._)("label",RR,[(0,s._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-orange-500":"tw-text-neutral-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Warehouse",2),(0,s._)("span",{class:(0,Q.C_)([[l.sale.counts_from_warehouse?"tw-text-neutral-500":"tw-text-orange-500"],"tw-ml-1 tw-text-sm tw-font-medium tw-duration-300"])},"Delivery",2)])])]),jR,l.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",NR," No Order items ")),l.items.length?((0,s.wg)(),(0,s.iD)("div",MR,[(0,s._)("div",HR,[((0,s.wg)(),(0,s.iD)("table",{key:l.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",YR,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",ZR,(0,Q.zw)(t),1)],2))),64))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.product.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[((0,s.wg)(),(0,s.iD)("th",{scope:"row",class:"tw-px-2 tw-py-2",key:t.product.id},[(0,s._)("div",KR,[o.product_images[e]?((0,s.wg)(),(0,s.iD)("img",{key:0,class:"tw-w-full tw-h-full tw-object-contain",src:l.serverUrl+"storage/"+o.product_images[e]},null,8,BR)):(0,s.kq)("",!0)])])),(0,s._)("th",QR,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e=>t.product.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[JR,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filtredProducts,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,XR)))),128))],8,GR),[[r.bM,t.product.id]])])])]),(0,s._)("th",tj,[(0,s._)("div",null,[0!=t.product.id?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:0,disabled:1==o.getVariations(t.product)?.variations?.length,"onUpdate:modelValue":e=>t.product_variation.id=e,class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},[aj,o.getVariations(t.product)?.variations?.length>1?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(o.getVariations(t.product)?.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},[t.size||t.color?t.size&&"-"!=t.size&&t.color&&"-"!=t.color?((0,s.wg)(),(0,s.iD)("p",ij,(0,Q.zw)(t.size)+" / "+(0,Q.zw)(t.color),1)):t.size&&"-"!=t.size?((0,s.wg)(),(0,s.iD)("p",lj,(0,Q.zw)(t.size),1)):t.color?((0,s.wg)(),(0,s.iD)("p",oj,(0,Q.zw)(t.color),1)):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",sj,"-"))],8,rj)))),128)):((0,s.wg)(),(0,s.iD)("option",{key:1,value:o.getVariations(t.product)?.variations[0]?.id}," Default ",8,nj))],8,ej)),[[r.bM,t.product_variation.id]]):(0,s.kq)("",!0)])]),(0,s._)("th",dj,[(0,s._)("div",wj,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"Quantity",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-[80px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,cj),[[r.nr,t.quantity]])])]),(0,s._)("th",uj,[(0,s._)("div",null,[null==t.price?((0,s.wg)(),(0,s.iD)("div",pj," - ")):((0,s.wg)(),(0,s.iD)("div",mj,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e=>t.price=e,placeholder:"Price",class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-min-w-[100px] tw-max-w-[150px] tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,8,hj),[[r.nr,t.price]])]))])]),(0,s._)("th",gj,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:e=>o.deleteItem(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])]))])])):(0,s.kq)("",!0),(0,s._)("div",fj,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:o.addNewRow,class:"mr-2 !tw-px-1 !tw-py-1 !tw-pr-2 tw-flex tw-items-center tw-gap-2","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-plus")])),_:1}),vj])),_:1},8,["onClick"])])]),(0,s._)("div",yj,[(0,s.Wm)(c,{"product-ids":o.product_ids},null,8,["product-ids"])]),(0,s._)("div",xj,[_j,(0,s._)("div",bj,[kj,(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=t=>l.sale.price=t),class:"tw-py-1 tw-max-w-[100px] tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sale.price]])])]),(0,s._)("div",Cj,[Dj,(0,s._)("div",Sj,[zj,(0,s._)("div",Uj,(0,Q.zw)(l.currency)+" "+(0,Q.zw)(o.total_price),1)])])]),(0,s._)("div",Lj,[(0,s.Wm)(G.T,{onClick:o.handleCancel,color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[Pj])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[Aj])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}var $j={components:{AddOrderConfirmation:Ic,AddOrderAffectation:Kc,ProductOffers:wu},props:["visible","order"],data(){return{upsells:Kn,serverUrl:I,currency:R,isLoading:!1,isAddItem:!1,product_id:0,product_variation_id:0,warehouse_id:0,quantity:1,item_id:1,items:[],reported_date:null,price:0,sale:{fullname:"",phone:"",city:"",adresse:"",price:0,upsell:null,confirmation:null,counts_from_warehouse:!0}}},watch:{product_id(){this.product_variation_id=0},warehouse_id(){this.product_id=0,this.product_variation_id=0},"sale.confirmation":{deep:!0,handler(t){"confirmer"!=t&&(this.sale.affectation=null,this.sale.delivery=null)}},product_ids:{deep:!0,handler(t,e){this.items.map(((a,r)=>{if(0==a.product.id)return a;const s=this.getVariations(a.product)?.variations;return e[r]==t[a]||s.some((t=>t.id==a.product_variation.id))||(a.product_variation={id:0},a.product_variation_id=0),1==s?.length&&(a.product_variation=s[0],a.product_variation_id=s[0].id),a}))}}},computed:{products(){return this.$store.getters["product/products"]},product_images(){return this.items.map((t=>0==t.product.id?null:this.products.find((e=>e.id==t.product.id))?.image))},product_ids(){return this.items.map((t=>t.product.id))},isLoaded(){return this.$store.getters["product/fetched"]},warehouses(){const t=this.products.flatMap((t=>t.variations.map((t=>t.warehouse)))),e=t.map((t=>t.id));return t.filter(((t,a)=>e.indexOf(t.id)===a))},filtredProducts(){return this.products},cities(){return this.$store.getters["city/cities"]},variations(){return 0==this.product_id?[]:this.products.find((t=>t.id==this.product_id)).variations},selectedProduct(){return this.products.find((t=>t.id==this.product_id))},total_price:{get(){const t=this.items.reduce(((t,e)=>t+(e.price?e.price:0)),0);return parseFloat(this.sale.price?this.sale.price:0)+parseFloat(t)}},isItemsValid(){if(0==this.items.length)return!1;const t=this.items.some((t=>0==t.product.id||0==t.product_variation_id||0==t.quantity));return!t},isFormValid(){return!!this.sale.fullname&&!!this.sale.phone&&!!this.sale.adresse&&this.items.length>0&&!!this.sale.city}},methods:{deleteItem(t){this.items=this.items.filter((e=>e.id!=t))},handleConfirmationChange(){"confirmer"!=this.sale.confirmation&&(this.sale.affectation=null)},addNewRow(){const t={id:this.item_id,product_id:0,product_ref:null,product:{id:0},product_variation:{id:0},product_variation_id:0,quantity:0,price:0};this.items.push(t)},getVariations(t){return this.products.find((e=>e.id==t.id))},formatItems(){const t=this.items.map((t=>{const e=this.products.find((e=>e.id==t.product.id));if(!e)return t;const a=e.variations.find((e=>e.id==t.product_variation.id));return a?{...t,product:e,product_id:e.id,product_variation:a,product_variation_id:a.id,product_ref:e.ref}:t}));return this.items=t,t},addItem(){if([this.product_id,this.product_variation_id].includes(0))return this.$alert({title:"Choose a product",type:"warning"}),!1;const t=this.filtredProducts.find((t=>t.id==this.product_id)),e=this.variations.find((t=>t.id==this.product_variation_id)),a={id:this.item_id,product_id:t.id,product_ref:t.ref,product:t,product_variation:e,product_variation_id:e.id,quantity:this.quantity,price:this.price};this.items.push(a),this.product_id=0,this.product_variation_id=0,this.price=0,this.item_id+=1},create(){if(this.formatItems(),!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;if("annuler"==this.sale.confirmation&&!this.sale.note)return this.$alert({type:"warning",title:"Add Cancellation note."}),!1;if(!this.isItemsValid)return this.$alert({type:"warning",title:"Order Items are not valid"}),!1;this.isLoading=!0;const t={fullname:this.sale.fullname,phone:this.sale.phone,city:this.sale.city,price:this.sale.price,adresse:this.sale.adresse,upsell:this.sale.upsell,counts_from_warehouse:this.sale.counts_from_warehouse,orderItems:this.items,confirmation:this.sale.confirmation,note:this.sale.note,affectation:this.sale.affectation,reported_agente_note:this.sale.reported_agente_note,reported_agente_date:this.sale.reported_agente_date};this.isLoading=!0,Fa.create(t).then((t=>{"SALE_ADDED"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"New Order Added"}),this.$store.dispatch("order/addOrder",t.data.data.sale),this.$emit("update:visible",!1))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},handleCancel(){this.$emit("update:visible",!1)},handleReported(t){this.sale.reported_agente_note=t.reported_agente_note,this.sale.reported_agente_date=t.reported_agente_date},checkVariant(t,e){const a=this.products.find((e=>e.id==t));if(!a)return{exists:!1};let r=a.variations.find((t=>t.id==e));return r||(r=a.variations.length>0?a.variations[0]:null),{exists:!0,variation:r}},getProducts(){return er.all().then((t=>{"SUCCESS"==t.data.code&&(this.$store.dispatch("product/setProducts",t.data.data.products),this.$store.dispatch("product/setFetched",!0))}),(t=>{this.$handleApiError(t)}))}},mounted(){}};const Ej=(0,d.Z)($j,[["render",Wj]]);var qj=Ej,Oj={components:{OrdersTable:oR,AddNewOrder:qj},data(){return{localUrl:F,confirmations:Yn,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:"",showPopup:!1,sorting:{sortBy:null,orderBy:"asc",fields:[{name:"Select",value:null},{name:"ID",value:"id"},{name:"Created At",value:"created_at"}],options:[{name:"Ascending",value:"asc"},{name:"Descending",value:"desc"}]}}},computed:{orders(){return this.$store.getters["order/orders"]},sortedOrders(){const t=this.orders;return t.sort(((t,e)=>{switch(this.sorting.sortBy){case"created_at":return"asc"==this.sorting.orderBy?new Date(t.created_at)-new Date(e.created_at):new Date(e.created_at)-new Date(t.created_at);case"id":return"asc"==this.sorting.orderBy?t.id-e.id:e.id-t.id;default:return!0}}))},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,a=this.upsellFilter;return this.sortedOrders.filter((r=>{if("all"!==t&&r.confirmation!==t)return!1;if("all"!==e&&parseInt(r.affectation)!==parseInt(e))return!1;if("all"!==a&&r.upsell!==a)return!1;const s=((t,e)=>{for(const a in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(r,this.search);return!!s}))}},methods:{async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)},getOrders(){Fa.agenteOrders().then((t=>{if("SUCCESS"==t?.data.code){const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),console.log(t.data),this.isLoaded=!0}})).catch(this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const Tj=(0,d.Z)(Oj,[["render",_O]]);var Vj=Tj;const Fj=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Order"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Order Details")])],-1),Ij={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},Rj={class:""},jj={class:"text-white"},Nj={key:0},Mj={class:"mt-5"},Hj={key:0,class:"tw-py-5"},Yj=(0,s._)("p",{class:"tw-text-neutral-400 tw-text-md"},"Original Order: ",-1),Zj={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Kj={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},Bj=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"px-6 py-3"}," # "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Client "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Phone "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Product "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Price "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," City "),(0,s._)("th",{scope:"col",class:"px-6 py-3"}," Adresse "),(0,s._)("th",{scope:"col",class:"px-6 py-3"},[(0,s._)("span",{class:"sr-only"},"Edit")])])],-1),Qj={class:"tw-bg-white tw-border-b"},Gj={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Jj={scope:"row",class:"px-6 py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},Xj={class:"px-6 py-4 tw-flex tw-items-center"},tN={class:"px-6 py-4"},eN={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},aN={key:0},rN={key:1},sN={class:"px-6 py-4"},iN={class:"px-6 py-4"},lN={class:"px-6 py-4"},oN={class:"px-6 py-4"},nN={class:"tw-flex tw-gap-2 tw-justify-end tw-mt-5"},dN=(0,s._)("span",{class:"text-white"}," Save ",-1),wN={key:1},cN=(0,s._)("p",{class:"tw-text-neutral-400 tw-py-5"},"No Order was found !",-1),uN=[cN];function pN(t,e,a,r,i,l){const o=(0,s.up)("NewOrder"),n=(0,s.up)("UpdateOrder");return(0,s.wg)(),(0,s.iD)("div",null,[Fj,(0,s._)("div",Ij,[(0,s._)("div",Rj,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:l.addOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s._)("span",jj,(0,Q.zw)(i.isLoaded?"Add Order":"Loading..."),1),i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,icon:"mdi-autorenew",class:"ml-2 text-white tw-animate-spin"}))])),_:1},8,["onClick"])]),i.isLoaded&&i.isOrderExists?((0,s.wg)(),(0,s.iD)("div",Nj,[(0,s._)("div",Mj,[i.newOrder.product_name?((0,s.wg)(),(0,s.iD)("div",Hj,[Yj,(0,s._)("p",null,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.newOrder.product_name.split("\n"),(t=>((0,s.wg)(),(0,s.iD)("li",{key:t,class:"tw-font-bold"}," - "+(0,Q.zw)(t),1)))),128))])])])):(0,s.kq)("",!0),(0,s._)("div",Zj,[(0,s._)("table",Kj,[Bj,(0,s._)("tbody",null,[(0,s._)("tr",Qj,[(0,s._)("th",Gj,(0,Q.zw)(i.newOrder.id),1),(0,s._)("th",Jj,(0,Q.zw)(i.newOrder.fullname),1),(0,s._)("td",Xj,[(0,s.Uk)((0,Q.zw)(i.newOrder.phone)+" ",1),(0,s.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+i.newOrder.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"green"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,s._)("td",tN,[(0,s._)("p",null,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.newOrder.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",eN,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",aN,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",rN,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",sN,(0,Q.zw)(l.getPrice(i.newOrder)),1),(0,s._)("td",iN,(0,Q.zw)(i.newOrder.city),1),(0,s._)("td",lN,(0,Q.zw)(i.newOrder.adresse),1),(0,s._)("td",oN,[(i.newOrder.upsell,(0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1}))])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.doubles.filter((t=>t.id!=i.newOrder.id)),(t=>((0,s.wg)(),(0,s.j4)(o,{onUpdate:l.handleDoubleUpdate,order:t,key:t.id},null,8,["onUpdate","order"])))),128))])])])]),(0,s._)("div",nN,[(0,s.Wm)(G.T,{onClick:l.clearOrder,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[dN])),_:1},8,["onClick"])])])):(0,s.kq)("",!0),i.isLoaded&&!i.isOrderExists?((0,s.wg)(),(0,s.iD)("div",wN,uN)):(0,s.kq)("",!0)])]),i.showUpdatePopup?((0,s.wg)(),(0,s.j4)(n,{key:0,onUpdateOrder:l.handleUpdateOrder,visible:i.showUpdatePopup,"onUpdate:visible":e[1]||(e[1]=t=>i.showUpdatePopup=t),order:i.newOrder},null,8,["onUpdateOrder","visible","order"])):(0,s.kq)("",!0)])}const mN={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},hN={class:"tw-px-6 tw-py-4 tw-relative"},gN={class:"tw-absolute tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-text-xs"},fN={class:"tw-bg-purple-500/10 tw-text-purple-500 tw-px-2 tw-rounded-t"},vN={class:"px-6 py-4 tw-flex tw-items-center"},yN={class:"tw-px-6 tw-py-4 tw-relative"},xN={class:"tw-pb-2"},_N={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},bN={key:0},kN={key:1},CN={class:"tw-px-6 tw-py-4"},DN={class:"tw-px-6 tw-py-4"},SN={class:"tw-px-6 tw-py-4"},zN={key:3,class:"tw-px-6 tw-py-4"},UN={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},LN={class:"tw-px-6 tw-py-4"},PN={class:"tw-min-w-[300px]"},AN=(0,s._)("p",null,"Edit note",-1);function WN(t,e,a,r,i,l){(0,s.up)("OrderUpsell"),(0,s.up)("OrderConfirmation"),(0,s.up)("OrderAffectation");const o=(0,s.up)("OrderActions"),n=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[((0,s.wg)(),(0,s.iD)("tr",{key:a.order.id,class:(0,Q.C_)([["reporter"==a.order.confirmation&&"tw-relative",l.isReportedToday(a.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[(0,s._)("th",mN,(0,Q.zw)(l.id),1),(0,s._)("td",hN,[(0,s._)("p",null,(0,Q.zw)(l.fullname),1),(0,s._)("div",gN,[(0,s._)("p",fN," Maybe Double: "+(0,Q.zw)(a.order.double),1)])]),(0,s._)("td",vN,[(0,s.Uk)((0,Q.zw)(a.order.phone)+" ",1),(0,s.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"text",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"green"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])]),(0,s._)("td",yN,[(0,s._)("div",xN,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.order.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",_N,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",bN,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",kN,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s._)("td",CN,(0,Q.zw)(l.getPrice(a.order)),1),(0,s._)("td",DN,(0,Q.zw)(a.order.city),1),(0,s._)("td",SN,(0,Q.zw)(a.order.adresse),1),a.showNote?((0,s.wg)(),(0,s.iD)("td",zN,[(0,s._)("div",UN,[(0,s.Uk)((0,Q.zw)(a.order.note)+" ",1),(0,s.Wm)(X.t,{onClick:l.handleClick,size:"x-small",class:(0,Q.C_)(["tw-ml-2 tw-text-blue-500 tw-cursor-pointer hover:tw-bg-neutral-900/10 tw-rounded-full tw-p-3",{"tw-animate-spin":i.isLoading}])},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isLoading?"mdi-loading":"mdi-pencil"),1)])),_:1},8,["onClick","class"])])])):(0,s.kq)("",!0),(0,s._)("td",LN,[(0,s.Wm)(o,{double:!0,onUpdateOrder:e[0]||(e[0]=e=>t.$emit("update",e)),only:["update"],order:a.order},null,8,["order"])])],2)),(0,s.Wm)(n,{type:"info",title:"Add Note",onResolved:l.handleResolved,loading:i.isLoading,visible:i.showPopup},{default:(0,s.w5)((()=>[(0,s._)("div",PN,[AN,(0,s.Wm)(Pp.z,{modelValue:i.newNote,"onUpdate:modelValue":e[1]||(e[1]=t=>i.newNote=t),variant:"outlined",class:"rounded-md",color:"primary-color"},null,8,["modelValue"])])])),_:1},8,["onResolved","loading","visible"])],64)}var $N={props:["order","showNote"],emits:["update"],components:{OrderConfirmation:ET,OrderUpsell:IT,OrderAffectation:KT,OrderActions:eR},data(){return{showPopup:!1,isLoading:!1,newNote:"",newOrder:null,todayDate:null}},computed:{id(){return this.order.id},fullname(){return this.order.fullname},product_name(){return this.order.product_name},agente_id(){return this.order.agente_id},upsell(){return this.order.upsell},phone(){return this.order.phone},city(){return this.order.city},adresse(){return this.order.adresse},quantity(){return this.order.quantity},price(){return this.order.price},confirmation(){return this.order.confirmation},affectation(){return this.order.affectation},delivery(){return this.order.delivery},note(){return this.order.note},created_at(){return this.order?.created_at}},methods:{getPrice(t){return Mi(t)},handleClick(){this.showPopup=!0,this.newNote=this.note},handleResolved(t){t?(this.showPopup=!1,this.isLoading=!0,Fa.agenteUpdateNote(this.id,this.newNote).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.$store.dispatch("order/updateNote",{note:this.newNote,id:this.id}))}),this.$handleApiError).finally((()=>this.isLoading=!1))):this.showPopup=!1},isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){this.newOrder=this.order;const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${a}`}};const EN=(0,d.Z)($N,[["render",WN]]);var qN=EN,ON={components:{UpdateOrder:LF,NewOrder:qN},data(){return{isOrderExists:!1,isLoaded:!1,isLoading:!1,showUpdatePopup:!1,doubles:[],double:!1,form:{fullname:{valid:!0,message:""},phone:{valid:!0,message:""},city:{valid:!0,message:""},adresse:{valid:!0,message:""},quantity:{valid:!0,message:""},price:{valid:!0,message:""}},newOrder:null,popupOrder:null}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},isFormValid(){return this.form.fullname.valid&&this.form.phone.valid&&this.form.city.valid&&this.form.adresse.valid&&this.form.quantity.valid&&this.form.price.valid},cities(){return this.$store.getters["city/cities"]}},methods:{updateConfirmation(t){this.newOrder.confirmation=t},getPrice(t){return Mi(t)},updateUpsell(t){this.newOrder.upsell=t,this.popupOrder.upsell=t},handleCancel(){this.showUpdatePopup=!1,this.popupOrder={...this.newOrder}},handleUpdateOrder(t){this.newOrder={...t}},validateForm(){this.form.fullname=bt(this.popupOrder.fullname,"Client"),this.form.phone=bt(this.popupOrder.phone,"Phone"),this.form.city=bt(this.popupOrder.city,"City"),this.form.adresse=bt(this.popupOrder.adresse,"Address"),this.form.quantity=bt(this.popupOrder.quantity,"Quantity"),this.form.price=bt(this.popupOrder.price,"Price")},handleDoubleUpdate(t){console.log("order updated: ",t),this.doubles=this.doubles.map((e=>e.id==t.id?t:e))},clearOrder(){return this.newOrder.confirmation?this.double&&this.doubles.some((t=>t.id!=this.newOrder.id&&!t.confirmation))?(this.$alert({type:"warning",title:"Double order confirmation not changed"}),!1):(this.isOrderExists=!1,this.$alert({type:"success",title:"Order Saved Successfully !"}),void this.$store.dispatch("order/addOrder",this.newOrder)):(this.$alert({type:"warning",title:"Order confirmation not changed"}),!1)},updateOrder(){if(this.validateForm(),!this.isFormValid)return!1;this.isLoading=!0,this.newOrder={...this.popupOrder},Fa.update(this.newOrder.id,this.newOrder).then((t=>{"SUCCESS"==t.data.code&&(this.showUpdatePopup=!1,this.$alert({type:"success",title:"Order updated"}),this.$store.dispatch("order/setOrder",this.newOrder))})).catch((t=>{this.$handleApiError(t)})).finally((()=>{this.isLoading=!1}))},addOrder(){this.isLoaded=!1,Fa.agenteAddOrder().then((t=>{if("ORDER_NOT_CONFIRMED"===t.data.code&&this.$alert({type:"warning",title:"Order was not confirmed"}),"SUCCESS"===t.data.code&&(console.log("order exists..."),t.data.data?.orders)){const e=t.data.data.orders;this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),this.isLoaded=!0,1==t.data.data.double?(this.doubles=t.data.data.double_orders,this.double=!0):(this.doubles=[],this.double=!1),this.isOrderExists=!0}"NO_ORDERS"==t.data.code&&(this.isOrderExists=!1)})).catch(this.$handleApiError).finally((()=>{this.isLoaded=!0}))},getOrder(){Fa.agenteGetOrder().then((t=>{if("SUCCESS"===t.data.code){const e=t.data.data.orders[0];this.newOrder=e,this.popupOrder={...e},this.$store.dispatch("order/setOrder",this.order),1==t.data.data.double?(this.doubles=t.data.data.double_orders,this.double=!0):(this.doubles=[],this.double=!1),this.isLoaded=!0,this.isOrderExists=!0}"NO_ORDER"===t.data.code&&(this.isLoaded=!0)}),(t=>{this.$handleApiError(t),this.isLoaded=!0}))},getDeliveries(){K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},async mounted(){this.getOrder(),0==this.deliveries.length&&this.getDeliveries()}};const TN=(0,d.Z)(ON,[["render",pN]]);var VN=TN;const FN={class:"mb-5 tw-flex tw-justify-between tw-items-center"},IN=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Confirmed Orders"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your confirmed orders")],-1),RN={key:0},jN=(0,s._)("span",{class:"text-white"}," Add Sale ",-1),NN={key:0},MN={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},HN={class:"mb-5 tw-flex"},YN={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},ZN={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},KN={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},BN=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Sort By",-1),QN={class:"tw-relative"},GN=["value"],JN={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},XN=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Order By",-1),tM={class:"tw-relative"},eM=["value"],aM={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},rM=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Upsell",-1),sM={class:"tw-relative"},iM=(0,s._)("option",{value:"all"},"Select",-1),lM=(0,s._)("option",{value:"oui"},"Oui",-1),oM=(0,s._)("option",{value:"non"},"Non",-1),nM=[iM,lM,oM],dM={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},wM=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Confirmation",-1),cM={class:"tw-relative"},uM=["value"],pM={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},mM=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Affect",-1),hM={class:"tw-relative"},gM=(0,s._)("option",{value:"all"},"Select",-1),fM=["value"],vM={key:0},yM={key:1,class:""},xM=(0,s._)("p",{class:"tw-text-neutral-400 tw-py-5"},"Your order's list is empty !",-1),_M=[xM];function bM(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("OrdersTable"),w=(0,s.up)("AddNewOrder");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",FN,[IN,l.isLoaded?((0,s.wg)(),(0,s.iD)("div",RN,[(0,s.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),jN])),_:1})])):(0,s.kq)("",!0)]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",NN,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",MN,[(0,s._)("div",HN,[(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",YN,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",ZN,[(0,s._)("div",KN,[BN,(0,s._)("div",QN,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.sorting.sortBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.sorting.fields,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,GN)))),128))],512),[[r.bM,l.sorting.sortBy]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",JN,[XN,(0,s._)("div",tM,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.sorting.orderBy=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.sorting.options,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.value,value:t.value},(0,Q.zw)(t.name),9,eM)))),128))],512),[[r.bM,l.sorting.orderBy]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",aM,[rM,(0,s._)("div",sM,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.upsellFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},nM,512),[[r.bM,l.upsellFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",dM,[wM,(0,s._)("div",cM,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.confirmationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,uM)))),128))],512),[[r.bM,l.confirmationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])]),(0,s._)("div",pM,[mM,(0,s._)("div",hM,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.affectationFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[gM,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,fM)))),128))],512),[[r.bM,l.affectationFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.confirmedOrders.length>0?((0,s.wg)(),(0,s.iD)("div",vM,[(0,s.Wm)(d,{note:!0,orders:o.filteredOrders},null,8,["orders"])])):((0,s.wg)(),(0,s.iD)("div",yM,_M))])):(0,s.kq)("",!0),(0,s.Wm)(w,{onCancel:e[8]||(e[8]=t=>l.showPopup=!1),visible:l.showPopup,"onUpdate:visible":e[9]||(e[9]=t=>l.showPopup=t)},null,8,["visible"])])}var kM={components:{OrdersTable:oR,AddNewOrder:qj},data(){return{localUrl:F,confirmations:Yn,isLoaded:!1,showFilters:!1,confirmationFilter:"all",affectationFilter:"all",upsellFilter:"all",search:"",showPopup:!1,sorting:{sortBy:null,orderBy:"asc",fields:[{name:"Select",value:null},{name:"ID",value:"id"},{name:"Created At",value:"created_at"}],options:[{name:"Ascending",value:"asc"},{name:"Descending",value:"desc"}]}}},computed:{confirmedOrders(){return this.$store.getters["order/orders"]},sortedOrders(){const t=this.confirmedOrders;return t.sort(((t,e)=>{switch(this.sorting.sortBy){case"created_at":return"asc"==this.sorting.orderBy?new Date(t.created_at)-new Date(e.created_at):new Date(e.created_at)-new Date(t.created_at);case"id":return"asc"==this.sorting.orderBy?t.id-e.id:e.id-t.id;default:return!0}}))},deliveries(){return this.$store.getters["user/deliveries"]},filteredOrders(){const t=this.confirmationFilter,e=this.affectationFilter,a=this.upsellFilter;return this.sortedOrders.filter((r=>{if("all"!==t&&r.confirmation!==t)return!1;if("all"!==e&&parseInt(r.affectation)!==parseInt(e))return!1;if("all"!==a&&r.upsell!==a)return!1;const s=((t,e)=>{for(const a in t)if(!["created_at","updated_at","sheets_id","reported_agente_note","reported_agente_note","reported_agente_date","reported_delivery_note","reported_delivery_date"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(r,this.search);return!!s}))}},methods:{getOrders(){Fa.agenteConfirmedOrders().then((t=>{if("SUCCESS"==t?.data.code)if("No Order Confirmed Yet !"==t?.data.data)this.orders=[],this.isLoaded=!0;else{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}})).catch(this.$handleApiError)},async getDeliveries(){await K.deliveries().then((t=>{console.log(t.data.data),this.$store.dispatch("user/setDeliveries",t.data.data)}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getDeliveries(),this.getOrders()}};const CM=(0,d.Z)(kM,[["render",bM]]);var DM=CM,SM={name:"orders",path:"/orders",component:sr,meta:{module:"order"},children:[{name:"order/list",path:"",component:Vj,meta:{module:"order",subModule:"order/list",title:"Orders List",gate:"show_all_orders"}},{name:"order/show",path:"/order",component:VN,meta:{module:"order",subModule:"order/show",title:"Current Order",gate:"show_all_orders"}},{name:"order/confirmed",path:"/orders/confirmed",component:DM,meta:{module:"order",subModule:"order/confirmed",title:"Confirmed Orders",gate:"show_all_orders"}}]};const zM=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Orders")])],-1),UM={key:0},LM={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},PM={key:0,class:"tw-grid tw-grid-cols-12 tw-gap-5"},AM={key:1},WM={class:"tw-min-h-[400px] tw-flex tw-flex-col tw-justify-center tw-items-center"},$M=(0,s._)("p",{class:"tw-font-medium tw-text-neutral-400 tw-text-lg tw-mb-n3"},"No Confirmed orders for now.",-1),EM=["src"];function qM(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation"),n=(0,s.up)("OrderCard");return(0,s.wg)(),(0,s.iD)("div",null,[zM,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",UM,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",LM,[l.orders.length>0?((0,s.wg)(),(0,s.iD)("div",PM,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.filteredOrders,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id,class:"tw-col-span-12 md:tw-col-span-4"},[((0,s.wg)(),(0,s.j4)(n,{order:t,key:t.id},null,8,["order"]))])))),128))])):((0,s.wg)(),(0,s.iD)("div",AM,[(0,s._)("div",WM,[$M,(0,s._)("img",{src:i.localUrl+"images/delivery.jpg",class:"tw-mt-0 tw-mx-auto tw-max-w-[600px] tw-w-full",alt:""},null,8,EM)])]))])):(0,s.kq)("",!0)])}var OM=a(9875),TM=a(1888),VM=a(1334);const FM={class:"tw-text-sm tw-text-orange-500x tw-bg-orange-500x/10 tw-underline tw-underline-offset-2 tw-px-1 tw-w-fit tw-rounded"},IM={class:"tw-w-full tw-whitespace-normal"},RM=(0,s._)("div",{class:"tw-border-b tw-mb-1 tw-border-dashed"},null,-1),jM={class:"tw-flex tw-items-center"},NM={key:0},MM={key:1},HM={class:"tw-min-w-fit tw-w-[25px] tw-h-[25px] tw-flex tw-items-center tw-justify-center tw-text-md tw-font-bold tw-p-1 tw-rounded tw-text-orange-400 tw-bg-orange-400/10"},YM=(0,s._)("span",{class:"tw-text-sm"},"x",-1),ZM={key:0},KM={key:0,class:"tw-px-5 tw-py-2 tw-mt-2 tw-border-neutral-200 tw-border-t tw-border-dashed"},BM=(0,s._)("p",{class:"tw-text-md tw-font-bold tw-text-pink-500"},"NOTE",-1),QM={class:"tw-flex tw-items-center tw-text-gray-500"},GM={class:"tw-flex tw-items-center tw-text-gray-500"};function JM(t,e,a,r,i,l){const o=(0,s.up)("OrderCardDelivery");return(0,s.wg)(),(0,s.j4)(Jr._,{class:(0,Q.C_)(["tw-mx-auto tw-relative tw-border-dashed !tw-shadow-lg !tw-shadow-gray-100/70",[!!a.order.note&&"tw-border-pink-00","livrer"==a.order.delivery&&"tw-border-emerald-400"]]),flat:"",border:""},{default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,Q.C_)(["tw-absolute tw-top-0 tw-right-0 tw-py-1 tw-px-2 tw-rounded-bl tw-text-xs",[l.delivery?.bg,l.delivery?.text]])},(0,Q.zw)(a.order.delivery),3),(0,s.Wm)(OM._,null,{title:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("p",FM,(0,Q.zw)(a.order.city),1),(0,s._)("p",IM,(0,Q.zw)(a.order.adresse),1)]),RM])),_:1}),(0,s.Wm)(TM.Z,{class:"py-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,{align:"center","no-gutters":""},{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",class:"tw-flex tw-items-center tw-flex-wrap tw-text-gray-500"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-account",size:"small",class:"tw-mr-2 tw-text-sm"}),(0,s.Uk)(" "+(0,Q.zw)(a.order.fullname)+" ",1),a.order.note?((0,s.wg)(),(0,s.j4)(X.t,{key:0,icon:"mdi-note-outline",size:"small",class:"tw-ml-2 tw-text-sm !tw-text-pink-500"})):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(nr.D,{cols:"12",class:"tw-text-gray-500 tw-space-y-1 tw-mt-2"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.order.items,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"tw-flex tw-items-center tw-gap-3",key:t.id},[(0,s._)("div",jM,[(0,s._)("span",null,[(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",NM,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),(0,s.Uk)(),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",MM,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])]),(0,s._)("div",null,[(0,s._)("p",HM,[YM,(0,s.Uk)(" "+(0,Q.zw)(t.quantity),1)])])])))),128))])),_:1}),(0,s.Wm)(nr.D,{class:"text-h4 tw-my-3",cols:"12"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(l.getPrice(a.order)),1)])),_:1})])),_:1})])),_:1}),(0,s.kq)("",!0),(0,s.Wm)(Ut.Fx,null,{default:(0,s.w5)((()=>[t.expand?((0,s.wg)(),(0,s.iD)("div",ZM,[a.order.note?((0,s.wg)(),(0,s.iD)("div",KM,[BM,(0,s._)("p",null,(0,Q.zw)(a.order.note),1)])):(0,s.kq)("",!0),(0,s.Wm)(Qe.i,{class:"bg-transparent tw-space-y-2 !tw-px-5 tw-py-3 tw-border-neutral-200 tw-border-dashed tw-border-t tw-mt-5"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",QM,[(0,s.Wm)(X.t,{icon:"mdi-phone",class:"mr-2 tw-text-sm"}),(0,s.Uk)(" "+(0,Q.zw)(a.order.phone),1)])]),(0,s._)("div",null,[(0,s._)("div",GM,[(0,s.Wm)(X.t,{icon:"mdi-calendar",class:"mr-2 tw-text-sm"}),(0,s.Uk)(" "+(0,Q.zw)(a.order.created_at?.split("T")[0].split("-").reverse().join(".")),1)])])])),_:1})])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(Zt.J),(0,s.Wm)(VM.h,{class:"tw-flex tw-justify-end tw-gap-2 tw-flex-wrap"},{default:(0,s.w5)((()=>[(0,s.Wm)(G.T,{class:"tw-capitalize tw-mx-auto tw-bg-orange-500/5 tw-text-orange-500",rounded:"lg",density:"comfortable",icon:"",variant:"flat",onClick:e[0]||(e[0]=e=>t.expand=!t.expand)},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.expand?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])),_:1}),(0,s.Wm)(ea.C),a.order.phone?((0,s.wg)(),(0,s.j4)(G.T,{key:0,link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.order.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-capitalize tw-bg-green-500/5 tw-text-green-500 tw-border tw-border-green-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])):(0,s.kq)("",!0),a.order.phone?((0,s.wg)(),(0,s.j4)(G.T,{key:1,link:"",target:"_blank",href:"tel:"+a.order.phone,class:"tw-capitalize tw-bg-blue-500/5 tw-text-blue-500 tw-border tw-border-blue-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-phone")])),_:1})])),_:1},8,["href"])):(0,s.kq)("",!0),(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=e=>t.confirmPopup=!0),class:"tw-capitalize tw-bg-emerald-500 tw-text-white tw-border tw-border-emerald-500/30",icon:"",rounded:"lg",variant:"flat",density:"comfortable"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-check")])),_:1})])),_:1})])),_:1}),((0,s.wg)(),(0,s.j4)(o,{delivery:a.order.delivery,order:a.order,key:a.order,visible:t.confirmPopup,onCancel:e[2]||(e[2]=e=>t.confirmPopup=!1)},null,8,["delivery","order","visible"]))])),_:1},8,["class"])}const XM={class:"md:tw-w-[80%] tw-overflow-hidden tw-w-[95%] tw-max-w-[550px] tw-mx-auto tw-my-3 tw-min-h-[200px] tw-bg-white tw-rounded-lg tw-shadow-lg"},tH={class:"tw-px-5 tw-pt-5"},eH=(0,s._)("h1",{class:"tw-font-bold tw-text-gray-600"},"Select Status",-1),aH={class:"tw-mt-3 tw-flex tw-gap-3 tw-flex-wrap"},rH=["disabled","onClick"],sH={class:"tw-mt-5 tw-px-5 tw-py-3 tw-bg-gray-50 tw-border-t tw-flex tw-gap-2 tw-justify-end"},iH=(0,s._)("span",{class:"!tw-text-gray-500"},"Cancel",-1),lH=(0,s._)("span",{class:"!tw-text-white"},"Confirm",-1);function oH(t,e,a,r,i,l){const o=(0,s.up)("popup-full"),n=(0,s.up)("OrderReporting");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:l.cancel,visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",XM,[(0,s._)("div",tH,[eH,(0,s._)("div",aH,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryStatus,(e=>((0,s.wg)(),(0,s.iD)("button",{disabled:l.isDisabled(e),onClick:t=>l.handleChange(e),key:e.value,class:(0,Q.C_)([[l.isDisabled(e)&&"tw-saturate-0",e.text,e.bg,e.id==t.delivery&&[e.ring,"tw-ring"]],"tw-px-4 tw-py-2 tw-rounded"])},(0,Q.zw)(e.name),11,rH)))),128))])]),(0,s._)("div",sH,[(0,s.Wm)(G.T,{onClick:l.cancel,class:"!tw-capitalize",color:"grey-lighten-3",flat:""},{default:(0,s.w5)((()=>[iH])),_:1},8,["onClick"]),(0,s.Wm)(G.T,{onClick:l.handleConfirm,loading:t.isLoading,class:"!tw-capitalize",color:"primary-color",flat:""},{default:(0,s.w5)((()=>[lH])),_:1},8,["onClick","loading"])])])])),_:1},8,["onCancel","visible"]),(0,s.Wm)(n,{onOrderReported:l.cancel,order:a.order,visible:t.showPopupReporter,onCancel:e[0]||(e[0]=e=>t.showPopupReporter=!1)},null,8,["onOrderReported","order","visible"])])}const nH={class:"md:tw-max-w-[400px] tw-bg-white tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5 !tw-w-[95%] tw-mx-auto"},dH=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Reported Date",-1),wH=(0,s._)("br",null,null,-1),cH=(0,s._)("p",{class:"tw-text-neutral-600 mb-2"},"Enter Note",-1),uH={class:"tw-flex tw-justify-end tw-mt-2"};function pH(t,e,a,i,l,o){const n=(0,s.up)("VueDatePicker"),d=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:a.order.id},[(0,s.Wm)(d,{type:"info",title:"Add Note","btn-color":"blue",onCancel:e[2]||(e[2]=t=>o.cancel()),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",nH,[dH,(0,s.Wm)(n,{modelValue:l.date,"onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),format:o.format},null,8,["modelValue","format"]),wH,cH,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.note=t),cols:"30",rows:"12",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n        ",512),[[r.nr,l.note]]),(0,s._)("div",uH,[(0,s.Wm)(G.T,{class:"tw-capitalize",loading:l.isLoading,variant:"flat",color:"green",onClick:o.handleConfirm},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var mH={props:["visible","order"],data(){return{isLoading:!1,note:"",date:null,realDate:null,newOrder:null}},methods:{handleConfirm(){if(!this.date)return this.$alert({type:"warning",title:"Please select a date"}),!1;const t={...this.order};t.reported_delivery_date=this.realDate,t.reported_delivery_note=this.note,t.delivery="reporter",this.isLoading=!0,Fa.deliveryUpdateDelivery(t.id,"reporter",t).then((e=>{console.log(e.data),this.$alert({type:"success",title:"Order reported successfully"}),this.$emit("orderReported"),this.$store.dispatch("order/update",{id:t.id,order:t}),this.cancel()}),this.$handleApiError).finally((()=>this.isLoading=!1))},format(t){const e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();return this.realDate=`${i}-${s}-${a}`,`${a}/${s}/${i}`},cancel(){this.$emit("cancel")}},mounted(){console.log(this.order)}};const hH=(0,d.Z)(mH,[["render",pH]]);var gH=hH,fH={props:["visible","order"],components:{OrderReporting:gH},data:()=>({status:Bn,disabled:Qn,delivery:2,isLoading:!1,note:"",showPopupReporter:!1}),computed:{deliveryStatus(){return this.status.filter((t=>!!t.value))},selected(){return this.status.find((t=>t.id==this.delivery))}},watch:{order:{handler(t){this.delivery=this.getDeliveryId(t.delivery)},deep:!0,immediate:!0}},methods:{cancel(){this.getCurrentStatus(),this.$emit("cancel")},isDisabled(t){return this.disabled.includes(t.value)},handleChange(t){if(this.isDisabled(t))return!1;this.delivery=t.id},handleConfirm(){const t=this.selected;if(t.value===this.order.delivery)return this.cancel(),!1;"reporter"!=t.value&&this.updateOrder().then((()=>{this.cancel()})),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,Fa.deliveryUpdateDelivery(this.order.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.order.id,this.selected.value),this.isLoading=!1,this.cancel())}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})},getDeliveryId(t){return this.status.find((e=>e.value==t)).id||0},getCurrentStatus(){this.delivery=this.getDeliveryId(this.order.delivery)}},mounted(){this.getCurrentStatus()}};const vH=(0,d.Z)(fH,[["render",oH]]);var yH=vH,xH={components:{OrderCardDelivery:yH},props:["order"],data:()=>({deliveryStatus:Bn,expand:!1,confirmPopup:!1,labels:[{name:"Telephone",field:"phone",icon:"mdi-phone"},{name:"Date",field:"created_at",icon:"mdi-calendar"}]}),computed:{delivery(){return this.getDeliveryStatus(this.order.delivery)}},methods:{getDeliveryStatus(t){return this.deliveryStatus.find((e=>e.value==t))||this.deliveryStatus[0]},getPrice(t){return Mi(t)}}};const _H=(0,d.Z)(xH,[["render",JM]]);var bH=_H,kH={components:{OrderCard:bH},data(){return{localUrl:F,deliveryStatus:Bn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"].filter((t=>"livrer"!=t.delivery))},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const a=((t,e)=>{for(const a in t)if(!["created_at","updated_at"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!a}))}},methods:{getOrders(){Fa.deliveryOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const CH=(0,d.Z)(kH,[["render",qM]]);var DH=CH;const SH=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Delivered Orders"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Delivered orders list")])],-1),zH={key:0},UH={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},LH={class:"mb-5 tw-flex"},PH={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},AH={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},WH={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},$H=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Delivery",-1),EH={class:"tw-relative"},qH=["value"],OH={key:0,class:""},TH={key:1},VH=(0,s._)("p",null,"No orders for now",-1),FH=[VH];function IH(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("OrdersTable");return(0,s.wg)(),(0,s.iD)("div",null,[SH,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",zH,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",UH,[(0,s._)("div",LH,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",PH,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",AH,[(0,s._)("div",WH,[$H,(0,s._)("div",EH,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.deliveryFilter=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveryStatus,(t=>((0,s.wg)(),(0,s.iD)("option",{key:t.id,value:t.value?t.value:"all"},(0,Q.zw)(t.name),9,qH)))),128))],512),[[r.bM,l.deliveryFilter]]),(0,s.Wm)(X.t,{class:"tw-pointer-events-none tw-absolute tw-right-1 tw-text-neutral-500 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])],2),o.orders.length>0?((0,s.wg)(),(0,s.iD)("div",OH,[(0,s.Wm)(d,{orders:o.filteredOrders},null,8,["orders"])])):((0,s.wg)(),(0,s.iD)("div",TH,FH))])):(0,s.kq)("",!0)])}const RH={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},jH={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},NH={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},MH=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),HH={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},YH={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},ZH={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},KH=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),BH=["value"],QH={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},GH={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},JH={class:"tw-text-white"};function XH(t,e,a,i,l,o){const n=(0,s.up)("OrderRow");return(0,s.wg)(),(0,s.iD)("div",{key:a.orders.length},[(0,s._)("div",RH,[(0,s._)("table",jH,[(0,s._)("thead",NH,[(0,s._)("tr",null,[MH,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",HH,(0,Q.zw)(t),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.orders,(t=>((0,s.wg)(),(0,s.j4)(n,{key:t.id,order:t},null,8,["order"])))),128))])])]),(0,s._)("div",YH,[(0,s._)("div",ZH,[KH,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,BH)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",QH,[(0,s._)("div",GH,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.orders.length:o.nextRange)+" of "+(0,Q.zw)(a.orders.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",JH,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const tY=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),eY={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},aY={class:"tw-px-6 tw-py-4 tw-relative"},rY={key:0},sY={class:"tw-px-6 tw-py-4"},iY={class:"tw-px-6 tw-py-4"},lY={class:"tw-px-6 tw-py-4"},oY={class:"tw-px-6 tw-py-4"},nY={class:"tw-pb-2"},dY={class:"tw-text-orange-500 tw-font-bold tw-pr-1 tw-text-xs"},wY={key:0},cY={key:1},uY={class:"tw-px-6 tw-py-4 tw-relative"},pY={class:"tw-flex tw-items-center tw-justify-center"},mY={class:"tw-flex tw-gap-1"},hY={key:0},gY={class:"tw-px-6 tw-py-4"},fY={class:"tw-px-6 tw-py-4"},vY={class:"tw-px-6 tw-py-4"},yY={class:"tw-max-w-[300px] tw-min-w-[150px] tw-whitespace-normal"},xY={class:"tw-px-6 tw-py-4"};function _Y(t,e,a,r,i,l){const o=(0,s.up)("OrderDelivery"),n=(0,s.up)("OrderActions");return(0,s.wg)(),(0,s.iD)("tr",{key:a.order.id,class:(0,Q.C_)([["reporter"==a.order.delivery&&"tw-relative",l.isReportedToday(a.order)&&"!tw-border tw-border-red-400"],"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"])},[tY,(0,s._)("th",eY,(0,Q.zw)(a.order.id),1),(0,s._)("td",aY,[(0,s.Uk)((0,Q.zw)(a.order?.created_at?.split("T")[0])+" ",1),"reporter"==a.order.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(a.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[l.isReportedToday(a.order)?((0,s.wg)(),(0,s.iD)("span",rY," Reported for today ")):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)]),(0,s._)("td",sY,(0,Q.zw)(a.order.fullname),1),(0,s._)("td",iY,(0,Q.zw)(a.order.adresse),1),(0,s._)("td",lY,(0,Q.zw)(a.order.phone),1),(0,s._)("td",oY,[(0,s._)("div",nY,[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.order.items,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id,class:"tw-font-bold"},[(0,s.Uk)(" - "),(0,s._)("span",dY,(0,Q.zw)(t.quantity)+" X ",1),(0,s.Uk)((0,Q.zw)(t.product.name)+" ",1),t.product_variation.size?((0,s.wg)(),(0,s.iD)("span",wY,"| "+(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0),t.product_variation.color?((0,s.wg)(),(0,s.iD)("span",cY,"| "+(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",uY,[(0,s._)("div",pY,[((0,s.wg)(),(0,s.j4)(o,{class:(0,Q.C_)("reporter"==a.order.delivery&&"tw-mb-1"),order:a.order,id:a.order.id,key:a.order.delivery,delivery:a.order.delivery},null,8,["class","order","id","delivery"])),"reporter"==a.order.delivery?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([l.isReportedToday(a.order)&&"!tw-bg-red-400","tw-text-xs tw-text-white tw-px-1 tw-rounded-t tw-bottom-0 tw-left-1/2 -tw-translate-x-1/2 tw-absolute tw-bg-gray-500"])},[(0,s._)("span",mY,["reporter"==a.order.delivery?((0,s.wg)(),(0,s.iD)("span",hY,[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1}),(0,s._)("span",null,(0,Q.zw)(a.order?.reported_delivery_date?.split("T")[0]),1)])):(0,s.kq)("",!0)])],2)):(0,s.kq)("",!0)])]),(0,s._)("td",gY,(0,Q.zw)(l.getPrice(a.order)),1),(0,s._)("td",fY,(0,Q.zw)(a.order.city),1),(0,s._)("td",vY,[(0,s._)("div",yY,(0,Q.zw)(a.order.note),1)]),(0,s._)("td",xY,[((0,s.wg)(),(0,s.j4)(n,{key:a.order.id,order:a.order},null,8,["order"]))])],2)}const bY={key:0,class:"focus:tw-ring-4 tw-min-w-fit focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between tw-bg-green-500/10 tw-text-green-500"},kY={key:1},CY={class:"tw-py-2 tw-space-y-1 tw-text-sm tw-text-gray-700 tw-max-h-[250px] tw-overflow-y-auto"},DY=["onClick"];function SY(t,e,a,r,i,l){const o=(0,s.up)("OrderReporting");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:a.delivery,class:"tw-relative tw-min-w-[100px]"},["livrer"==a.delivery?((0,s.wg)(),(0,s.iD)("div",bY,(0,Q.zw)(l.selected.name),1)):(0,s.kq)("",!0),"livrer"!=a.delivery?((0,s.wg)(),(0,s.iD)("div",kY,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.toggle&&l.toggle(...t)),class:(0,Q.C_)([[l.selected.text,l.selected.bg,l.selected.ring],"focus:tw-ring-4 tw-min-w-[100px] focus:tw-outline-none tw-font-medium tw-rounded-lg tw-text-sm tw-px-2 tw-py-1 tw-text-center tw-inline-flex tw-items-center tw-justify-between"]),type:"button"},[(0,s.Uk)((0,Q.zw)(l.selected.name)+" ",1),i.isLoading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(X.t,{key:0,class:"tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(i.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})),i.isLoading?((0,s.wg)(),(0,s.j4)(X.t,{key:1,class:"tw-animate-spin tw-ml-1"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)],2),(0,s._)("div",{class:(0,Q.C_)([{"tw-hidden":!i.isOpen},"tw-z-[20] tw-bg-white tw-absolute tw-top-full tw-left-0 tw-divide-y tw-divide-gray-100 tw-rounded-lg tw-shadow tw-w-44"])},[(0,s._)("ul",CY,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.options,(t=>((0,s.wg)(),(0,s.iD)("li",{onClick:e=>!i.disabled.includes(t.value)&&l.handleChange(t),key:t.id},[(0,s._)("a",{class:(0,Q.C_)(["tw-block tw-px-4 tw-py-2",[i.disabled.includes(t.value)?"tw-text-neutral-400/80 tw-bg-neutral-400/10":[t.text,t.bg]]])},(0,Q.zw)(t.name),3)],8,DY)))),128))])],2),(0,s.Wm)(o,{order:a.order,visible:i.showPopupReporter,onCancel:e[1]||(e[1]=t=>i.showPopupReporter=!1)},null,8,["order","visible"])])):(0,s.kq)("",!0)])),[[Bt.L,l.close]])}var zY={props:["delivery","id","order"],components:{OrderReporting:gH},data(){return{isLoading:!1,isOpen:!1,showPopup:!1,nextOption:null,note:"",selectedId:0,allOptions:Bn,disabled:Qn,showPopupReporter:!1}},computed:{options(){return this.allOptions.filter((t=>t.id!==this.selectedId))},selected(){return this.allOptions.filter((t=>t.id==this.selectedId))[0]},availableOptions(){return this.allOptions.map((t=>t.value))}},methods:{close(){this.isOpen=!1},toggle(){this.isOpen=!this.isOpen},handleChange(t){if(t.id===this.selectedId)return!1;"reporter"!=t.value&&(this.selectedId=t.id,this.updateOrder(),this.close()),"reporter"==t.value&&(this.showPopupReporter=!0)},async updateOrder(){return this.isLoading=!0,Fa.deliveryUpdateDelivery(this.id,this.selected.value).then((t=>{"SUCCESS"===t.data.code&&(this.$alert({type:"success",title:t.data.data}),this.updateDelivery(this.id,this.selected.value),this.isLoading=!1)}),(t=>this.$handleApiError(t))).then((()=>this.$emit("update",this.selected.value)))},updateDelivery(t,e){this.$store.dispatch("order/updateDelivery",{id:t,delivery:e})}},mounted(){this.availableOptions.includes(this.delivery)?this.selectedId=this.allOptions.find((t=>t.value==this.delivery)).id:this.selectedId=0}};const UY=(0,d.Z)(zY,[["render",SY]]);var LY=UY;const PY={key:0};function AY(t,e,a,r,i,l){return i.newOrder?((0,s.wg)(),(0,s.iD)("div",PY,[(0,s.Wm)(G.T,{link:"",target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.order.phone.replace("+","").replace("-","").replace(" ",""),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})])),_:1},8,["href"])])):(0,s.kq)("",!0)}var WY={props:["order"],name:"orderActions",data(){return{newOrder:null}},computed:{},methods:{},mounted(){this.newOrder={...this.order}}};const $Y=(0,d.Z)(WY,[["render",AY]]);var EY=$Y,qY={props:["order","showNote"],components:{OrderDelivery:LY,OrderActions:EY},data(){return{showPopup:!1,isLoading:!1,todayDate:null}},methods:{handleClick(){this.showPopup=!0},isReportedToday(t){return"reporter"==t.delivery&&t.reported_delivery_date==this.todayDate},getPrice(t){return Mi(t)}},mounted(){const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${a}`}};const OY=(0,d.Z)(qY,[["render",_Y]]);var TY=OY,VY={props:["orders"],components:{OrderRow:TY},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,todayDate:null,columns:["#","Date","Client","Address","Phone","Product","Delivery","Price","City","Note","Actions"]}},computed:{deliveries(){return this.$store.getters["user/deliveries"]},prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.orders.length/this.paginationLimit)},items(){const t=[...this.reportedForToday,...this.orders.filter((t=>!this.isReportedToday(t)))];return t.slice(this.prevRange,this.nextRange)},reportedForToday(){return this.orders.filter(this.isReportedToday)}},methods:{isReportedToday(t){return"reporter"==t.confirmation&&t.reported_agente_date==this.todayDate}},mounted(){const t=new Date,e=t.getDate(),a=e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),r=t.getMonth()+1,s=r.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),i=t.getFullYear();this.todayDate=`${i}-${s}-${a}`}};const FY=(0,d.Z)(VY,[["render",XH]]);var IY=FY,RY={components:{OrdersTable:IY},data(){return{localUrl:F,deliveryStatus:Bn,isLoaded:!1,showFilters:!1,deliveryFilter:"all",affectationFilter:"all",upsellFilter:"all",search:""}},computed:{orders(){return this.$store.getters["order/orders"]},filteredOrders(){const t=this.deliveryFilter;return this.orders.filter((e=>{if("all"!==t&&e.delivery!==t)return!1;const a=((t,e)=>{for(const a in t)if(!["created_at","updated_at"].includes(a)&&String(t[a]).toLowerCase().includes(e.toLowerCase()))return!0;return!1})(e,this.search);return!!a}))}},methods:{getOrders(){Fa.deliveryDeliveredOrders().then((t=>{const e=t.data.data.orders;this.$store.dispatch("order/setOrders",e),this.isLoaded=!0}),this.$handleApiError)}},mounted(){this.$store.dispatch("order/setOrders",[]),this.getOrders()}};const jY=(0,d.Z)(RY,[["render",IH]]);var NY=jY,MY={name:"deliveries",path:"/deliveries",component:sr,meta:{module:"delivery"},children:[{name:"delivery/list",path:"",component:DH,meta:{module:"delivery",subModule:"delivery/list",title:"Orders List",gate:"all"}},{name:"delivery/delivered",path:"/delivered",component:NY,meta:{module:"delivery",subModule:"delivery/delivered",title:"Delivered Orders List",gate:"all"}}]};const HY=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Inventory State List "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),YY={key:0},ZY={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},KY={class:"mb-5 tw-flex"},BY={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},QY={key:0,class:""};function GY(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("InventoryStateTable");return(0,s.wg)(),(0,s.iD)("div",null,[HY,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",YY,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",ZY,[(0,s._)("div",KY,[(0,s.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",BY,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),o.inventoryState.length>0?((0,s.wg)(),(0,s.iD)("div",QY,[(0,s.Wm)(d,{columns:l.columns,states:o.filteredInventoryState},null,8,["columns","states"])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}class JY{async inventoryStates(){return await Y.getCookie(),M.get("api/inventorystates")}async inventoryMovements(){return await Y.getCookie(),M.get("api/inventorymovements")}async getMovement(t){return await Y.getCookie(),M.get("api/inventorymovements/"+t)}async inventoryMovementCreate({product_id:t,delivery_id:e,variants:a}){return await Y.getCookie(),M.post("api/inventorymovements/new",{product_id:t,delivery_id:e,variations:a})}async inventoryMovementUpdate(t,{product_id:e,delivery_id:a,variants:r,quantity:s}){return await Y.getCookie(),M.post("api/inventorymovements/update/"+t,{product_id:e,delivery_id:a,variants:r,quantity:s})}async deliveryUpdateMovement(t,e,a){return await Y.getCookie(),M.post("api/delivery/inventorymovements/update/"+t,{is_received:e,note:a})}async delete(t){return await Y.getCookie(),M["delete"]("api/inventorymovements/delete/"+t)}}var XY=new JY;const tZ={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},eZ={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},aZ={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},rZ=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),sZ={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},iZ=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),lZ={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},oZ={class:"tw-px-6 tw-py-4 tw-underline tw-underline-offset-1 tw-font-medium"},nZ={class:"tw-px-6 tw-py-4"},dZ={class:"tw-px-6 tw-py-4"},wZ={class:"tw-px-6 tw-py-4 tw-font-bold tw-text-green-500"},cZ={class:"tw-px-6 tw-py-4"},uZ={class:"tw-px-6 tw-py-4"},pZ=(0,s._)("br",null,null,-1),mZ={class:"tw-px-6 tw-py-4"},hZ={class:"mt-5 tw-flex tw-justify-between"},gZ={class:"d-flex align-center"},fZ=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700"},"Show per page: ",-1),vZ={class:"d-flex align-center"},yZ={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},xZ={class:"tw-text-white"};function _Z(t,e,a,r,i,l){const o=(0,s.up)("router-link"),n=(0,s.up)("InventoryStateActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",tZ,[(0,s._)("table",eZ,[(0,s._)("thead",aZ,[(0,s._)("tr",null,[rZ,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",sZ,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.items,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[iZ,(0,s._)("th",lZ,(0,Q.zw)(t.id),1),(0,s._)("td",oZ,[(0,s.Wm)(o,{to:"products/"+t.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.name),1)])),_:2},1032,["to"])]),(0,s._)("td",nZ,(0,Q.zw)(t.buying_price)+" DH ",1),(0,s._)("td",dZ,(0,Q.zw)(t.selling_price)+" DH ",1),(0,s._)("td",wZ,(0,Q.zw)(l.availableQuantity(t)),1),(0,s._)("td",cZ,(0,Q.zw)(t.total_quantity),1),(0,s._)("td",uZ,[(0,s.Uk)((0,Q.zw)(t.updated_at?.split("T")[0])+" ",1),pZ,(0,s.Uk)(" "+(0,Q.zw)(t.updated_at?.split("T")[1].split(".")[0]),1)]),(0,s._)("td",mZ,[(0,s.Wm)(n,{state:t},null,8,["state"])])])))),128))])])]),(0,s._)("div",hZ,[(0,s._)("div",gZ,[fZ,(0,s.Wm)(Lp.r,{"hide-details":!0,modelValue:i.paginationLimit,"onUpdate:modelValue":e[0]||(e[0]=t=>i.paginationLimit=t),items:i.allowedLimit,variant:"outlined",density:"compact",color:"primary-color"},null,8,["modelValue","items"])]),(0,s._)("div",vZ,[(0,s._)("div",yZ,(0,Q.zw)(l.prevRange+1)+" - "+(0,Q.zw)(i.currentPage==l.pageCount?a.states.length:l.nextRange)+" of "+(0,Q.zw)(a.states.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>i.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==i.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",xZ,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}function bZ(t,e,a,r,i,l){const o=(0,s.up)("InventoryStateDetails"),n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",{key:a.state.id,class:"tw-flex tw-items-center"},[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>i.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1}),(0,s.Wm)(n,{visible:i.detailsPopup,onCancel:e[2]||(e[2]=t=>i.detailsPopup=!1)},{default:(0,s.w5)((()=>[i.detailsPopup?((0,s.wg)(),(0,s.j4)(o,{key:0,onCancel:e[1]||(e[1]=t=>i.detailsPopup=!1),state:a.state},null,8,["state"])):(0,s.kq)("",!0)])),_:1},8,["visible"])])}const kZ={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},CZ={class:"tw-p-5"},DZ={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},SZ=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),zZ={class:"tw-w-4 tw-p-4"},UZ={class:"tw-w-4 tw-p-4"},LZ={class:"tw-w-4 tw-p-4"},PZ={class:"tw-w-4 tw-p-4"},AZ={class:"tw-flex tw-items-center tw-gap-1"},WZ={class:"tw-text-green-500"},$Z={key:0},EZ={class:"tw-text-red-400"},qZ=(0,s.uE)('<div class="tw-flex tw-gap-3 mt-5"><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-green-500"></div><span>Available</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-neutral-700"></div><span>Initial</span></div><div class="tw-flex tw-items-center tw-gap-1 tw-text-xs"><div class="tw-w-[10px] tw-h-[10px] tw-rounded-full tw-bg-red-400"></div><span>Not Received</span></div></div>',1);function OZ(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",kZ,[(0,s.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,s._)("div",CZ,[(0,s._)("table",DZ,[SZ,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.state.variations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",zZ,(0,Q.zw)(t.id),1),(0,s._)("td",UZ,(0,Q.zw)(t.size),1),(0,s._)("td",LZ,(0,Q.zw)(t.color),1),(0,s._)("td",PZ,[(0,s._)("div",AZ,[(0,s._)("span",WZ,(0,Q.zw)(t.available_quantity),1),(0,s._)("span",null,"/ "+(0,Q.zw)(t.quantity),1),t.on_hold>0?((0,s.wg)(),(0,s.iD)("span",$Z,[(0,s.Uk)(" / "),(0,s._)("span",EZ,(0,Q.zw)(t.on_hold),1)])):(0,s.kq)("",!0)])])])))),128))])]),qZ])])}var TZ={props:["state"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){console.log(this.state)}};const VZ=(0,d.Z)(TZ,[["render",OZ]]);var FZ=VZ,IZ={props:["rowIndex","state"],components:{InventoryStateDetails:FZ},name:"inventoryStateActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{},mounted(){}};const RZ=(0,d.Z)(IZ,[["render",bZ]]);var jZ=RZ,NZ={props:["columns","states"],components:{InventoryStateActions:jZ},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.states.length/this.paginationLimit)},items(){return this.states.slice(this.prevRange,this.nextRange)}},methods:{availableQuantity(t){let e=0;return t.variations.forEach((t=>{e+=t.available_quantity})),e}}};const MZ=(0,d.Z)(NZ,[["render",_Z]]);var HZ=MZ,YZ={components:{InventoryStateTable:HZ},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"product_name",name:"Product Name"},{prop:"buying_price",name:"Buying Price"},{prop:"selling_price",name:"Selling Price"},{prop:"available",name:"Available"},{prop:"quantity",name:"Quantity"},{prop:"updated_at",name:"Updated At"},{prop:"actions",name:"Actions"}]}},computed:{inventoryState(){return this.$store.getters["inventory/inventoryState"]},filteredInventoryState(){return this.inventoryState.filter((t=>!!(t.ref.toLowerCase().includes(this.search.toLowerCase())||t.name.toLowerCase().includes(this.search.toLowerCase())||t.description.toLowerCase().includes(this.search.toLowerCase()))))}},methods:{async getInventoryStates(){await XY.inventoryStates().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryState",e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryStates()}};const ZZ=(0,d.Z)(YZ,[["render",GY]]);var KZ=ZZ;const BZ=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Add Inventory Movement"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create New Movement")],-1),QZ={key:0},GZ={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},JZ={class:"tw-w-full"},XZ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),tK={class:"tw-relative"},eK=["disabled"],aK=["value"],rK={class:"tw-w-full"},sK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Product Name",-1),iK={class:"tw-relative"},lK=["disabled"],oK=["value"],nK={class:"tw-w-full"},dK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),wK={class:"tw-relative"},cK=["value"],uK={class:"tw-w-full"},pK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),mK={class:"tw-w-full tw-h-full tw-flex tw-items-end"},hK=(0,s._)("span",{class:"text-white text-capitalize"},"Add",-1),gK={class:"tw-max-w-full"},fK={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},vK=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),yK={class:"tw-w-4 tw-p-4"},xK={class:"tw-w-4 tw-p-4"},_K={class:"tw-w-4 tw-p-4"},bK={class:"tw-w-4 tw-p-4"},kK={class:"tw-w-4 tw-p-4"},CK={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},DK={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},SK=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),zK=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function UK(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[BZ,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",QZ,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",GZ,[(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",JZ,[XZ,(0,s._)("div",tK,[(0,s.wy)((0,s._)("select",{disabled:l.selectedVariations.length,"onUpdate:modelValue":e[0]||(e[0]=t=>l.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,aK)))),128))],8,eK),[[r.bM,l.delivery]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",rK,[sK,(0,s._)("div",iK,[(0,s.wy)((0,s._)("select",{disabled:l.selectedVariations.length>0,"onUpdate:modelValue":e[1]||(e[1]=t=>l.product=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,oK)))),128))],8,lK),[[r.bM,l.product]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",nK,[dK,(0,s._)("div",wK,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.color+" - "+t.size+"  ("+t.available_quantity+" items)"),9,cK)))),128))],512),[[r.bM,l.variation]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,s.w5)((()=>[(0,s._)("div",uK,[pK,(0,s._)("div",null,[(0,s.Wm)(tt.hw,{type:"number",onChange:o.handleQuantityChange,"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>l.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,s.w5)((()=>[(0,s._)("div",mK,[(0,s.Wm)(G.T,{onClick:o.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[hK])),_:1},8,["onClick"])])])),_:1}),(0,s.Wm)(nr.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",gK,[(0,s._)("table",fK,[vK,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.selectedVariations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",yK,(0,Q.zw)(t.id),1),(0,s._)("td",xK,(0,Q.zw)(t.size),1),(0,s._)("td",_K,(0,Q.zw)(t.color),1),(0,s._)("td",bK,(0,Q.zw)(t.quantity),1),(0,s._)("td",kK,[(0,s._)("div",CK,[(0,s.Wm)(G.T,{onClick:e=>o.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,s._)("div",DK,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[SK])),_:1}),(0,s.Wm)(G.T,{onClick:o.create,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[zK])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var LK={data(){return{isLoading:!1,isLoaded:!1,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((a=>{t.id==a.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.available_quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.available_quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},create(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,XY.inventoryMovementCreate({product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.selectedVariations=[],this.getData()),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await K.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return XY.inventoryStates().then((t=>{if("SHOW_ALL_INVENTORY_STATES"==t.data.code){const e=t.data.data;if(this.$store.dispatch("product/setProducts",e),e.length>0){const t=e[0];this.product=t.id,this.variations.length>0&&(this.variation=this.variations[0].id)}else this.product=null}}),(t=>{this.$handleApiError(t)}))},getData(){this.isLoaded=!1,Promise.allSettled([this.getProducts(),this.getDeliveries()]).then((()=>{this.isLoaded=!0}))}},mounted(){this.getData()}};const PK=(0,d.Z)(LK,[["render",UK]]);var AK=PK;const WK=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Inventory Movement"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Edit an existing Movement")],-1),$K={key:0},EK={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},qK={class:"tw-w-full"},OK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),TK={class:"tw-relative"},VK=["value"],FK={class:"tw-w-full"},IK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Variation",-1),RK={class:"tw-relative"},jK=["value"],NK={class:"tw-w-full"},MK=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Quantity",-1),HK={class:"tw-w-full tw-h-full tw-flex tw-items-end"},YK=(0,s._)("span",{class:"text-white text-capitalize"},"Add",-1),ZK={class:"tw-max-w-full"},KK={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},BK=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate tw-max-w-[50px]"}," ACTIONS ")])],-1),QK={class:"tw-w-4 tw-p-4"},GK={class:"tw-w-4 tw-p-4"},JK={class:"tw-w-4 tw-p-4"},XK={class:"tw-w-4 tw-p-4"},tB={class:"tw-w-4 tw-p-4"},eB={class:"tw-w-fit tw-h-full tw-flex tw-items-end"},aB={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},rB=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),sB=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function iB(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[WK,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",$K,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",EK,[(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",qK,[OK,(0,s._)("div",TK,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.delivery=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-capitalize tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.firstname+" "+t.lastname),9,VK)))),128))],512),[[r.bM,l.delivery]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",FK,[IK,(0,s._)("div",RK,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.variation=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-cursor-pointer tw-border-neutral-400 focus:tw-border-orange-500"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.variations,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.color+" / "+t.size+" / "+t.quantity),9,jK)))),128))],512),[[r.bM,l.variation]]),(0,s.Wm)(X.t,{size:"small",class:"tw-absolute tw-right-3 tw-top-1/2 -tw-translate-y-1/2"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-chevron-down")])),_:1})])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"4",md:"4"},{default:(0,s.w5)((()=>[(0,s._)("div",NK,[MK,(0,s._)("div",null,[(0,s.Wm)(tt.hw,{type:"number",onChange:o.handleQuantityChange,"hide-details":!0,modelValue:l.quantity,"onUpdate:modelValue":e[2]||(e[2]=t=>l.quantity=t),"clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["onChange","modelValue"])])])])),_:1}),(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"2",md:"2"},{default:(0,s.w5)((()=>[(0,s._)("div",HK,[(0,s.Wm)(G.T,{onClick:o.addVariation,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[YK])),_:1},8,["onClick"])])])),_:1}),(0,s.Wm)(nr.D,{cols:"12"},{default:(0,s.w5)((()=>[(0,s._)("div",ZK,[(0,s._)("table",KK,[BK,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.selectedVariations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",QK,(0,Q.zw)(t.id),1),(0,s._)("td",GK,(0,Q.zw)(t.size),1),(0,s._)("td",JK,(0,Q.zw)(t.color),1),(0,s._)("td",XK,(0,Q.zw)(t.quantity),1),(0,s._)("td",tB,[(0,s._)("div",eB,[(0,s.Wm)(G.T,{onClick:e=>o.deleteVariation(t.id),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:2},1032,["onClick"])])])])))),128))])])])])),_:1})])),_:1})]),(0,s._)("div",aB,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[rB])),_:1}),(0,s.Wm)(G.T,{onClick:o.update,loading:l.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[sB])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var lB={data(){return{isLoading:!1,isLoaded:!1,movement:null,variationId:0,product:1,delivery:1,quantity:0,variation:0,selectedVariations:[]}},computed:{products(){return this.$store.getters["product/products"]},deliveries(){return this.$store.getters["user/deliveries"]},id(){return this.$route.params.id},variations(){return this.products.find((t=>t.id==this.product))?.variations.filter((t=>{let e=!0;return this.selectedVariations.forEach((a=>{t.id==a.id&&(e=!1)})),e}))}},watch:{product(){this.variations.length>0?this.variation=this.variations[0].id:this.variation=null}},methods:{addVariation(){if(0==this.variations.length)return!1;const t=this.variations.find((t=>t.id==this.variation));if(!t)return!1;if(this.quantity>t.quantity||0==this.quantity)return this.$alert({type:"warning",title:"Quantity should be between 1 and "+t.quantity}),!1;const e={id:t.id,size:t.size,color:t.color,quantity:this.quantity};this.quantity=0,this.selectedVariations.push(e),this.variations.length>0?this.variation=this.variations[0].id:this.variation=null},deleteVariation(t){this.selectedVariations=this.selectedVariations.filter((e=>e.id!==t)),1==this.variations.length&&(this.variation=this.variations[0].id)},update(){if(0==this.selectedVariations.length)return this.$alert({type:"warning",title:"You need to add some variations"}),!1;let t=0;this.selectedVariations.forEach((e=>t+=e.quantity)),this.isLoading=!0,XY.inventoryMovementUpdate(this.id,{product_id:this.product,delivery_id:this.delivery,variants:this.selectedVariations,quantity:this.qty}).then((t=>{"SUCCESS"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"ERROR_QUANTITY"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).finally((()=>this.isLoading=!1))},handleQuantityChange(){this.quantity<=0&&(this.quantity=0)},async getDeliveries(){await K.deliveries().then((t=>{const e=t.data.data;this.$store.dispatch("user/setDeliveries",e),e.length>0?this.delivery=e[0].id:this.delivery=null}),this.$handleApiError)},getProducts(){return er.all().then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.products;this.$store.dispatch("product/setProducts",e),e.length>0?this.product=e[0].id:this.product=null}}),(t=>{this.$handleApiError(t)}))},getMovement(){return XY.getMovement(this.id).then((t=>{if("SUCCESS"==t.data.code){const e=t.data.data.movement;this.product=e.product.id,this.delivery=e.delivery.id,this.selectedVariations=e.inventory_movement_variations;let a=0;this.selectedVariations.forEach((t=>{a+=t.quantity})),this.quantity_total=a}}),(t=>{this.$handleApiError(t)}))}},mounted(){Promise.allSettled([this.getProducts(),this.getDeliveries(),this.getMovement()]).then((()=>{this.isLoaded=!0}))}};const oB=(0,d.Z)(lB,[["render",iB]]);var nB=oB;const dB=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Inventory State List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"See your inventory state")])],-1),wB={key:0},cB={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},uB={class:"mb-5 tw-flex"},pB={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},mB={key:0,class:""};function hB(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("InventoryMovementsTable");return(0,s.wg)(),(0,s.iD)("div",null,[dB,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",wB,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",cB,[(0,s._)("div",uB,[(0,s.Wm)(G.T,{icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white !tw-w-0 !tw-overflow-hidden"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",pB,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-w-full tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),o.inventoryMovements.length>0?((0,s.wg)(),(0,s.iD)("div",mB,[(0,s.Wm)(d,{columns:l.columns,movements:o.inventoryMovements},null,8,["columns","movements"])])):(0,s.kq)("",!0)])):(0,s.kq)("",!0)])}const gB={class:"tw-relative tw-min-h-[400px] tw-overflow-x-auto tw-overflow-y-visible sm:tw-rounded-lg"},fB={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},vB={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},yB=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),xB={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},_B=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),bB={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},kB={class:"tw-px-6 tw-py-4"},CB=(0,s._)("br",null,null,-1),DB={class:"tw-px-6 tw-py-4"},SB={class:"tw-px-6 tw-py-4"},zB={class:"tw-px-6 tw-py-4"},UB={class:"tw-px-6 tw-py-4"},LB={class:"tw-px-6 tw-py-4"},PB={class:"tw-w-[200px] !tw-whitespace-normal"},AB={class:"tw-px-6 tw-py-4"},WB={class:"tw-px-6 tw-py-4"},$B={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},EB={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},qB=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),OB=["value"],TB={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},VB={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},FB={class:"tw-text-white"};function IB(t,e,a,i,l,o){const n=(0,s.up)("router-link"),d=(0,s.up)("InventoryMovementsActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",gB,[(0,s._)("table",fB,[(0,s._)("thead",vB,[(0,s._)("tr",null,[yB,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",xB,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.movements,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:e,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[_B,(0,s._)("th",bB,(0,Q.zw)(t.id),1),(0,s._)("td",kB,[(0,s.Uk)((0,Q.zw)(t.created_at?.split("T")[0])+" ",1),CB,(0,s.Uk)(" "+(0,Q.zw)(t.created_at?.split("T")[1].split(".")[0]),1)]),(0,s._)("td",DB,(0,Q.zw)(t.delivery.firstname+" "+t.delivery.lastname),1),(0,s._)("td",SB,[(0,s.Wm)(n,{to:"products/"+t.product.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(t.product.name),1)])),_:2},1032,["to"])]),(0,s._)("td",zB,(0,Q.zw)(o.quantityTotal(t.inventory_movement_variations)),1),(0,s._)("td",UB,[(0,s._)("div",{class:(0,Q.C_)([[t.is_received?"tw-text-green-500 tw-bg-green-500/10":"tw-text-red-500 tw-bg-red-500/10"],"tw-flex tw-justify-center tw-py-1 tw-rounded-lg tw-items-center"])},[(0,s._)("span",null,(0,Q.zw)(t.is_received?"Yes":"No"),1)],2)]),(0,s._)("td",LB,[(0,s._)("div",PB,(0,Q.zw)(t.note?t.note:"-"),1)]),(0,s._)("td",AB,(0,Q.zw)(t.delivery.city?.name),1),(0,s._)("td",WB,[(0,s.Wm)(d,{movement:t},null,8,["movement"])])])))),128))])])]),(0,s._)("div",$B,[(0,s._)("div",EB,[qB,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,OB)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",TB,[(0,s._)("div",VB,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.movements.length:o.nextRange)+" of "+(0,Q.zw)(a.movements.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",FB,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const RB={class:"md:tw-w-[50%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},jB=(0,s._)("h1",{class:"tw-text-lg tw-font-medium tw-text-blue-500"},"Confirmation",-1),NB={class:"mt-3"},MB=(0,s._)("h2",{class:"mb-2"},"Received",-1),HB={class:"tw-mt-3"},YB=(0,s._)("h2",{class:"tw-text-md mb-1"},"Add note",-1),ZB={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},KB=(0,s._)("span",{class:"text-white"}," Cancel ",-1),BB=(0,s._)("span",{class:"text-white"}," Update ",-1);function QB(t,e,a,i,l,o){const n=(0,s.up)("popup-full"),d=(0,s.up)("MovementDetails"),w=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",{key:a.movement.id,class:"tw-flex tw-items-center"},[["delivery","admin"].includes(o.user.role)?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>l.confirmPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"green",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-checkbox-marked-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.kq)("",!0),(t.$can("view_inventory_movement"),(0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[1]||(e[1]=t=>l.detailsPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-eye-outline")])),_:1})])),_:1})),t.$can("delete_inventory_movement")?((0,s.wg)(),(0,s.j4)(G.T,{key:3,onClick:e[2]||(e[2]=t=>l.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("confirmation_inventory_movement")?((0,s.wg)(),(0,s.j4)(n,{key:4,visible:l.confirmPopup,onCancel:e[6]||(e[6]=t=>l.confirmPopup=!1)},{default:(0,s.w5)((()=>[(0,s._)("div",RB,[jB,(0,s._)("div",NB,[MB,(0,s.Wm)(fo.G,{density:"compact","hide-details":!0,modelValue:l.isConfirmed,"onUpdate:modelValue":e[3]||(e[3]=t=>l.isConfirmed=t),color:"blue"},null,8,["modelValue"])]),(0,s._)("div",HB,[YB,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.note=t),cols:"30",rows:"3",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-600 focus:tw-border-orange-500"},"\r\n\r\n              ",512),[[r.nr,l.note]])]),(0,s._)("div",ZB,[(0,s.Wm)(G.T,{onClick:e[5]||(e[5]=t=>l.confirmPopup=!1),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[KB])),_:1}),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.updateMovement,color:"blue",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[BB])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])):(0,s.kq)("",!0),(0,s.Wm)(n,{visible:l.detailsPopup,onCancel:e[8]||(e[8]=t=>l.detailsPopup=!1)},{default:(0,s.w5)((()=>[l.detailsPopup?((0,s.wg)(),(0,s.j4)(d,{key:0,onCancel:e[7]||(e[7]=t=>l.detailsPopup=!1),movement:a.movement},null,8,["movement"])):(0,s.kq)("",!0)])),_:1},8,["visible"]),(0,s.Wm)(w,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this movement?</p> You won't be able to revert this!",loading:l.isLoading,visible:l.showPopup,onResolved:o.handleResolved},null,8,["loading","visible","onResolved"])])}const GB={class:"md:tw-w-[50%] tw-relative tw-max-h-full tw-w-[95%] tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg"},JB={class:"tw-p-5"},XB={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-rounded-md tw-overflow-hidden"},tQ=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-4 tw-max-w-[50px] tw-py-3 text-truncate"}," ID "),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3 text-truncate"}," SIZE "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," COLOR "),(0,s._)("th",{scope:"col",class:"tw-px-4 tw-py-3 text-truncate"}," QUANTITY ")])],-1),eQ={class:"tw-w-4 tw-p-4"},aQ={class:"tw-w-4 tw-p-4"},rQ={class:"tw-w-4 tw-p-4"},sQ={class:"tw-w-4 tw-p-4"};function iQ(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",GB,[(0,s.Wm)(G.T,{onClick:l.cancel,icon:"mdi-close",variant:"flat",size:"w-small",color:"red",class:"tw-absolute tw-top-3 tw-z-10 tw-right-3"},null,8,["onClick"]),(0,s._)("div",JB,[(0,s._)("table",XB,[tQ,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.movement.inventory_movement_variations,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[(0,s._)("td",eQ,(0,Q.zw)(t.id),1),(0,s._)("td",aQ,(0,Q.zw)(t.product_variation.size),1),(0,s._)("td",rQ,(0,Q.zw)(t.product_variation.color),1),(0,s._)("td",sQ,(0,Q.zw)(t.quantity),1)])))),128))])])])])}var lQ={props:["movement"],data(){return{}},computed:{},methods:{cancel(){this.$emit("cancel")}},mounted(){}};const oQ=(0,d.Z)(lQ,[["render",iQ]]);var nQ=oQ,dQ={props:["rowIndex","movement"],components:{MovementDetails:nQ},name:"inventoryActions",data(){return{showPopup:!1,confirmPopup:!1,detailsPopup:!1,isConfirmed:!1,note:"",isLoading:!1}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleResolved(t){t?(this.isLoading=!0,XY["delete"](this.movement.id).then((t=>{"SUCCESS"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Inventory Movement Deleted Successfully"})),this.getMovements()})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1},updateMovement(){this.isLoading=!0,XY.deliveryUpdateMovement(this.movement.id,this.isConfirmed?1:0,this.note).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({type:"success",title:"Inventory Movement Updated Successfully"}),this.getMovements())}),this.$handleApiError).finally((()=>{this.isLoading=!1,this.confirmPopup=!1}))},getMovements(){XY.inventoryMovements().then((t=>{if("SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e)}})).catch(this.$handleApiError)}},mounted(){this.note=this.movement.note,this.isConfirmed=1==this.movement.is_received}};const wQ=(0,d.Z)(dQ,[["render",QB]]);var cQ=wQ,uQ={props:["columns","movements"],components:{InventoryMovementsActions:cQ},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.movements.length/this.paginationLimit)},items(){return this.movements.slice(this.prevRange,this.nextRange)}},methods:{quantityTotal(t){let e=0;return t.forEach((t=>{e+=t.quantity})),e}}};const pQ=(0,d.Z)(uQ,[["render",IB]]);var mQ=pQ,hQ={components:{InventoryMovementsTable:mQ},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,search:"",columns:[{prop:"id",name:"#"},{prop:"created_at",name:"Date"},{prop:"delivery",name:"Delivery"},{prop:"product",name:"Product"},{prop:"quantity",name:"Quantity"},{prop:"received",name:"Received"},{prop:"note",name:"Note"},{prop:"city",name:"City"},{prop:"actions",name:"Actions"}]}},computed:{inventoryMovements(){return this.$store.getters["inventory/inventoryMovements"]},filteredInventoryState(){return this.inventoryMovements.filter((()=>!0))}},methods:{async getInventoryMovements(){await XY.inventoryMovements().then((t=>{if(console.log(t.data.data),"SHOW_ALL_INVENTORY_MOVEMENTS"==t.data.code){const e=t.data.data;this.$store.dispatch("inventory/setInventoryMovements",e),console.log(e)}}),this.$handleApiError).finally((()=>{this.isLoaded=!0}))}},async mounted(){this.getInventoryMovements()}};const gQ=(0,d.Z)(hQ,[["render",hB]]);var fQ=gQ,vQ={name:"inventory/list",path:"/inventories",component:sr,meta:{module:"inventory"},children:[{name:"inventory/state",path:"",component:KZ,meta:{module:"inventory",subModule:"inventory/list",title:"Inventory State",gate:"show_all_inventory_states"}},{name:"inventory/movememnts",path:"movements",component:fQ,meta:{module:"inventory",subModule:"inventory/movements",title:"Inventory Movements",gate:"show_all_inventory_movements"}},{name:"inventory/add",path:"add",component:AK,meta:{module:"inventory",subModule:"inventory/add",title:"Add Inventory Movement",gate:"create_inventory_movement"}},{name:"inventory/update",path:"update/:id",component:nB,meta:{module:"inventory",subModule:"inventory/update",title:"Update Inventory Movement",gate:"update_inventory_movement"}}]};const yQ={class:"mb-5 tw-flex tw-justify-between tw-items-center"},xQ=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Shop List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your shops")],-1),_Q={key:0},bQ=(0,s._)("span",{class:"text-white"}," Add Shop ",-1),kQ={key:0},CQ={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},DQ={class:"mb-5 tw-flex"},SQ={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},zQ={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},UQ={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},LQ=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),PQ={class:"tw-relative"},AQ={class:""};function WQ(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("ShopsTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.shops.length},[(0,s._)("div",yQ,[xQ,t.$can("create_shop")?((0,s.wg)(),(0,s.iD)("div",_Q,[(0,s.Wm)(G.T,{color:"primary-color",link:"",to:{name:"shop/add"},variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),bQ])),_:1})])):(0,s.kq)("",!0)]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",kQ,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",CQ,[(0,s._)("div",DQ,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",SQ,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",zQ,[(0,s._)("div",UQ,[LQ,(0,s._)("div",PQ,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[r.nr,l.date]])])])])],2),(0,s._)("div",AQ,[(0,s.Wm)(d,{columns:l.columns,shops:o.filteredShops},null,8,["columns","shops"])])])):(0,s.kq)("",!0)])}class $Q{async create(t){return await Y.getCookie(),M.post("api/shops/new",{name:t.name})}async update(t,e){return await Y.getCookie(),M.post("api/shops/update/"+t,{name:e.name})}async all(){return await Y.getCookie(),M.get("api/shops")}async getShop(t){return await Y.getCookie(),M.get("api/shops/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/shops/delete/"+t)}}var EQ=new $Q;const qQ={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},OQ={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},TQ={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},VQ=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),FQ={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},IQ=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),RQ={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},jQ={class:"tw-px-6 tw-py-4"},NQ={class:"tw-px-6 tw-py-4"},MQ={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},HQ={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},YQ={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},ZQ=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),KQ=["value"],BQ={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},QQ={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},GQ={class:"tw-text-white"};function JQ(t,e,a,i,l,o){const n=(0,s.up)("ShopActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",qQ,[(0,s._)("table",OQ,[(0,s._)("thead",TQ,[(0,s._)("tr",null,[VQ,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",FQ,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.shops,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[IQ,(0,s._)("th",RQ,(0,Q.zw)(t.id),1),(0,s._)("td",jQ,(0,Q.zw)(t.name),1),(0,s._)("td",NQ,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,s._)("td",MQ,[(0,s.Wm)(n,{shop:t},null,8,["shop"])])])))),128))])])]),(0,s._)("div",HQ,[(0,s._)("div",YQ,[ZQ,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,KQ)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",BQ,[(0,s._)("div",QQ,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.shops.length:o.nextRange)+" of "+(0,Q.zw)(a.shops.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",GQ,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const XQ={class:"tw-flex tw-items-center tw-gap-1"};function tG(t,e,a,r,i,l){const o=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",XQ,[t.$can("update_shop")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,to:"/shops/update/"+a.shop.id,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1},8,["to"])):(0,s.kq)("",!0),t.$can("delete_shop")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this shop?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}var eG={props:["rowIndex","shop"],name:"shopActions",data(){return{showPopup:!1,isLoading:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,EQ["delete"](this.shop.id).then((t=>{"SHOP_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Shop Deleted Successfully"})),EQ.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)})).catch(this.$handleApiError)})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const aG=(0,d.Z)(eG,[["render",tG]]);var rG=aG,sG={props:["columns","shops"],components:{ShopActions:rG},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.shops.length/this.paginationLimit)},items(){return this.shops.slice(this.prevRange,this.nextRange)}},methods:{}};const iG=(0,d.Z)(sG,[["render",JQ]]);var lG=iG,oG={components:{ShopsTable:lG},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,date:null,search:"",columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{shops(){return this.$store.getters["shop/shops"]},filteredShops(){const t=this.date;return this.shops.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){EQ.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("shop/setShops",t.data.data.shops)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const nG=(0,d.Z)(oG,[["render",WQ]]);var dG=nG;const wG=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"}," Add Shop "),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Create new shop")],-1),cG={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},uG={class:"tw-w-full"},pG=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Shop Name ",-1),mG={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},hG={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},gG=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),fG=(0,s._)("span",{class:"text-white text-capitalize"},"Create",-1);function vG(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[wG,(0,s._)("div",cG,[(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",uG,[pG,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:i.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",mG,(0,Q.zw)(i.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,s._)("div",hG,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[gG])),_:1}),(0,s.Wm)(G.T,{onClick:l.create,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[fG])),_:1},8,["onClick","loading"])])])])}var yG={components:{},data(){return{isLoading:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;EQ.create(t).then((t=>{"SHOP_CREATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.shop={name:""}),"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.shop.name,"Shop name"),this.formStatus.name.valid}}};const xG=(0,d.Z)(yG,[["render",vG]]);var _G=xG;const bG=(0,s._)("div",{class:"mb-5"},[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Update Shop"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Update shop informations")],-1),kG={key:0},CG={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},DG={class:"tw-flex tw-gap-2 tw-text-neutral-800 tw-items-center tw-mb-5"},SG={class:"tw-block tw-py-1 tw-px-2 tw-rounded-md text-primary-color"},zG={class:"tw-w-full"},UG=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Shop Name",-1),LG={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},PG={class:"mt-8 tw-flex tw-justify-end tw-gap-3"},AG=(0,s._)("span",{class:"text-white text-capitalize"},"Cancel",-1),WG=(0,s._)("span",{class:"text-white text-capitalize"},"Update",-1);function $G(t,e,a,r,i,l){const o=(0,s.up)("LoadingAnimation");return(0,s.wg)(),(0,s.iD)("div",null,[bG,i.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",kG,[(0,s.Wm)(o)])),i.isLoaded?((0,s.wg)(),(0,s.iD)("div",CG,[(0,s._)("div",DG,[(0,s.Uk)(" Shop ID: "),(0,s._)("span",SG,(0,Q.zw)(l.id),1)]),(0,s._)("div",null,[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{cols:"12",md:"6"},{default:(0,s.w5)((()=>[(0,s.Wm)(or.o,null,{default:(0,s.w5)((()=>[(0,s.Wm)(nr.D,{class:"!tw-py-2",cols:"12",sm:"6",md:"6"},{default:(0,s.w5)((()=>[(0,s._)("div",zG,[UG,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:i.shop.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.shop.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",LG,(0,Q.zw)(i.formStatus.name.message),1)])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,s._)("div",PG,[(0,s.Wm)(G.T,{color:"grey-darken-2",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[AG])),_:1}),(0,s.Wm)(G.T,{onClick:l.update,loading:i.isLoading,color:"primary-color",variant:"flat",size:"large"},{default:(0,s.w5)((()=>[WG])),_:1},8,["onClick","loading"])])])):(0,s.kq)("",!0)])}var EG={components:{},data(){return{isLoading:!1,isLoaded:!1,shop:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{id(){return this.$route.params.id}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0;let t=this.shop;EQ.update(this.$route.params.id,t).then((t=>{"SHOP_UPDATED"==t.data.code&&this.$alert({type:"success",title:t.data.message}),"SHOP_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.shop.name,"Shop name"),this.formStatus.name.valid}},mounted(){EQ.getShop(this.$route.params.id).then((t=>{if("SUCCESS"==t.data.code){const{name:e}=t.data.data.shops;this.shop.name=e,this.isLoaded=!0}}),this.$handleApiError)}};const qG=(0,d.Z)(EG,[["render",$G]]);var OG=qG,TG={name:"shops",path:"/shops",component:sr,meta:{module:"shop"},children:[{name:"shop/list",path:"",component:dG,meta:{module:"shop",subModule:"shop/list",title:"Shop List",gate:"show_all_sales"}},{name:"shop/add",path:"add",component:_G,meta:{module:"shop",subModule:"shop/add",title:"Shop Add",gate:"create_shop"}},{name:"shop/update",path:"update/:id",component:OG,meta:{module:"shop",subModule:"shop/update",title:"Update Shop",gate:"update_shop"}}]};const VG={class:"mb-5 tw-flex tw-justify-between tw-items-center"},FG=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Warehouse List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your warehouses")],-1),IG={key:0},RG=(0,s._)("span",{class:"text-white"}," Add Warehouse ",-1),jG={key:0},NG={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},MG={class:"mb-5 tw-flex"},HG={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},YG={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},ZG={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},KG=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),BG={class:"tw-relative"},QG={class:""};function GG(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("WarehousesTable"),w=(0,s.up)("AddWarehouse");return(0,s.wg)(),(0,s.iD)("div",{key:o.warehouses.length},[(0,s._)("div",VG,[FG,t.$can("create_warehouse")?((0,s.wg)(),(0,s.iD)("div",IG,[(0,s.Wm)(G.T,{color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),RG])),_:1})])):(0,s.kq)("",!0)]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",jG,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",NG,[(0,s._)("div",MG,[(0,s.Wm)(G.T,{onClick:e[1]||(e[1]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",HG,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",YG,[(0,s._)("div",ZG,[KG,(0,s._)("div",BG,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[r.nr,l.date]])])])])],2),(0,s._)("div",QG,[(0,s.Wm)(d,{columns:l.columns,warehouses:o.filteredWarehouses},null,8,["columns","warehouses"])]),(0,s.Wm)(w,{onCancel:e[4]||(e[4]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"])])):(0,s.kq)("",!0)])}const JG={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},XG={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},tJ={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},eJ=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),aJ={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},rJ=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),sJ={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},iJ={class:"tw-px-6 tw-py-4"},lJ={class:"tw-px-6 tw-py-4"},oJ={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"},nJ={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},dJ={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},wJ=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"},"Show per page: ",-1),cJ=["value"],uJ={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},pJ={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},mJ={class:"tw-text-white"};function hJ(t,e,a,i,l,o){const n=(0,s.up)("WarehouseActions");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",JG,[(0,s._)("table",XG,[(0,s._)("thead",tJ,[(0,s._)("tr",null,[eJ,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",aJ,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.warehouses,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},[rJ,(0,s._)("th",sJ,(0,Q.zw)(t.id),1),(0,s._)("td",iJ,(0,Q.zw)(t.name),1),(0,s._)("td",lJ,(0,Q.zw)(t.created_at.split("T")[0]),1),(0,s._)("td",oJ,[(0,s.Wm)(n,{warehouse:t},null,8,["warehouse"])])])))),128))])])]),(0,s._)("div",nJ,[(0,s._)("div",dJ,[wJ,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,cJ)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",uJ,[(0,s._)("div",pJ,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.warehouses.length:o.nextRange)+" of "+(0,Q.zw)(a.warehouses.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",mJ,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const gJ={class:"tw-flex tw-items-center tw-gap-1"};function fJ(t,e,a,r,i,l){const o=(0,s.up)("UpdateWarehouse"),n=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",gJ,[t.$can("update_warehouse")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_warehouse")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),((0,s.wg)(),(0,s.j4)(o,{visible:i.showUpdatePopup,onCancel:e[2]||(e[2]=t=>i.showUpdatePopup=!1),key:a.warehouse.id,warehouse:a.warehouse},null,8,["visible","warehouse"])),(0,s.Wm)(n,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this warehouse?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const vJ={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},yJ=(0,s._)("h1",{class:"tw-text-lg"},"Update Warehouse",-1),xJ={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},_J={class:"tw-w-full tw-col-span-12"},bJ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),kJ={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},CJ={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},DJ=(0,s._)("span",{class:"text-white"}," Cancel ",-1),SJ=(0,s._)("span",{class:"text-white"}," Update ",-1);function zJ(t,e,a,r,i,l){const o=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",vJ,[yJ,(0,s._)("div",xJ,[(0,s._)("div",_J,[bJ,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:i.Warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.Warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",kJ,(0,Q.zw)(i.formStatus.name.message),1)])]),(0,s._)("div",CJ,[(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[DJ])),_:1}),(0,s.Wm)(G.T,{loading:i.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[SJ])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var UJ={components:{},props:["warehouse","visible"],data(){return{isLoading:!1,isLoaded:!1,Warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,Lh.update(this.warehouse.id,this.Warehouse).then((t=>{"WAREHOUSE_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("warehouse/update",this.Warehouse),this.$emit("cancel")),"WAREHOUSE_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.Warehouse.name,"Warehouse name"),this.formStatus.name.valid}},mounted(){this.Warehouse={...this.warehouse}}};const LJ=(0,d.Z)(UJ,[["render",zJ]]);var PJ=LJ,AJ={components:{UpdateWarehouse:PJ},props:["rowIndex","warehouse"],name:"warehouseActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,Lh["delete"](this.warehouse.id).then((t=>{"WAREHOUSE_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Warehouse Deleted Successfully"}),this.$store.dispatch("warehouse/delete",this.warehouse.id))})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const WJ=(0,d.Z)(AJ,[["render",fJ]]);var $J=WJ,EJ={props:["columns","warehouses"],components:{WarehouseActions:$J},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.warehouses.length/this.paginationLimit)},items(){return this.warehouses.slice(this.prevRange,this.nextRange)}},methods:{}};const qJ=(0,d.Z)(EJ,[["render",hJ]]);var OJ=qJ;const TJ={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[500px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},VJ=(0,s._)("h1",{class:"tw-text-lg"},"Create Warehouse",-1),FJ={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},IJ={class:"tw-w-full tw-col-span-12"},RJ=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Warehouse Name",-1),jJ={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},NJ={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},MJ=(0,s._)("span",{class:"text-white"}," Cancel ",-1),HJ=(0,s._)("span",{class:"text-white"}," Create ",-1);function YJ(t,e,a,r,i,l){const o=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:e[3]||(e[3]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",TJ,[VJ,(0,s._)("div",FJ,[(0,s._)("div",IJ,[RJ,(0,s.Wm)(tt.hw,{error:!i.formStatus.name.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("name")),"hide-details":!0,modelValue:i.warehouse.name,"onUpdate:modelValue":e[1]||(e[1]=t=>i.warehouse.name=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",jJ,(0,Q.zw)(i.formStatus.name.message),1)])]),(0,s._)("div",NJ,[(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[MJ])),_:1}),(0,s.Wm)(G.T,{loading:i.isLoading,onClick:l.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[HJ])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var ZJ={props:["visible"],components:{},data(){return{isLoading:!1,warehouse:{name:""},formStatus:{name:{valid:!0,message:""}}}},methods:{create(){if(!this.validate())return!1;this.isLoading=!0;let t=this.warehouse;Lh.create(t).then((t=>{if("WAREHOUSE_CREATED"==t.data.code){this.$alert({type:"success",title:t.data.message});const e=t.data.data.warehouse;this.$store.dispatch("warehouse/addWarehouse",e),this.$emit("cancel"),this.warehouse={name:""}}"VALIDATION_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.errors.ref})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.name=bt(this.warehouse.name,"Warehouse name"),this.formStatus.name.valid}}};const KJ=(0,d.Z)(ZJ,[["render",YJ]]);var BJ=KJ,QJ={components:{WarehousesTable:OJ,AddWarehouse:BJ},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"name",name:"Name"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{warehouses(){return this.$store.getters["warehouse/warehouses"]},filteredWarehouses(){const t=this.date;return this.warehouses.filter((e=>(!t||e?.created_at.split("T")[0]===t)&&!!e.name.toLowerCase().includes(this.search.toLowerCase())))}},mounted(){Lh.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("warehouse/setWarehouses",t.data.data.warehouses)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const GJ=(0,d.Z)(QJ,[["render",GG]]);var JJ=GJ,XJ={name:"warehouses",path:"/warehouses",component:sr,meta:{module:"warehouse"},children:[{name:"warehouse/list",path:"",component:JJ,meta:{module:"warehouse",subModule:"warehouse/list",title:"Warehouse List",gate:"show_all_warehouses"}}]};const tX=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Factorisation List"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your factorisations")])],-1),eX={key:0},aX={key:1,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},rX={class:"mb-5 tw-flex"},sX={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},iX={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},lX={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},oX=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),nX={class:"tw-relative"},dX={class:""};function wX(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("FactorisationsTable");return(0,s.wg)(),(0,s.iD)("div",{key:o.factorisations.length},[tX,l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",eX,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",aX,[(0,s._)("div",rX,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",sX,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",iX,[(0,s._)("div",lX,[oX,(0,s._)("div",nX,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[r.nr,l.date]])])])])],2),(0,s._)("div",dX,[(0,s.Wm)(d,{columns:l.columns,factorisations:o.filteredFactorisations},null,8,["columns","factorisations"])])])):(0,s.kq)("",!0)])}class cX{async update(t,e){return await Y.getCookie(),M.post("api/factorisations/update/"+t,{factorisation_id:e.factorisation_id,delivery_id:e.delivery_id,price:e.price,commands_number:e.commands_number})}async updateComment(t,e){return await Y.getCookie(),M.post("api/factorisations/update/comment/"+t,{comment:e.comment})}async updatePaid(t,e){return await Y.getCookie(),M.post("api/factorisations/update/payment/"+t,{paid:e})}async updateClose(t,e){return await Y.getCookie(),M.post("api/factorisations/update/closing/"+t,{close:e})}async all(){return await Y.getCookie(),M.get("api/factorisations")}async getFactorisation(t){return await Y.getCookie(),M.get("api/factorisations/"+t)}async delete(t){return await Y.getCookie(),M["delete"]("api/factorisations/delete/"+t)}}var uX=new cX;const pX={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},mX={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},hX={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},gX=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),fX={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},vX={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},yX={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},xX=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),_X=["value"],bX={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},kX={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},CX={class:"tw-text-white"};function DX(t,e,a,i,l,o){const n=(0,s.up)("FactorisationRow");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",pX,[(0,s._)("table",mX,[(0,s._)("thead",hX,[(0,s._)("tr",null,[gX,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t.prop,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",fX,(0,Q.zw)(t.name),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.factorisations,(t=>((0,s.wg)(),(0,s.j4)(n,{factorisation:t,key:t.id},null,8,["factorisation"])))),128))])])]),(0,s._)("div",vX,[(0,s._)("div",yX,[xX,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,_X)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",bX,[(0,s._)("div",kX,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.factorisations.length:o.nextRange)+" of "+(0,Q.zw)(a.factorisations.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",CX,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const SX={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},zX=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),UX={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},LX={class:"tw-px-6 tw-py-4"},PX={class:"tw-px-6 tw-py-4"},AX={class:"tw-px-6 tw-py-4"},WX={class:"tw-px-6 tw-py-4"},$X={class:"tw-px-6 tw-py-4"},EX={class:"tw-px-6 tw-py-4"},qX={class:"tw-px-6 tw-py-4"},OX={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},TX={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},VX=["disabled"],FX=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),IX={class:"tw-px-6 tw-py-4"},RX={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},jX={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},NX=["disabled"],MX=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),HX={class:"tw-px-6 tw-py-4"},YX={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function ZX(t,e,a,i,l,o){const n=(0,s.up)("FactorisationActions");return(0,s.wg)(),(0,s.iD)("tr",SX,[zX,(0,s._)("th",UX,(0,Q.zw)(a.factorisation.id),1),(0,s._)("td",LX,[(0,s._)("button",{class:"tw-underline",onClick:e[0]||(e[0]=t=>o.download(a.factorisation.id))},(0,Q.zw)(a.factorisation.factorisation_id),1)]),(0,s._)("td",PX,(0,Q.zw)(o.deliveryName),1),(0,s._)("td",AX,(0,Q.zw)(a.factorisation.commands_number),1),(0,s._)("td",WX,(0,Q.zw)(a.factorisation.price),1),(0,s._)("td",$X,(0,Q.zw)(a.factorisation.close_at?.split("T")[0]),1),(0,s._)("td",EX,(0,Q.zw)(a.factorisation.paid_at?.split("T")[0]),1),(0,s._)("td",qX,[(0,s._)("div",OX,[(0,s._)("label",TX,[(0,s.wy)((0,s._)("input",{disabled:l.isLoadingClose,"onUpdate:modelValue":e[1]||(e[1]=t=>o.close=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,VX),[[r.e8,o.close]]),FX]),l.isLoadingClose?((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)])]),(0,s._)("td",IX,[(0,s._)("div",RX,[(0,s._)("label",jX,[(0,s.wy)((0,s._)("input",{disabled:l.isLoadingPaid,"onUpdate:modelValue":e[2]||(e[2]=t=>o.paid=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,NX),[[r.e8,o.paid]]),MX]),l.isLoadingPaid?((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)])]),(0,s._)("td",HX,(0,Q.zw)(a.factorisation.created_at.split("T")[0]),1),(0,s._)("td",YX,[(0,s.Wm)(n,{factorisation:a.factorisation},null,8,["factorisation"])])])}const KX={class:"tw-flex tw-items-center tw-gap-1"};function BX(t,e,a,r,i,l){const o=(0,s.up)("UpdateFactorisation"),n=(0,s.up)("UpdateComment"),d=(0,s.up)("popup");return(0,s.wg)(),(0,s.iD)("div",KX,[t.$can("update_factorisation")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:e[0]||(e[0]=t=>i.showUpdateCommentPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-comment-text")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("update_factorisation")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[1]||(e[1]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_factorisation")?((0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[2]||(e[2]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),((0,s.wg)(),(0,s.j4)(o,{visible:i.showUpdatePopup,onCancel:e[3]||(e[3]=t=>i.showUpdatePopup=!1),key:a.factorisation.id,factorisation:a.factorisation},null,8,["visible","factorisation"])),((0,s.wg)(),(0,s.j4)(n,{visible:i.showUpdateCommentPopup,onCancel:e[4]||(e[4]=t=>i.showUpdateCommentPopup=!1),key:a.factorisation.id,factorisation:a.factorisation},null,8,["visible","factorisation"])),(0,s.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this factorisation?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleResolved},null,8,["loading","visible","onResolved"])])}const QX={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},GX=(0,s._)("h1",{class:"tw-text-lg"},"Update Factorisation",-1),JX={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},XX={class:"tw-w-full tw-col-span-6"},t0=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"}," Factorisation Code ",-1),e0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},a0={class:"tw-w-full tw-col-span-6"},r0=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Delivery",-1),s0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},i0={class:"tw-w-full tw-col-span-6"},l0=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),o0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},n0={class:"tw-w-full tw-col-span-6"},d0=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),w0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},c0={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},u0=(0,s._)("span",{class:"text-white"}," Cancel ",-1),p0=(0,s._)("span",{class:"text-white"}," Update ",-1);function m0(t,e,a,r,i,l){const o=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:e[9]||(e[9]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",QX,[GX,(0,s._)("div",JX,[(0,s._)("div",XX,[t0,(0,s.Wm)(tt.hw,{error:!i.formStatus.factorisation_id.valid,onKeyup:e[0]||(e[0]=t=>l.resetError("factorisation_id")),"hide-details":!0,modelValue:i.Factorisation.factorisation_id,"onUpdate:modelValue":e[1]||(e[1]=t=>i.Factorisation.factorisation_id=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",e0,(0,Q.zw)(i.formStatus.factorisation_id.message),1)]),(0,s._)("div",a0,[r0,(0,s.Wm)(tt.hw,{error:!i.formStatus.delivery_id.valid,onKeyup:e[2]||(e[2]=t=>l.resetError("delivery_id")),"hide-details":!0,disabled:!0,modelValue:l.deliveryName,"onUpdate:modelValue":e[3]||(e[3]=t=>l.deliveryName=t),clearable:"",disable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",s0,(0,Q.zw)(i.formStatus.delivery_id.message),1)]),(0,s._)("div",i0,[l0,(0,s.Wm)(tt.hw,{error:!i.formStatus.price.valid,onKeyup:e[4]||(e[4]=t=>l.resetError("price")),"hide-details":!0,modelValue:i.Factorisation.price,"onUpdate:modelValue":e[5]||(e[5]=t=>i.Factorisation.price=t),disabled:!0,clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",o0,(0,Q.zw)(i.formStatus.price.message),1)]),(0,s._)("div",n0,[d0,(0,s.Wm)(tt.hw,{error:!i.formStatus.commands_number.valid,disabled:!0,onKeyup:e[6]||(e[6]=t=>l.resetError("commands_number")),"hide-details":!0,modelValue:i.Factorisation.commands_number,"onUpdate:modelValue":e[7]||(e[7]=t=>i.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",w0,(0,Q.zw)(i.formStatus.commands_number.message),1)])]),(0,s._)("div",c0,[(0,s.Wm)(G.T,{onClick:e[8]||(e[8]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[u0])),_:1}),(0,s.Wm)(G.T,{loading:i.isLoading,onClick:l.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[p0])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var h0={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{factorisation_id:"",delivery_id:0,price:0,commands_number:0,note:""},formStatus:{factorisation_id:{valid:!0,message:""},delivery_id:{valid:!0,message:""},price:{valid:!0,message:""},commands_number:{valid:!0,message:""}}}},computed:{deliveryName:{get(){return this.Factorisation.delivery.firstname+" "+this.Factorisation.delivery.lastname},set(t){console.log(t)}}},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,uX.update(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.factorisation_id=bt(this.Factorisation.factorisation_id,"Factorisation Code"),this.formStatus.price=kt(this.Factorisation.price,"Factorisation Price"),this.formStatus.commands_number=kt(this.Factorisation.commands_number,"Factorisation Nb Commands"),this.formStatus.factorisation_id.valid&&this.formStatus.price.valid&&this.formStatus.commands_number.valid}},mounted(){this.Factorisation={...this.factorisation}}};const g0=(0,d.Z)(h0,[["render",m0]]);var f0=g0;const v0={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},y0=(0,s._)("h1",{class:"tw-text-lg"},"Update Factorisation Comment",-1),x0={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},_0={class:"tw-w-full tw-col-span-6"},b0=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Total Price",-1),k0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},C0={class:"tw-w-full tw-col-span-6"},D0=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Nb Commands",-1),S0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},z0={class:"tw-w-full tw-col-span-12"},U0=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Comment",-1),L0=["error"],P0={class:"tw-h-[3px] tw-text-red-700 tw-mb-3 tw-mt-1 tw-text-xs"},A0={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},W0=(0,s._)("span",{class:"text-white"}," Cancel ",-1),$0=(0,s._)("span",{class:"text-white"}," Update ",-1);function E0(t,e,a,i,l,o){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[7]||(e[7]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",v0,[y0,(0,s._)("div",x0,[(0,s._)("div",_0,[b0,(0,s.Wm)(tt.hw,{error:!l.formStatus.price.valid,onKeyup:e[0]||(e[0]=t=>o.resetError("price")),"hide-details":!0,modelValue:l.Factorisation.price,"onUpdate:modelValue":e[1]||(e[1]=t=>l.Factorisation.price=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",color:"primary-color",disabled:"",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",k0,(0,Q.zw)(l.formStatus.price.message),1)]),(0,s._)("div",C0,[D0,(0,s.Wm)(tt.hw,{error:!l.formStatus.commands_number.valid,onKeyup:e[2]||(e[2]=t=>o.resetError("commands_number")),"hide-details":!0,modelValue:l.Factorisation.commands_number,"onUpdate:modelValue":e[3]||(e[3]=t=>l.Factorisation.commands_number=t),clearable:"","clear-icon":"mdi-close",class:"tw-w-full",variant:"outlined",disabled:"",color:"primary-color",density:"compact"},null,8,["error","modelValue"]),(0,s._)("div",S0,(0,Q.zw)(l.formStatus.commands_number.message),1)]),(0,s._)("div",z0,[U0,(0,s.wy)((0,s._)("textarea",{error:!l.formStatus.commands_number.valid,onKeyup:e[4]||(e[4]=t=>o.resetError("commands_number")),"hide-details":!0,clearable:"","clear-icon":"mdi-close","onUpdate:modelValue":e[5]||(e[5]=t=>l.Factorisation.comment=t),variant:"outlined",density:"compact",cols:"30",rows:"5",color:"primary-color",class:"tw-rounded-lg tw-px-3 tw-py-1 tw-outline-none tw-w-full tw-border tw-border-solid tw-border-neutral-400 focus:tw-border-orange-500"},"\r\n            ",40,L0),[[r.nr,l.Factorisation.comment]]),(0,s._)("div",P0,(0,Q.zw)(l.formStatus.commands_number.message),1)])]),(0,s._)("div",A0,[(0,s.Wm)(G.T,{onClick:e[6]||(e[6]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[W0])),_:1}),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[$0])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var q0={components:{},props:["factorisation","visible"],data(){return{isLoading:!1,isLoaded:!1,Factorisation:{price:0,commands_number:0,comment:""},formStatus:{price:{valid:!0,message:""},commands_number:{valid:!0,message:""},comment:{valid:!0,message:""}}}},computed:{},methods:{update(){if(!this.validate())return!1;this.isLoading=!0,uX.updateComment(this.factorisation.id,this.Factorisation).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&(this.$alert({type:"success",title:t.data.message}),this.$store.dispatch("factorisation/update",this.Factorisation),this.$emit("cancel")),"FACTORISATION_NOT_UPDATED"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch((t=>{this.$handleApiError(t)})).finally((()=>this.isLoading=!1))},resetError(t){this.formStatus[t]={valid:!0,message:""}},validate(){return this.formStatus.comment=bt(this.Factorisation.comment,"Factorisation Comment"),this.formStatus.comment.valid}},mounted(){this.Factorisation={...this.factorisation}}};const O0=(0,d.Z)(q0,[["render",E0]]);var T0=O0,V0={components:{UpdateFactorisation:f0,UpdateComment:T0},props:["rowIndex","factorisation"],name:"factorisationActions",data(){return{showPopup:!1,isLoading:!1,showUpdatePopup:!1,showUpdateCommentPopup:!1}},methods:{handleResolved(t){t?(this.isLoading=!0,uX["delete"](this.factorisation.id).then((t=>{"FACTORISATION_DELETED"==t.data.code&&(this.isLoading=!1,this.$alert({type:"success",title:"Factorisation Deleted Successfully"}),this.$store.dispatch("factorisation/delete",this.factorisation.id)),"DELETE_ERROR"==t.data.code&&this.$alert({type:"warning",title:t.data.message})})).catch(this.$handleApiError).finally((()=>{this.isLoading=!1,this.showPopup=!1}))):this.showPopup=!1}}};const F0=(0,d.Z)(V0,[["render",BX]]);var I0=F0,R0={props:["factorisation"],components:{FactorisationActions:I0},data(){return{isLoadingPaid:!1,isLoadingClose:!1}},computed:{deliveryName:{get(){return this.factorisation.delivery.firstname+" "+this.factorisation.delivery.lastname},set(t){console.log(t)}},paid:{get(){return 1==this.factorisation.paid},set(t){this.updatePaid(t)}},close:{get(){return 1==this.factorisation.close},set(t){this.updateClose(t)}}},methods:{updatePaid(t){this.isLoadingPaid=!0,uX.updatePaid(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingPaid=!1}))},updateClose(t){this.isLoadingClose=!0,uX.updateClose(this.factorisation.id,t).then((t=>{"FACTORISATION_UPDATED"==t.data.code&&this.$store.dispatch("factorisation/update",t.data.data.factorisation)}),this.$handleApiError).finally((()=>{this.isLoadingClose=!1}))},download(t){const e=I+"api/factorisations/generate-pdf/"+t,a=document.createElement("a");a.href=e,a.target="_blank",a.setAttribute("download","dd.pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}}};const j0=(0,d.Z)(R0,[["render",ZX]]);var N0=j0,M0={props:["columns","factorisations"],components:{FactorisationRow:N0},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.factorisations.length/this.paginationLimit)},items(){return this.factorisations.slice(this.prevRange,this.nextRange)}},methods:{}};const H0=(0,d.Z)(M0,[["render",DX]]);var Y0=H0,Z0={components:{FactorisationsTable:Y0},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,columns:[{prop:"id",name:"#"},{prop:"factorisation_id",name:"Code"},{prop:"delivery_id",name:"Delivery"},{prop:"commands_number",name:"Nb Commands"},{prop:"price",name:"Total Price"},{prop:"close_at",name:"Closed at"},{prop:"paid_at",name:"Paid at"},{prop:"close",name:"Close"},{prop:"paid",name:"Paid"},{prop:"created_at",name:"Created at"},{prop:"actions",name:"Actions"}]}},computed:{factorisations(){return this.$store.getters["factorisation/factorisations"]},filteredFactorisations(){const t=this.date;return this.factorisations.filter((e=>!t||e?.created_at.split("T")[0]===t))}},mounted(){uX.all().then((t=>{"SUCCESS"==t.data.code&&this.$store.dispatch("factorisation/setFactorisations",t.data.data.factorisations)}),(t=>{this.$handleApiError(t)})).finally((()=>this.isLoaded=!0))}};const K0=(0,d.Z)(Z0,[["render",wX]]);var B0=K0,Q0={name:"factorisations",path:"/factorisations",component:sr,meta:{module:"factorisation"},children:[{name:"factorisation/list",path:"",component:B0,meta:{module:"factorisation",subModule:"factorisation/list",title:"Factorisations List",gate:"show_all_factorisations"}}]};const G0={class:"mb-5 tw-flex tw-justify-between tw-items-center"},J0=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Google Sheets"),(0,s._)("h2",{class:"tw-text-gray-500 tw-text-sm"},"Manage your google sheets")],-1),X0=(0,s._)("span",{class:"text-white"}," Add Sheet ",-1),t1={key:0},e1={key:1,class:"py-5 px-5 tw-mb-5 tw-border bg-white tw-w-full tw-rounded-md"},a1={class:"tw-flex tw-items-center tw-gap-2"},r1=(0,s._)("h1",null,"Application's email",-1),s1={class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-py-2 tw-px-2 tw-text-sm tw-mt-2 tw-text-gray-700"},i1=(0,s._)("p",{class:"tw-mt-1 tw-text-xs tw-text-gray-400"}," Use this email to give access to Google Sheets ",-1),l1={key:2,class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"},o1={class:"mb-5 tw-flex"},n1={class:"focus-within:tw-border-orange-400 tw-w-[250px] ml-2 px-2 tw-rounded-md tw-border tw-flex tw-items-center"},d1={class:"tw-grid tw-grid-cols-12 tw-gap-2 tw-mb-4"},w1={class:"lg:tw-col-span-4 md:tw-col-span-6 tw-col-span-12 tw-h-fit"},c1=(0,s._)("span",{class:"tw-text-sm tw-text-neutral-600"},"Date",-1),u1={class:"tw-relative"},p1={class:""};function m1(t,e,a,i,l,o){const n=(0,s.up)("LoadingAnimation"),d=(0,s.up)("SheetsTable"),w=(0,s.up)("AddSheet");return(0,s.wg)(),(0,s.iD)("div",{key:o.sheets.length},[(0,s._)("div",G0,[J0,(0,s._)("div",null,[t.$can("create_sheet")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,color:"primary-color",onClick:e[0]||(e[0]=t=>l.showPopup=!0),variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{icon:"mdi-plus",class:"mr-2 text-white"}),X0])),_:1})):(0,s.kq)("",!0)])]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",t1,[(0,s.Wm)(n)])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",e1,[(0,s._)("div",a1,[r1,(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>o.copy&&o.copy(...t)),class:"tw-bg-gray-100 tw-border tw-border-gray-300 tw-rounded tw-w-[30px] tw-h-[30px] tw-text-gray-500 hover:tw-text-gray-700 tw-duration-300 tw-border-solid hover:tw-border-gray-400"},[(0,s.Wm)(X.t,{class:"tw-text-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-content-copy")])),_:1})])]),(0,s._)("div",s1,(0,Q.zw)(l.email),1),i1])):(0,s.kq)("",!0),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",l1,[(0,s._)("div",o1,[(0,s.Wm)(G.T,{onClick:e[2]||(e[2]=t=>l.showFilters=!l.showFilters),icon:"",rounded:"lg",variant:"flat",size:"small",color:"primary-color",class:"text-white"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white",size:"xx-large"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-camera-control")])),_:1})])),_:1}),(0,s._)("div",n1,[(0,s.Wm)(Kt.f,{width:"18",height:"18","max-width":"18",class:"ma-0 pa-0",src:l.localUrl+"assets/img/icons/search.svg"},null,8,["src"]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.search=t),type:"text",class:"ml-2 tw-border-0 tw-outline-0 tw-h-full tw-text-sm",placeholder:"Search by name"},null,512),[[r.nr,l.search]])])]),(0,s._)("div",{class:(0,Q.C_)(["tw-max-h-0 tw-duration-500 tw-overflow-hidden",{"!tw-max-h-[500px]":l.showFilters}])},[(0,s._)("div",d1,[(0,s._)("div",w1,[c1,(0,s._)("div",u1,[(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=t=>l.date=t),class:"tw-w-full focus:tw-border-orange-400 tw-h-[40px] px-2 tw-rounded-md tw-border tw-border-solid tw-border-neutral-200 tw-outline-0 tw-text-sm"},null,512),[[r.nr,l.date]])])])])],2),(0,s._)("div",p1,[(0,s.Wm)(d,{sheets:o.sheets},null,8,["sheets"])]),(0,s.Wm)(w,{onCancel:e[5]||(e[5]=t=>l.showPopup=!1),visible:l.showPopup},null,8,["visible"])])):(0,s.kq)("",!0)])}const h1={class:"tw-relative tw-overflow-x-auto sm:tw-rounded-lg"},g1={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},f1={class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50"},v1=(0,s._)("th",{scope:"col",class:"tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-all-search",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-all-search",class:"tw-sr-only"},"checkbox")])],-1),y1={class:"tw-w-fit tw-flex tw-whitespace-nowrap"},x1={class:"mt-5 tw-grid tw-grid-cols-12 tw-gap-5"},_1={class:"tw-col-span-12 md:tw-col-span-6 d-flex align-center"},b1=(0,s._)("div",{class:"text-body-2 tw-h-fit mr-2 tw-text-zinc-700 tw-whitespace-nowrap"}," Show per page: ",-1),k1=["value"],C1={class:"tw-col-span-12 md:tw-col-span-6 d-flex tw-justify-end tw-flex-wrap align-center"},D1={class:"text-caption tw-h-fit mr-2 font-weight-bold tw-text-zinc-700"},S1={class:"tw-text-white"};function z1(t,e,a,i,l,o){const n=(0,s.up)("SheetRow");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",h1,[(0,s._)("table",g1,[(0,s._)("thead",f1,[(0,s._)("tr",null,[v1,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.columns,(t=>((0,s.wg)(),(0,s.iD)("th",{key:t,scope:"col",class:"tw-px-6 tw-py-3 text-truncate"},[(0,s._)("div",y1,(0,Q.zw)(t),1)])))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.sheets,(t=>((0,s.wg)(),(0,s.j4)(n,{sheet:t,key:t.id},null,8,["sheet"])))),128))])])]),(0,s._)("div",x1,[(0,s._)("div",_1,[b1,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.paginationLimit=t),class:"focus:tw-border-orange-400 tw-border-solid tw-w-[70px] ml-2 px-2 tw-py-2 tw-rounded-md tw-border tw-flex tw-items-center"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.allowedLimit,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t,key:t},(0,Q.zw)(t),9,k1)))),128))],512),[[r.bM,l.paginationLimit]])]),(0,s._)("div",C1,[(0,s._)("div",D1,(0,Q.zw)(o.prevRange+1)+" - "+(0,Q.zw)(l.currentPage==o.pageCount?a.sheets.length:o.nextRange)+" of "+(0,Q.zw)(a.sheets.length)+" items ",1),(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pageCount,(t=>((0,s.wg)(),(0,s.j4)(G.T,{onClick:e=>l.currentPage=t,ripple:!1,variant:"flat",class:"mr-1",icon:"",rounded:"lg",color:t==l.currentPage?"primary-color":"grey",density:"comfortable",key:t},{default:(0,s.w5)((()=>[(0,s._)("span",S1,(0,Q.zw)(t),1)])),_:2},1032,["onClick","color"])))),128))])])])])}const U1={class:"tw-bg-white tw-border-b tw-whitespace-nowrap hover:tw-bg-gray-50"},L1=(0,s._)("td",{class:"tw-w-4 tw-p-4"},[(0,s._)("div",{class:"tw-flex tw-items-center"},[(0,s._)("input",{id:"checkbox-table-search-1",type:"checkbox",class:"tw-w-4 tw-h-4 tw-text-blue-600 tw-bg-gray-100 tw-border-gray-300 tw-rounded focus:tw-ring-blue-500 focus:tw-ring-2"}),(0,s._)("label",{for:"checkbox-table-search-1",class:"tw-sr-only"},"checkbox")])],-1),P1={scope:"row",class:"tw-px-6 tw-py-4 tw-font-medium tw-text-gray-900 tw-whitespace-nowrap"},A1={class:"tw-px-6 tw-py-4"},W1={class:"tw-px-6 tw-py-4"},$1={class:"tw-px-6 tw-py-4"},E1={class:"tw-flex tw-items-center tw-w-full tw-text-neutral-600 dark:tw-text-neutral-200 tw-text-md tw-py-1"},q1={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},O1=["disabled"],T1=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),V1={class:"tw-px-6 tw-py-4"},F1={class:"tw-flex tw-items-center tw-px-6 tw-py-4 tw-space-x-3"};function I1(t,e,a,i,l,o){const n=(0,s.up)("SheetActions");return(0,s.wg)(),(0,s.iD)("tr",U1,[L1,(0,s._)("th",P1,(0,Q.zw)(a.sheet.id),1),(0,s._)("td",A1,[(0,s._)("div",null,[(0,s._)("span",{class:(0,Q.C_)(["tw-inline-block tw-w-[8px] tw-h-[8px] tw-rounded-full tw-mr-1",[1==a.sheet.active&&1==a.sheet.auto_fetch?"tw-bg-emerald-500":"tw-bg-red-500"]])},null,2),(0,s.Uk)(" "+(0,Q.zw)(a.sheet.name),1)])]),(0,s._)("td",W1,[(0,s._)("div",null,(0,Q.zw)(a.sheet.sheet_name),1)]),(0,s._)("td",$1,[(0,s._)("div",E1,[(0,s._)("label",q1,[(0,s.wy)((0,s._)("input",{disabled:l.isLoadingAuto,"onUpdate:modelValue":e[0]||(e[0]=t=>o.autoFetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,8,O1),[[r.e8,o.autoFetch]]),T1]),l.isLoadingAuto?((0,s.wg)(),(0,s.j4)(X.t,{key:0,color:"green",size:"small",class:"tw-animate-spin"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1})):(0,s.kq)("",!0)])]),(0,s._)("td",V1,(0,Q.zw)(a.sheet.created_at.split("T")[0]),1),(0,s._)("td",F1,[(0,s.Wm)(n,{sheet:a.sheet},null,8,["sheet"])])])}const R1={key:0};function j1(t,e,a,r,i,l){const o=(0,s.up)("UpdateSheet"),n=(0,s.up)("SheetOrders"),d=(0,s.up)("popup");return a.sheet?((0,s.wg)(),(0,s.iD)("div",R1,[t.$can("update_sheet")?((0,s.wg)(),(0,s.j4)(G.T,{key:0,onClick:l.sync,class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"blue",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{class:(0,Q.C_)([i.isLoadingSheet&&"tw-animate-spin"]),color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-autorenew")])),_:1},8,["class"])])),_:1},8,["onClick"])):(0,s.kq)("",!0),t.$can("update_sheet")?((0,s.wg)(),(0,s.j4)(G.T,{key:1,onClick:e[0]||(e[0]=t=>i.showUpdatePopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"orange",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),t.$can("delete_sheet")?((0,s.wg)(),(0,s.j4)(G.T,{key:2,onClick:e[1]||(e[1]=t=>i.showPopup=!0),class:"mr-2 !tw-px-0 !tw-py-0","min-height":"25px","min-width":"30",color:"red",variant:"flat",density:"comfortable",ripple:!1,size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(X.t,{color:"white"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-delete-outline")])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(o,{visible:i.showUpdatePopup,"onUpdate:visible":e[2]||(e[2]=t=>i.showUpdatePopup=t),sheet:a.sheet,onCancel:e[3]||(e[3]=t=>i.showUpdatePopup=!1)},null,8,["visible","sheet"]),(0,s.Wm)(n,{visible:i.showSheetPopup,"onUpdate:visible":e[4]||(e[4]=t=>i.showSheetPopup=t),sheet:a.sheet,orders:i.orders,onCancel:e[5]||(e[5]=t=>i.showSheetPopup=!1)},null,8,["visible","sheet","orders"]),(0,s.Wm)(d,{type:"warning",title:"Warning",body:"<p>Are you sure you want to delete this sale?</p> You won't be able to revert this!",loading:i.isLoading,visible:i.showPopup,onResolved:l.handleDelete},null,8,["loading","visible","onResolved"])])):(0,s.kq)("",!0)}const N1={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},M1=(0,s._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),H1={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},Y1={class:"md:tw-col-span-6 tw-col-span-12"},Z1=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),K1={class:"md:tw-col-span-6 tw-col-span-12"},B1=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),Q1={class:"md:tw-col-span-12 tw-col-span-12"},G1=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),J1={class:"md:tw-col-span-6 tw-col-span-12"},X1=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),t2={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},e2=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),a2={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},r2=(0,s._)("span",{class:"text-white"}," Cancel ",-1),s2=(0,s._)("span",{class:"text-white"}," Save ",-1);function i2(t,e,a,i,l,o){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",N1,[M1,(0,s._)("div",H1,[(0,s._)("div",Y1,[Z1,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.newSheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.newSheet.name]])]),(0,s._)("div",K1,[B1,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.newSheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.newSheet.sheet_name]])]),(0,s._)("div",Q1,[G1,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>l.newSheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.newSheet.sheet_id]])]),(0,s._)("div",J1,[X1,(0,s._)("label",t2,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.newSheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[r.e8,l.newSheet.auto_fetch]]),e2])])]),(0,s._)("div",a2,[(0,s.Wm)(G.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[r2])),_:1}),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.update,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[s2])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var l2={props:["visible","sheet"],data(){return{isLoading:!1,newSheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},watch:{visible(t){t&&(this.newSheet={...this.sheet,auto_fetch:1==this.sheet.auto_fetch})}},computed:{isFormValid(){return!!this.newSheet.name&&!!this.newSheet.sheet_id&&!!this.newSheet.sheet_name}},methods:{update(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.newSheet;Xa.update(this.sheet.id,t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet updated successfully"}),this.$store.dispatch("sheet/update",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const o2=(0,d.Z)(l2,[["render",i2]]);var n2=o2;const d2={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},w2={key:0},c2={class:"tw-flex tw-items-center tw-gap-2 tw-mb-2"},u2=(0,s._)("h1",{class:"tw-text-sm tw-font-medium tw-text-neutral-700"},"Sheet's New Orders",-1),p2={class:"tw-bg-emerald-500 tw-text-white tw-px-1 tw-text-sm tw-rounded"},m2={class:"tw-relative tw-overflow-x-auto"},h2={class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500 tw-border tw-rounded"},g2=(0,s._)("thead",{class:"tw-text-xs tw-text-gray-700 tw-uppercase tw-bg-gray-50 tw-rounded-t tw-overflow-hidden"},[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Fullname"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Product"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"SKU"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Qty"),(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3"},"Price")])],-1),f2={class:"tw-px-6 tw-py-2"},v2={class:"tw-px-6 tw-py-2"},y2={class:"tw-px-6 tw-py-2"},x2={class:"tw-px-6 tw-py-2"},_2={class:"tw-px-6 tw-py-2"},b2={class:"tw-flex tw-gap-2 mt-3 tw-justify-end"},k2=(0,s._)("span",{class:"text-white"}," Cancel ",-1),C2=(0,s._)("span",{class:"text-white"}," Save Orders",-1);function D2(t,e,a,r,i,l){const o=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(o,{onCancel:e[1]||(e[1]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",d2,[a.orders.length>0?((0,s.wg)(),(0,s.iD)("div",w2,[(0,s._)("div",c2,[u2,(0,s._)("div",p2,(0,Q.zw)(a.orders.length),1)]),(0,s._)("div",null,[(0,s._)("div",m2,[(0,s._)("table",h2,[g2,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.orders,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t,class:"tw-bg-white tw-border-b"},[(0,s._)("td",f2,(0,Q.zw)(t["Full name"]),1),(0,s._)("td",v2,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t["Product name"].split("\n"),(t=>((0,s.wg)(),(0,s.iD)("p",{key:t},"- "+(0,Q.zw)(t),1)))),128))])]),(0,s._)("td",y2,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t["SKU"].split("\n"),(t=>((0,s.wg)(),(0,s.iD)("p",{key:t},(0,Q.zw)(t),1)))),128))])]),(0,s._)("td",x2,[(0,s._)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t["Total quantity"].split("\n"),(t=>((0,s.wg)(),(0,s.iD)("p",{key:t},(0,Q.zw)(t),1)))),128))])]),(0,s._)("td",_2,(0,Q.zw)(t["Total charge"]),1)])))),128))])])])]),(0,s._)("div",b2,[(0,s.Wm)(G.T,{onClick:e[0]||(e[0]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[k2])),_:1}),(0,s.Wm)(G.T,{loading:i.isLoading,onClick:l.save,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[C2])),_:1},8,["loading","onClick"])])])):(0,s.kq)("",!0)])])),_:1},8,["visible"])])}var S2={props:["visible","sheet","orders"],data(){return{isLoading:!1}},computed:{sales(){return this.$store.getters["sale/sales"]}},methods:{save(){this.isLoading=!0,Xa.saveOrders(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:t.data.data.orders.length+" Order has been added",type:"success"}),this.$store.dispatch("sale/setSales",[...t.data.data.orders,...this.sales]),this.$emit("cancel"))}),(t=>{this.$handleApiError(t),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this sheet",type:"warning"})})).finally((()=>{this.isLoading=!1}))}}};const z2=(0,d.Z)(S2,[["render",D2]]);var U2=z2,L2={props:["sheet"],name:"sheetActions",components:{UpdateSheet:n2,SheetOrders:U2},data(){return{showPopup:!1,showUpdatePopup:!1,showSheetPopup:!1,isLoading:!1,isLoadingSheet:!1,orders:[]}},computed:{},methods:{handleDelete(t){if(console.log(t),!t)return this.showPopup=!1,!1;this.delete()},delete(){this.isLoading=!0,Xa["delete"](this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(this.$alert({title:"Deleted successfully",type:"success"}),this.$store.dispatch("sheet/delete",this.sheet.id),this.showPopup=!1)}),this.$handleApiError).finally((()=>{this.isLoading=!1}))},sync(){this.isLoadingSheet=!0,Xa.sync(this.sheet.id).then((t=>{"SUCCESS"==t.data.code&&(0==t.data.data.orders.length?this.$alert({title:"0 Orders found",type:"info"}):(this.orders=t.data.data.orders,this.showSheetPopup=!0),console.log(t.data.data.sheet),this.$store.dispatch("sheet/update",t.data.data.sheet)),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log(t),this.$store.dispatch("sheet/update",t.response.data.data.sheet),"PERMISSION_DENIED"==t?.response?.data?.code&&this.$alert({title:"Access denied to this Google Sheet",type:"error"})})).finally((()=>{this.isLoadingSheet=!1}))}},mounted(){}};const P2=(0,d.Z)(L2,[["render",j1]]);var A2=P2,W2={props:["sheet"],components:{SheetActions:A2},data(){return{isLoadingAuto:!1}},computed:{autoFetch:{get(){return 1==this.sheet.auto_fetch},set(t){this.updateAutoFetch(t)}}},methods:{updateAutoFetch(t){this.isLoadingAuto=!0,Xa.updateAutoFetch(this.sheet.id,t).then((e=>{"SUCCESS"==e.data.code&&(this.$alert({title:t?"Activated":"Disabled",type:"success"}),this.$store.dispatch("sheet/update",e.data.data.sheet))}),this.$handleApiError).finally((()=>{this.isLoadingAuto=!1}))}}};const $2=(0,d.Z)(W2,[["render",I1]]);var E2=$2,q2={props:["sheets"],components:{SheetRow:E2},data(){return{allowedLimit:[5,10,20,50,100],currentPage:1,paginationLimit:10,columns:["id","name","sheet name","auto fetch","created","actions"]}},computed:{prevRange(){return(this.currentPage-1)*this.paginationLimit},nextRange(){return this.currentPage*this.paginationLimit},pageCount(){return Math.ceil(this.sheets.length/this.paginationLimit)},items(){return this.sheets.slice(this.prevRange,this.nextRange)}},methods:{}};const O2=(0,d.Z)(q2,[["render",z1]]);var T2=O2;const V2={class:"md:tw-w-[80%] tw-w-[95%] tw-px-5 tw-max-w-[750px] tw-mx-auto tw-my-3 tw-min-h-fit tw-bg-white tw-rounded-lg tw-shadow-lg tw-py-5"},F2=(0,s._)("h1",{class:"tw-text-lg"},"Create Sheet",-1),I2={class:"tw-grid tw-grid-cols-12 tw-gap-y-1 tw-gap-x-3 mt-5"},R2={class:"md:tw-col-span-6 tw-col-span-12"},j2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Name",-1),N2={class:"md:tw-col-span-6 tw-col-span-12"},M2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet Name",-1),H2={class:"md:tw-col-span-12 tw-col-span-12"},Y2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Sheet ID",-1),Z2={class:"md:tw-col-span-6 tw-col-span-12"},K2=(0,s._)("div",{class:"mb-1 text-body-2 tw-text-zinc-700"},"Auto Fetch",-1),B2={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-w-fit tw-scale-75"},Q2=(0,s._)("div",{class:"tw-flex tw-items-center peer-checked:tw-bg-emerald-500 tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600"},null,-1),G2={class:"tw-flex tw-gap-2 mt-3 mb-2 tw-justify-end"},J2=(0,s._)("span",{class:"text-white"}," Cancel ",-1),X2=(0,s._)("span",{class:"text-white"}," Save ",-1);function t5(t,e,a,i,l,o){const n=(0,s.up)("popup-full");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n,{onCancel:e[5]||(e[5]=e=>t.$emit("cancel")),visible:a.visible},{default:(0,s.w5)((()=>[(0,s._)("div",V2,[F2,(0,s._)("div",I2,[(0,s._)("div",R2,[j2,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>l.sheet.name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sheet.name]])]),(0,s._)("div",N2,[M2,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>l.sheet.sheet_name=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sheet.sheet_name]])]),(0,s._)("div",H2,[Y2,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>l.sheet.sheet_id=t),class:"tw-py-2 tw-outline-none tw-duration-300 tw-px-3 tw-w-full tw-rounded-lg tw-border tw-border-solid tw-border-neutral-300 focus:tw-border-orange-500"},null,512),[[r.nr,l.sheet.sheet_id]])]),(0,s._)("div",Z2,[K2,(0,s._)("label",B2,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.sheet.auto_fetch=t),type:"checkbox",class:"tw-sr-only tw-peer"},null,512),[[r.e8,l.sheet.auto_fetch]]),Q2])])]),(0,s._)("div",G2,[(0,s.Wm)(G.T,{onClick:e[4]||(e[4]=e=>t.$emit("cancel")),color:"grey-darken-2",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[J2])),_:1}),(0,s.Wm)(G.T,{loading:l.isLoading,onClick:o.create,color:"primary-color",variant:"flat",class:"text-capitalize"},{default:(0,s.w5)((()=>[X2])),_:1},8,["loading","onClick"])])])])),_:1},8,["visible"])])}var e5={props:["visible"],data(){return{isLoading:!1,sheet:{name:"",sheet_id:"",sheet_name:"",auto_fetch:!0}}},computed:{isFormValid(){return!!this.sheet.name&&!!this.sheet.sheet_id&&!!this.sheet.sheet_name}},methods:{create(){if(!this.isFormValid)return this.$alert({type:"warning",title:"Please fill all the form"}),!1;this.isLoading=!0;const t=this.sheet;Xa.create(t).then((t=>{"SUCCESS"==t.data.code&&(this.$emit("cancel"),this.$alert({type:"success",title:"Sheet created successfully"}),this.$store.dispatch("sheet/addSheet",t.data.data.sheet))}),this.$handleApiError).finally((()=>this.isLoading=!1))}}};const a5=(0,d.Z)(e5,[["render",t5]]);var r5=a5,s5={components:{SheetsTable:T2,AddSheet:r5},data(){return{localUrl:F,isLoaded:!1,showFilters:!1,date:null,search:"",showPopup:!1,email:"new-service-account@testing-379416.iam.gserviceaccount.com"}},computed:{sheets(){return this.$store.getters["sheet/sheets"]}},methods:{getSheets(){return this.isLoaded=!1,Xa.all().then((t=>("SUCCESS"==t.data.code&&this.$store.dispatch("sheet/setSheets",t.data.data.sheets),t)),this.$handleApiError).finally((()=>{this.isLoaded=!0}))},copy(){navigator.clipboard.writeText(this.email),this.$alert({title:"Email Copied !",type:"success"})}},mounted(){this.getSheets()}};const i5=(0,d.Z)(s5,[["render",m1]]);var l5=i5,o5={name:"sheets",path:"/sheets",component:sr,meta:{module:"sheet"},children:[{name:"sheet/list",path:"",component:l5,meta:{module:"sheet",subModule:"sheet/list",title:"Google Sheets List",gate:"show_all_sheets"}}]};const n5={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},d5={class:"tw-px-3"},w5={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},c5={class:"tw-flex tw-items-center tw-gap-x-3"},u5=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),p5={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},m5=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"These orders have needs to reconfirmed.",-1),h5=(0,s._)("div",{class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-3"},[(0,s._)("button",{class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})]),(0,s._)("span",null,"Create")])],-1);function g5(t,e,a,r,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("IndexTable");return(0,s.wg)(),(0,s.iD)("div",n5,[(0,s._)("section",d5,[(0,s._)("div",w5,[(0,s._)("div",null,[(0,s._)("div",c5,[u5,(0,s._)("span",p5,(0,Q.zw)(i.totalOrders)+" order",1)]),m5]),h5]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[0]||(e[0]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t),onFilter:e[2]||(e[2]=t=>l.handlePerPageChange(i.per_page)),onClear:l.handleClearFilters,onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"active-statistics":"","per-page":i.per_page},null,8,["search","filters","onClear","onPerPageChange","onFresh","loading","statistics","per-page"]),(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])])])}class f5{async statistics(t){return await Y.getCookie(),M.post("api/v1/seller/statistics",t)}async paginate(t="/",e){return await Y.getCookie(),M.post("api/v1/seller/orders"+t,e)}async update(t,e){return await Y.getCookie(),M.post("api/v1/seller/orders/"+t+"/update",e)}}var v5=new f5;const y5={class:"tw-flex tw-flex-col"},x5={class:"tw-overflow-x-auto"},_5={class:"tw-inline-block tw-min-w-full tw-align-middle"},b5={class:"tw-overflow-hidden tw-border tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},k5={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},C5={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},D5=(0,s._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,s._)("span",null,"ID")],-1),S5={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},z5=(0,s._)("span",null,"Created",-1),U5=(0,s._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),L5=[z5,U5],P5=(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),A5=(0,s._)("th",{scope:"col",class:"tw-px-6 !tw-w-5 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),W5=(0,s._)("th",{scope:"col",class:"tw-px-6 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Product ",-1),$5=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-6 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),E5=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-6 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),q5=(0,s._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,s._)("span",{class:"tw-sr-only"},"Actions")],-1),O5={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},T5={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},V5=(0,s._)("tr",null,[(0,s._)("td",{colspan:"8"},[(0,s._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),F5=[V5],I5={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},R5={colspan:"9"},j5={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-300 md:tw-p-6 dark:tw-border-gray-300"},N5=(0,s._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})]),(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"})],-1),M5=(0,s._)("div",null,[(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200"})],-1),H5=(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-200 tw-w-12"},null,-1),Y5=[M5,H5],Z5={class:"tw-mt-6"};function K5(t,e,a,r,i,l){const o=(0,s.up)("TableRow"),n=((0,s.up)("loading"),(0,s.up)("TablePaginationNoNums"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",y5,[(0,s._)("div",x5,[(0,s._)("div",_5,[(0,s._)("div",b5,[(0,s._)("table",k5,[(0,s._)("thead",C5,[(0,s._)("tr",null,[D5,(0,s._)("th",S5,[(0,s._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},L5)]),P5,A5,W5,$5,E5,q5])]),!a.loading&&a.items.length>0?((0,s.wg)(),(0,s.iD)("tbody",O5,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.items,(a=>((0,s.wg)(),(0,s.j4)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),key:a.id,item:a},null,8,["item"])))),128))])):(0,s.kq)("",!0),a.loading||0!=a.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("tbody",T5,F5)),a.loading?((0,s.wg)(),(0,s.iD)("tbody",I5,[(0,s._)("tr",null,[(0,s.kq)("",!0),(0,s._)("td",R5,[(0,s._)("div",j5,[N5,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.perPage-1,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},Y5)))),128))])])])])):(0,s.kq)("",!0)])])])])]),(0,s._)("div",Z5,[(0,s.Wm)(n,{from:a.from,to:a.to,"last-page":a.lastPage,"per-page":a.perPage,total:a.total,"current-page":a.currentPage,onPageChange:e[2]||(e[2]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const B5={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},Q5={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},G5={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},J5={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},X5=["disabled"],t4=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),e4=(0,s._)("span",null," previous ",-1),a4=[t4,e4],r4=["disabled"],s4=(0,s._)("span",null," Next ",-1),i4=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),l4=[s4,i4];function o4(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",B5,[(0,s._)("div",Q5,[(0,s.Uk)(" Page "),(0,s._)("span",G5,(0,Q.zw)(a.currentPage)+" of "+(0,Q.zw)(a.lastPage),1)]),(0,s._)("div",J5,[(0,s._)("button",{disabled:a.currentPage<=1,onClick:e[0]||(e[0]=t=>l.changePage(a.currentPage-1)),class:(0,Q.C_)([[a.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},a4,10,X5),(0,s._)("button",{disabled:a.currentPage>=l.totalPages,onClick:e[1]||(e[1]=t=>l.changePage(a.currentPage+1)),class:(0,Q.C_)([[a.currentPage>=l.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},l4,10,r4)])])])}var n4={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const a=[];for(let r=t;r<=e;r++)a.push(r);return a}},methods:{changePage(t){this.$emit("pageChange",t)}}};const d4=(0,d.Z)(n4,[["render",o4]]);var w4=d4;const c4={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},u4={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},p4={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},m4={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},h4={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},g4={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},f4={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},v4={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},y4={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},x4={class:"tw-space-y-1"},_4={class:"tw-font-bold tw-text-green-500"},b4={class:"tw-block tw-max-w-[150px] tw-truncate"},k4={key:0,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},C4={key:1,class:"tw-font-bold tw-text-orange-500 tw-bg-orange-100 tw-rounded-lg tw-px-2 tw-text-sm"},D4={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},S4={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},z4={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function U4(t,e,a,r,i,l){const o=(0,s.up)("TableActions");return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",c4,[(0,s._)("div",null,[(0,s._)("h2",u4,(0,Q.zw)(a.item.id),1)])]),(0,s._)("td",p4,[(0,s._)("div",null,[(0,s._)("h2",m4,[(0,s._)("p",null,(0,Q.zw)(i.moment(a.item.created_at).format("DD[/]MM[/]YY")),1),(0,s.kq)("",!0)])])]),(0,s._)("td",h4,[(0,s._)("div",null,[(0,s._)("h2",g4,(0,Q.zw)(a.item.fullname),1)])]),(0,s._)("td",f4,[(0,s._)("div",null,[(0,s._)("h2",v4,(0,Q.zw)(a.item.phone),1)])]),(0,s._)("td",y4,[(0,s._)("div",null,[(0,s._)("ul",x4,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.item.items,(t=>((0,s.wg)(),(0,s.iD)("li",{dir:"rtl",class:"tw-font-[cairo] tw-flex tw-items-center tw-gap-1",key:t.id},[(0,s._)("span",_4,(0,Q.zw)(t.quantity)+" x ",1),(0,s.Uk)(),(0,s._)("span",b4,(0,Q.zw)(t.product.name),1),(0,s.Uk)(),t.product_variation.color&&!["/","-"].includes(t.product_variation.color)?((0,s.wg)(),(0,s.iD)("span",k4,(0,Q.zw)(t.product_variation.color),1)):(0,s.kq)("",!0),(0,s.Uk)(),t.product_variation.size&&!["/","-"].includes(t.product_variation.size)?((0,s.wg)(),(0,s.iD)("span",C4,(0,Q.zw)(t.product_variation.size),1)):(0,s.kq)("",!0)])))),128))])])]),(0,s._)("td",D4,[(0,s._)("span",{class:(0,Q.C_)([[l.confirmation.bgLight,l.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(l.confirmation.name),3)]),(0,s._)("td",S4,[(0,s._)("span",{class:(0,Q.C_)([[l.deliveryState.bgLight,l.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(l.deliveryState.value?l.deliveryState.name:"Not Selected"),3)]),(0,s._)("td",z4,[(0,s._)("div",null,[(0,s.Wm)(o,{onUpdate:e[0]||(e[0]=e=>t.$emit("update",e)),item:a.item},null,8,["item"])])])])}const L4={class:"tw-h-full"},P4={class:"tw-flex tw-items-center tw-gap-2"},A4={key:0};function W4(t,e,a,r,i,l){const o=(0,s.up)("UpdatePopup");return(0,s.wg)(),(0,s.iD)("div",L4,[(0,s._)("div",P4,[(0,s.kq)("",!0),(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.popup=!0),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])]),i.popup?((0,s.wg)(),(0,s.iD)("div",A4,[(0,s.Wm)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t),item:a.item},null,8,["visible","item"])])):(0,s.kq)("",!0)])}const $4={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},E4=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),q4={class:"tw-bg-white tw-p-4"},O4={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},T4={class:"tw-col-span-2 md:tw-col-span-1"},V4=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),F4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},I4={class:"tw-col-span-2 md:tw-col-span-1"},R4=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),j4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},N4={class:"tw-col-span-2 md:tw-col-span-1"},M4=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),H4={class:"tw-relative"},Y4=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),Z4=["value"],K4=["value"],B4=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),Q4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},G4={class:"tw-col-span-2 md:tw-col-span-1"},J4=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),X4={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},t3={class:"tw-col-span-2"},e3={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},a3={key:0,class:"tw-text-red-400 tw-text-xs"},r3={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},s3=["disabled"],i3=(0,s._)("span",null,"Update",-1);function l3(t,e,a,i,l,o){(0,s.up)("OrderAffectation");const n=(0,s.up)("OrderItems"),d=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(d,{visible:a.visible,closeable:!1,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",$4,[E4,(0,s._)("div",q4,[(0,s._)("div",O4,[(0,s._)("div",T4,[V4,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>l.errors.fullname=null),type:"text",class:(0,Q.C_)([[l.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[r.nr,l.itemCopy.fullname]]),l.errors.fullname?((0,s.wg)(),(0,s.iD)("label",F4,(0,Q.zw)(l.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",I4,[R4,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>l.errors.phone=null),class:(0,Q.C_)([[l.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[r.nr,l.itemCopy.phone]]),l.errors.phone?((0,s.wg)(),(0,s.iD)("label",j4,(0,Q.zw)(l.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",N4,[M4,(0,s._)("div",H4,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.itemCopy.city=t),onChange:e[5]||(e[5]=t=>l.errors.city=null),class:(0,Q.C_)([[l.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[Y4,(0,s._)("option",{value:l.itemCopy.city,disabled:""},(0,Q.zw)(l.itemCopy.city),9,Z4),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,K4)))),128))],34),[[r.bM,l.itemCopy.city]]),B4]),l.errors.city?((0,s.wg)(),(0,s.iD)("label",Q4,(0,Q.zw)(l.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",G4,[J4,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>l.errors.adresse=null),class:(0,Q.C_)([[l.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[r.nr,l.itemCopy.adresse]]),l.errors.adresse?((0,s.wg)(),(0,s.iD)("label",X4,(0,Q.zw)(l.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s.kq)("",!0),(l.itemCopy.confirmation,(0,s.kq)("",!0)),(l.itemCopy.confirmation,(0,s.kq)("",!0)),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s._)("div",t3,[(0,s._)("label",e3,[(0,s.Uk)("Order Items "),l.errors.items?((0,s.wg)(),(0,s.iD)("span",a3," # "+(0,Q.zw)(l.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(n,{order:l.itemCopy,error:l.errors.items,products:l.products,"products-fetched":l.products_fetched,items:l.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>l.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",r3,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>o.handleUpdate&&o.handleUpdate(...t)),disabled:l.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[l.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),i3],8,s3)])])])),_:1},8,["visible","onCancel"])])}const o3=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.confirmation?e.affectation&&"confirmer"!=e.confirmation?(t.errors.affectation="Cannot update affectation: Order not confirmed.",!1):!!n3(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),n3=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let a=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",a=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",a=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",a=!1,!1):void 0)),a},d3=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const a=e.data.order;t.$emit("update",a),t.isLoading=!1,t.cancel(),t.errors={}},w3=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},c3=(t,e)=>{t.isLoading=!0,t.errors={},Zl.update(e.id,e).then((e=>d3(t,e.data))).catch((e=>w3(t,e.response.data))).finally((()=>t.isLoading=!1))},u3={key:0,class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},p3={key:1,class:"md:tw-col-span-12 tw-col-span-12"},m3={class:"tw-max-w-full tw-overflow-auto"},h3={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},g3={class:"tw-bg-gray-50"},f3={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},v3={key:0},y3=(0,s._)("td",{colspan:"3"},null,-1),x3=(0,s._)("td",null,[(0,s._)("div",{class:"tw-p-2"},[(0,s._)("p",null,"Total: ")])],-1),_3={colspan:"2",class:"tw-p-2"},b3={class:"tw-p-2 tw-py-1 tw-text-sm tw-text-green-500 tw-w-24 tw-font-medium tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},k3={colspan:"6"},C3={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},D3=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),S3=(0,s._)("span",null,"Add Item",-1),z3=[D3,S3],U3={key:1},L3={colspan:"6"},P3={class:"tw-scale-75 tw-p-5"};function A3(t,e,a,r,i,l){const o=(0,s.up)("ItemRow"),n=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[a.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",u3," No Order items ")),a.items.length?((0,s.wg)(),(0,s.iD)("div",p3,[(0,s._)("div",m3,[((0,s.wg)(),(0,s.iD)("table",{key:a.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",h3,[(0,s._)("tr",g3,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",f3,(0,Q.zw)(t),1)],2))),64))])]),a.productsFetched?((0,s.wg)(),(0,s.iD)("tbody",v3,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.items,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,item:t,products:a.products,onDelete:l.deleteItem,onUpdate:l.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,s._)("tr",null,[y3,x3,(0,s._)("td",_3,[(0,s._)("div",b3,[(0,s._)("p",null,(0,Q.zw)(i.currency)+" "+(0,Q.zw)(l.price),1)])])]),(0,s._)("tr",null,[(0,s._)("td",k3,[(0,s._)("div",C3,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},z3)])])])])):((0,s.wg)(),(0,s.iD)("tbody",U3,[(0,s._)("tr",null,[(0,s._)("td",L3,[(0,s._)("div",P3,[(0,s.Wm)(n)])])])]))]))])])):(0,s.kq)("",!0)])}var W3={components:{ItemRow:i$},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0,default:!1},order:{required:!0}},data(){return{currency:R}},computed:{price(){return Mi(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1]:1,e=t?t.id+1:1,a={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},r=[...this.items,a];this.$emit("update:items",r)}},mounted(){}};const $3=(0,d.Z)(W3,[["render",A3]]);var E3=$3;const q3=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),O3={key:0,class:"tw-relative"},T3=["value","disabled"],V3=(0,s._)("option",{value:""},"Choose a Delivery",-1),F3=["value"],I3=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),R3={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},j3={key:2,class:"tw-relative"},N3={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},M3=(0,s._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,s._)("option",{value:null,selected:""},"Loading...")],-1),H3=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function Y3(t,e,a,r,i,l){const o=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[q3,i.fetched?((0,s.wg)(),(0,s.iD)("div",O3,[(0,s._)("select",{value:a.affectation,onChange:e[0]||(e[0]=(...t)=>l.handleChange&&l.handleChange(...t)),disabled:"confirmer"!=a.item.confirmation,class:(0,Q.C_)([[a.error&&"!tw-border-red-400","confirmer"!=a.item.confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[V3,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,F3)))),128))],42,T3),I3])):(0,s.kq)("",!0),i.fetched&&a.error?((0,s.wg)(),(0,s.iD)("label",R3,(0,Q.zw)(a.error),1)):(0,s.kq)("",!0),i.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",j3,[(0,s._)("div",N3,[(0,s.Wm)(o)]),M3,H3]))])}var Z3={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const K3=(0,d.Z)(Z3,[["render",Y3]]);var B3=K3,Q3={components:{OrderItems:E3,OrderAffectation:B3},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmations:Yn,upsells:Kn,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=o3(this,this.itemCopy);if(!t)return!1;c3(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,er.allForOrder(this.itemCopy.user_id).then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const G3=(0,d.Z)(Q3,[["render",l3]]);var J3=G3,X3={components:{UpdatePopup:J3},props:{item:{required:!0}},data(){return{popup:!1,isLoading:!1}},methods:{handle(){}}};const t8=(0,d.Z)(X3,[["render",W4]]);var e8=t8,a8={components:{TableActions:e8},props:{item:{required:!0}},data(){return{moment:cA()}},computed:{confirmation(){return Yn.find((t=>t.value==this.item.confirmation))},deliveryState(){return Bn.find((t=>t.value==this.item.delivery))}},methods:{}};const r8=(0,d.Z)(a8,[["render",U4]]);var s8=r8,i8={components:{TablePaginationNoNums:w4,TableRow:s8},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}}};const l8=(0,d.Z)(i8,[["render",K5]]);var o8=l8;const n8={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},d8={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},w8=["disabled"],c8=["disabled"],u8=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),p8=[u8],m8=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),h8=[m8],g8=["disabled"],f8=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),v8=[f8],y8=["disabled"],x8=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"m16.2 20.5l2.8-2.8V20h1v-4h-4v1h2.3l-2.8 2.8l.7.7ZM5 21q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h14q.825 0 1.413.588T21 5v6.7q-.475-.225-.975-.388T19 11.075V5H5v14h6.05q.075.55.238 1.05t.387.95H5Zm0-3v1V5v6.075V11v7Zm2-1h4.075q.075-.525.238-1.025t.362-.975H7v2Zm0-4h6.1q.8-.75 1.787-1.25T17 11.075V11H7v2Zm0-4h10V7H7v2Zm11 14q-2.075 0-3.538-1.463T13 18q0-2.075 1.463-3.538T18 13q2.075 0 3.538 1.463T23 18q0 2.075-1.463 3.538T18 23Z"})],-1),_8=[x8],b8={class:"tw-relative"},k8=["value"],C8=(0,s.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option>',6),D8=[C8],S8=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),z8={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},U8=["value"],L8={class:"tw-overflow-hidden tw-col-span-1"},P8={class:"tw-overflow-hidden tw-col-span-1"},A8={class:"tw-overflow-hidden tw-col-span-1"};function W8(t,e,a,i,l,o){const n=(0,s.up)("FiltersWrapper"),d=(0,s.up)("IndexExport"),w=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",n8,[(0,s._)("div",d8,[(0,s._)("button",{class:(0,Q.C_)([[l.showAll&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 hover:tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"]),disabled:l.showAll,onClick:e[0]||(e[0]=t=>o.filterToday(!1))}," View all ",10,w8),(0,s._)("button",{class:(0,Q.C_)([[l.showToday&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"]),disabled:l.showToday,onClick:e[1]||(e[1]=t=>o.filterToday(!0))}," Today ",10,c8),(0,s._)("button",{onClick:e[2]||(e[2]=t=>l.showFilters=!l.showFilters),class:(0,Q.C_)([[l.showFilters&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},p8,2),a.activeStatistics&&a.statistics?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[3]||(e[3]=t=>l.showStatistics=!l.showStatistics),class:(0,Q.C_)([[l.showStatistics&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"])},h8,2)):(0,s.kq)("",!0),(0,s._)("button",{onClick:e[4]||(e[4]=e=>t.$emit("fresh")),disabled:a.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},v8,8,g8),(0,s._)("button",{onClick:e[5]||(e[5]=t=>l.showExport=!l.showExport),class:(0,Q.C_)([[l.showExport&&"!tw-bg-gray-100"],"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"]),disabled:a.loading},_8,10,y8),(0,s._)("div",b8,[(0,s._)("select",{onChange:e[6]||(e[6]=(...t)=>o.handlePerPageChange&&o.handlePerPageChange(...t)),value:a.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},D8,40,k8),S8])]),(0,s._)("div",z8,[(0,s._)("input",{type:"text",placeholder:"Search",value:a.search,onInput:e[7]||(e[7]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[8]||(e[8]=(0,r.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,U8),(0,s._)("button",{onClick:e[9]||(e[9]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-magnify")])),_:1})])])]),(0,s._)("div",{class:(0,Q.C_)([[l.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",L8,[(0,s.Wm)(n,{onClear:e[10]||(e[10]=e=>t.$emit("clear")),onFilter:e[11]||(e[11]=e=>t.$emit("filter")),filters:a.filters,onUpdate:e[12]||(e[12]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),(0,s._)("div",{class:(0,Q.C_)([[l.showExport?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",P8,[(0,s.Wm)(d)])],2),a.statistics?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([[l.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",A8,[(0,s.Wm)(w,{statistics:a.statistics},null,8,["statistics"])])],2)):(0,s.kq)("",!0)])}const $8={class:"tw-mb-4"},E8={class:"tw-grid tw-grid-cols-12 tw-gap-4"},q8={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},O8={class:"tw-flex tw-items-center tw-justify-between"},T8={class:"tw-text-xl tw-font-bold tw-text-gray-900"},V8={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function F8(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",$8,[(0,s._)("div",E8,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.visible,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,s._)("div",q8,[(0,s._)("p",{class:(0,Q.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[l.getConfirmation(t.confirmation).textLight,l.getConfirmation(t.confirmation).bgLight]])},(0,Q.zw)(t.name),3),(0,s._)("div",O8,[(0,s._)("span",T8,(0,Q.zw)(t.total),1),(0,s._)("span",V8,(0,Q.zw)(t.percent)+"%",1)])])])))),128))])])}var I8={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return Yn.find((e=>e.value==t))}}};const R8=(0,d.Z)(I8,[["render",F8]]);var j8=R8;const N8={class:"tw-mb-4"};function M8(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",N8," Exporting... ")}var H8={};const Y8=(0,d.Z)(H8,[["render",M8]]);var Z8=Y8;const K8={class:"tw-mb-4"},B8={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},Q8={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},G8=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created From",-1),J8=["value"],X8={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},t6=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created To",-1),e6=["value"],a6={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},r6=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Dropped From",-1),s6=["value"],i6={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},l6=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Dropped To",-1),o6=["value"],n6={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},d6=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),w6=["value"],c6=(0,s._)("option",{value:"all",selected:""},"All",-1),u6=["value"],p6={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},m6=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),h6=["value"],g6=(0,s._)("option",{value:"all",selected:""},"All",-1),f6=["value"],v6={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},y6=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),x6=["value"],_6=(0,s._)("option",{value:"all",selected:""},"All",-1),b6=(0,s._)("option",{value:"oui",class:"tw-capitalize"},"Yes",-1),k6=(0,s._)("option",{value:"non",class:"tw-capitalize"},"Non",-1),C6=[_6,b6,k6],D6={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},S6=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),z6=(0,s._)("span",null,"Clear",-1),U6=[S6,z6],L6=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),P6=(0,s._)("span",null,"Filter",-1),A6=[L6,P6];function W6(t,e,a,r,i,l){(0,s.up)("DateFilter"),(0,s.up)("AgentFilter"),(0,s.up)("AffectationFilter");return(0,s.wg)(),(0,s.iD)("div",K8,[(0,s._)("div",B8,[(0,s.kq)("",!0),(0,s._)("div",Q8,[G8,(0,s._)("input",{value:a.filters.created_from,type:"date",onChange:e[1]||(e[1]=e=>t.$emit("update",{...a.filters,created_from:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,J8)]),(0,s._)("div",X8,[t6,(0,s._)("input",{value:a.filters.created_to,type:"date",onChange:e[2]||(e[2]=e=>t.$emit("update",{...a.filters,created_to:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,e6)]),(0,s._)("div",a6,[r6,(0,s._)("input",{value:a.filters.dropped_from,type:"date",onChange:e[3]||(e[3]=e=>t.$emit("update",{...a.filters,dropped_from:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,s6)]),(0,s._)("div",i6,[l6,(0,s._)("input",{value:a.filters.dropped_to,type:"date",onChange:e[4]||(e[4]=e=>t.$emit("update",{...a.filters,dropped_to:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,o6)]),(0,s.kq)("",!0),(0,s._)("div",n6,[d6,(0,s._)("select",{value:a.filters.confirmation,onChange:e[6]||(e[6]=e=>t.$emit("update",{...a.filters,confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[c6,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,u6)))),128))],40,w6)]),(0,s.kq)("",!0),(0,s._)("div",p6,[m6,(0,s._)("select",{onChange:e[8]||(e[8]=e=>t.$emit("update",{...a.filters,delivery:e.target.value})),value:a.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[g6,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,f6)))),128))],40,h6)]),(0,s._)("div",v6,[y6,(0,s._)("select",{value:a.filters.upsell,onChange:e[9]||(e[9]=e=>t.$emit("update",{...a.filters,upsell:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},C6,40,x6)]),(0,s._)("div",D6,[(0,s._)("button",{onClick:e[10]||(e[10]=e=>t.$emit("clear")),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},U6),(0,s._)("button",{onClick:e[11]||(e[11]=e=>t.$emit("filter")),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},A6)])])])}const $6={class:"tw-text-sm tw-text-neutral-600"},E6=["onClick"];function q6(t,e,a,r,i,l){const o=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("span",$6,(0,Q.zw)(a.name),1),(0,s.Wm)(o,{modelValue:i.date,"onUpdate:modelValue":[e[0]||(e[0]=t=>i.date=t),l.onDateRangePicked],onCleared:l.cleared,format:i.dateFilterFormat,range:"","preset-ranges":i.presetRanges},{yearly:(0,s.w5)((({label:t,range:e,presetDateRange:a})=>[(0,s._)("span",{onClick:t=>a(e)},(0,Q.zw)(t),9,E6)])),_:1},8,["modelValue","onCleared","onUpdate:modelValue","format","preset-ranges"])])}var O6={props:["name"],data(){return{date:["",""],dateFilterFormat:"yyyy-MM-dd",formattedStartDate:"",formattedEndDate:"",presetRanges:[{label:"Today",range:[new Date,new Date]},{label:"Yesterday",range:[(0,Wi.Z)(new Date,1),(0,Wi.Z)(new Date,1)]},{label:"This month",range:[(0,$i.Z)(new Date),(0,Ei.Z)(new Date)]},{label:"Last month",range:[(0,$i.Z)((0,qi.Z)(new Date,1)),(0,Ei.Z)((0,qi.Z)(new Date,1))]},{label:"This year",range:[(0,Oi.Z)(new Date),(0,Ti.Z)(new Date)]}]}},watch:{date(){this.$emit("update:filter",[this.formattedStartDate,this.formattedEndDate])}},methods:{onDateRangePicked(t){t?(this.formattedStartDate=t[0],this.formattedEndDate=t[1]):(this.formattedStartDate=null,this.formattedEndDate=null)},cleared(){this.date=["",""]}}};const T6=(0,d.Z)(O6,[["render",q6]]);var V6=T6;const F6={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},I6=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),R6=["value"],j6=(0,s._)("option",{value:"all"},"All",-1),N6=(0,s._)("option",{value:""},"No Delivery",-1),M6=["value"];function H6(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",F6,[I6,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,affectation:e.target.value})),value:a.filters.affectation,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[j6,N6,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,M6)))),128))],40,R6)])}var Y6={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.fetched?this.users.filter((t=>"delivery"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const Z6=(0,d.Z)(Y6,[["render",H6]]);var K6=Z6;const B6={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Q6=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Agent",-1),G6=["value"],J6=(0,s._)("option",{value:"all"},"All",-1),X6=(0,s._)("option",{value:""},"No Agent",-1),t7=["value"];function e7(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",B6,[Q6,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,agente_id:e.target.value})),value:a.filters.agente_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[J6,X6,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,t7)))),128))],40,G6)])}var a7={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},agents(){return this.fetched?this.users.filter((t=>"agente"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const r7=(0,d.Z)(a7,[["render",e7]]);var s7=r7,i7={components:{DateFilter:V6,AffectationFilter:K6,AgentFilter:s7},props:{filters:{required:!0,default:{}}},data(){return{confirmations:Yn,deliveries:Bn,dateFilter:["",""]}}};const l7=(0,d.Z)(i7,[["render",W6]]);var o7=l7,n7={components:{IndexStatistics:j8,FiltersWrapper:o7,IndexExport:Z8},props:{perPage:{type:Number},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1,showExport:!1,showAll:!0,showToday:!1}},methods:{handlePerPageChange(t){this.$emit("perPageChange",t.target.value)},filterToday(t){var e=null;t?(this.showAll=!1,this.showToday=!0,e=cA()(),e=e.format("YYYY-MM-DD")):(this.showAll=!0,this.showToday=!1),this.$emit("update:filters",{...this.filters,created_from:e,created_to:e}),this.$emit("filter")}},mounted(){}};const d7=(0,d.Z)(n7,[["render",W8]]);var w7=d7,c7={components:{IndexTable:o8,IndexFilters:w7},data(){return{fetching:!0,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",delivery:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,v5.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Hi(t.first_page_url),this.lase_page_url=Hi(t.last_page_url),this.next_page_url=Hi(t.next_page_url),this.prev_page_url=Hi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleClearFilters(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",delivery:"all"},this.handlePageChange(1)},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){console.log(t),this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const u7=(0,d.Z)(c7,[["render",g5]]);var p7=u7,m7={name:"seller",path:"/seller/list",component:sr,meta:{module:"seller"},children:[{name:"seller/list",path:"",component:p7,meta:{module:"sellersale",subModule:"seller/list",title:"Seller List",gate:"show_seller_sales"}}]};const h7={class:"py-5 px-2 tw-border tw-bg-white tw-w-full tw-rounded-md tw-mb-5"},g7={class:"tw-px-3"},f7={class:"tw-flex tw-items-center tw-justify-between tw-flex-wrap"},v7={class:"tw-flex tw-items-center tw-gap-x-3"},y7=(0,s._)("h2",{class:"tw-text-lg tw-font-medium tw-text-gray-800 darkx:tw-text-white"},"Orders",-1),x7={class:"tw-px-3 tw-py-1 tw-text-xs tw-text-emerald-600 tw-bg-emerald-100 tw-rounded-full darkx:tw-bg-gray-800 darkx:tw-text-orange-400"},_7=(0,s._)("p",{class:"tw-mt-1 tw-text-sm tw-text-gray-500 darkx:tw-text-gray-300"},"These orders have needs to reconfirmed.",-1);function b7(t,e,a,r,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("IndexTable");return(0,s.wg)(),(0,s.iD)("div",h7,[(0,s._)("section",g7,[(0,s._)("div",f7,[(0,s._)("div",null,[(0,s._)("div",v7,[y7,(0,s._)("span",x7,(0,Q.zw)(i.totalOrders)+" order",1)]),_7]),(0,s.kq)("",!0)]),(0,s.Wm)(o,{search:i.search,"onUpdate:search":e[0]||(e[0]=t=>i.search=t),filters:i.filters,"onUpdate:filters":e[1]||(e[1]=t=>i.filters=t),onFilter:e[2]||(e[2]=t=>l.handlePerPageChange(i.per_page)),onPerPageChange:l.handlePerPageChange,onFresh:l.paginateOrders,loading:i.fetching,statistics:i.statistics,"active-statistics":""},null,8,["search","filters","onPerPageChange","onFresh","loading","statistics"]),(0,s._)("div",null,[(0,s.Wm)(n,{onUpdate:l.handleItemUpdate,onPageChange:l.handlePageChange,onSortOrder:l.handleSortOrderChange,loading:i.fetching,from:i.from,to:i.to,"last-page":i.last_page,"per-page":i.per_page,total:i.total,"current-page":i.current_page,items:i.items},null,8,["onUpdate","onPageChange","onSortOrder","loading","from","to","last-page","per-page","total","current-page","items"])])])])}const k7={class:"tw-flex tw-flex-col"},C7={class:"tw-overflow-x-auto"},D7={class:"tw-inline-block tw-min-w-full tw-align-middle"},S7={class:"tw-overflow-hidden tw-border tw-border-gray-200 darkx:tw-border-gray-700 md:tw-rounded-lg"},z7={class:"tw-min-w-full tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700"},U7={class:"tw-bg-gray-50 darkx:tw-bg-gray-800"},L7=(0,s._)("th",{scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},[(0,s._)("span",null,"ID")],-1),P7={scope:"col",class:"tw-py-3.5 tw-px-4 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"},A7=(0,s._)("span",null,"Created",-1),W7=(0,s._)("svg",{class:"tw-h-3",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,s._)("path",{d:"M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.1"}),(0,s._)("path",{d:"M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z",fill:"currentColor",stroke:"currentColor","stroke-width":"0.3"})],-1),$7=[A7,W7],E7=(0,s._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Client ",-1),q7=(0,s._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Phone ",-1),O7=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Confirmation ",-1),T7=(0,s._)("th",{scope:"col",class:"tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Affected ",-1),V7=(0,s._)("th",{scope:"col",class:"tw-w-10 tw-px-12 tw-py-3.5 tw-text-sm tw-font-normal tw-text-left rtl:tw-text-right tw-text-gray-500 darkx:tw-text-gray-400"}," Delivery ",-1),F7=(0,s._)("th",{scope:"col",class:"tw-relative tw-py-3.5 tw-px-4"},[(0,s._)("span",{class:"tw-sr-only"},"Actions")],-1),I7={key:0,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},R7={key:1,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},j7=(0,s._)("tr",null,[(0,s._)("td",{colspan:"8"},[(0,s._)("div",{class:"tw-p-5 tw-text-center tw-text-gray-600 tw-font-medium"}," No Order was found ! ")])],-1),N7=[j7],M7={key:2,class:"tw-bg-white tw-divide-y tw-divide-gray-200 darkx:tw-divide-gray-700 darkx:tw-bg-gray-900"},H7={colspan:"8"},Y7={role:"status",class:"tw-w-full tw-p-4 tw-space-y-4 tw-border-gray-200 tw-divide-y tw-divide-gray-200 tw-rounded tw-shadow tw-animate-pulse dark:tw-divide-gray-700 md:tw-p-6 dark:tw-border-gray-700"},Z7=(0,s._)("div",{class:"tw-flex tw-items-center tw-justify-between"},[(0,s._)("div",null,[(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})]),(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"})],-1),K7=(0,s._)("div",null,[(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-600 tw-w-24 tw-mb-2.5"}),(0,s._)("div",{class:"tw-w-32 tw-h-2 tw-bg-gray-200 tw-rounded-full dark:tw-bg-gray-700"})],-1),B7=(0,s._)("div",{class:"tw-h-2.5 tw-bg-gray-300 tw-rounded-full dark:tw-bg-gray-700 tw-w-12"},null,-1),Q7=[K7,B7],G7={class:"tw-mt-6"};function J7(t,e,a,r,i,l){const o=(0,s.up)("TableRow"),n=((0,s.up)("loading"),(0,s.up)("TablePaginationNoNums"));return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",k7,[(0,s._)("div",C7,[(0,s._)("div",D7,[(0,s._)("div",S7,[(0,s._)("table",z7,[(0,s._)("thead",U7,[(0,s._)("tr",null,[L7,(0,s._)("th",P7,[(0,s._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("sortOrder",{name:"created_at"})),class:"tw-flex tw-items-center tw-gap-x-3 focus:tw-outline-none"},$7)]),E7,q7,O7,T7,V7,F7])]),!a.loading&&a.items.length>0?((0,s.wg)(),(0,s.iD)("tbody",I7,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.items,(a=>((0,s.wg)(),(0,s.j4)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),key:a.id,item:a},null,8,["item"])))),128))])):(0,s.kq)("",!0),a.loading||0!=a.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("tbody",R7,N7)),a.loading?((0,s.wg)(),(0,s.iD)("tbody",M7,[(0,s._)("tr",null,[(0,s.kq)("",!0),(0,s._)("td",H7,[(0,s._)("div",Y7,[Z7,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.perPage-1,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"tw-flex tw-items-center tw-justify-between tw-pt-4"},Q7)))),128))])])])])):(0,s.kq)("",!0)])])])])]),(0,s._)("div",G7,[(0,s.Wm)(n,{from:a.from,to:a.to,"last-page":a.lastPage,"per-page":a.perPage,total:a.total,"current-page":a.currentPage,onPageChange:e[2]||(e[2]=e=>t.$emit("pageChange",e))},null,8,["from","to","last-page","per-page","total","current-page"])])])}const X7={class:"sm:tw-flex sm:tw-items-center sm:tw-justify-between"},t9={class:"tw-text-sm tw-text-gray-500 darkx:tw-text-gray-400"},e9={class:"tw-font-medium tw-text-gray-700 darkx:tw-text-gray-100"},a9={class:"tw-flex tw-items-center tw-mt-4 tw-gap-x-4 sm:tw-mt-0"},r9=["disabled"],s9=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18"})],-1),i9=(0,s._)("span",null," previous ",-1),l9=[s9,i9],o9=["disabled"],n9=(0,s._)("span",null," Next ",-1),d9=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5 rtl:tw--scale-x-100"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"})],-1),w9=[n9,d9];function c9(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",X7,[(0,s._)("div",t9,[(0,s.Uk)(" Page "),(0,s._)("span",e9,(0,Q.zw)(a.currentPage)+" of "+(0,Q.zw)(a.lastPage),1)]),(0,s._)("div",a9,[(0,s._)("button",{disabled:a.currentPage<=1,onClick:e[0]||(e[0]=t=>l.changePage(a.currentPage-1)),class:(0,Q.C_)([[a.currentPage<=1&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},l9,10,r9),(0,s._)("button",{disabled:a.currentPage>=l.totalPages,onClick:e[1]||(e[1]=t=>l.changePage(a.currentPage+1)),class:(0,Q.C_)([[a.currentPage>=l.totalPages&&"tw-cursor-not-allowed"],"tw-flex tw-items-center tw-justify-center tw-w-1/2 tw-px-5 tw-py-2 tw-text-sm tw-text-gray-700 tw-capitalize tw-transition-colors tw-duration-200 tw-bg-white tw-border tw-border-solid tw-rounded-md sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-100 darkx:tw-bg-gray-900 darkx:tw-text-gray-200 darkx:tw-border-gray-700 darkx:hover:tw-bg-gray-800"])},w9,10,o9)])])])}var u9={props:{from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:1},total:{type:Number,default:1},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},data(){return{totalItems:100,itemsPerPage:5}},computed:{totalPages(){return this.lastPage},showEllipsisStart(){return this.currentPage>3},showEllipsisEnd(){return this.currentPage<this.totalPages-2},visiblePages(){let t=Math.max(1,this.currentPage-1),e=Math.min(this.totalPages,this.currentPage+1);const a=[];for(let r=t;r<=e;r++)a.push(r);return a}},methods:{changePage(t){this.$emit("pageChange",t)}}};const p9=(0,d.Z)(u9,[["render",c9]]);var m9=p9;const h9={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},g9={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white"},f9={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},v9={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-flex tw-items-center tw-gap-2"},y9={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},x9={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},_9={class:"tw-px-4 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},b9={class:"tw-font-medium tw-text-gray-800 darkx:tw-text-white tw-font-[cairo]"},k9={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},C9={class:"tw-px-12 tw-py-2 tw-text-sm tw-whitespace-nowrap"},D9=(0,s._)("div",{class:"tw-w-1.5 tw-h-1.5 tw-rounded-full tw-bg-emerald-500"},null,-1),S9={key:1},z9={class:"tw-px-12 tw-py-2 tw-text-sm tw-font-medium tw-whitespace-nowrap"},U9={class:"tw-px-4 tw-py-2 tw-text-sm tw-whitespace-nowrap"};function L9(t,e,a,r,i,l){const o=(0,s.up)("TableActions");return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",h9,[(0,s._)("div",null,[(0,s._)("h2",g9,(0,Q.zw)(a.item.id),1)])]),(0,s._)("td",f9,[(0,s._)("div",null,[(0,s._)("h2",v9,[(0,s._)("p",null,(0,Q.zw)(i.moment(a.item.created_at).format("DD[/]MM[/]YY")),1),(0,s.kq)("",!0)])])]),(0,s._)("td",y9,[(0,s._)("div",null,[(0,s._)("h2",x9,(0,Q.zw)(a.item.fullname),1)])]),(0,s._)("td",_9,[(0,s._)("div",null,[(0,s._)("h2",b9,(0,Q.zw)(a.item.phone),1)])]),(0,s._)("td",k9,[(0,s._)("span",{class:(0,Q.C_)([[l.confirmation.bgLight,l.confirmation.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(l.confirmation.name),3)]),(0,s._)("td",C9,[a.item.delivery_fullname?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([["tw-text-emerald-800","tw-bg-emerald-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-pl-1.5 tw-py-0.5 tw-rounded tw-w-fit tw-flex tw-items-center tw-gap-2"])},[D9,(0,s._)("span",null,(0,Q.zw)(a.item.delivery_fullname),1)])):((0,s.wg)(),(0,s.iD)("div",S9,[(0,s._)("span",{class:(0,Q.C_)([["tw-text-gray-800","tw-bg-gray-100"],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},"No Delivery")]))]),(0,s._)("td",z9,[(0,s._)("span",{class:(0,Q.C_)([[l.deliveryState.bgLight,l.deliveryState.textLight],"tw-text-xs tw-font-medium tw-mr-2 tw-px-2.5 tw-py-0.5 tw-rounded"])},(0,Q.zw)(l.deliveryState.value?l.deliveryState.name:"Not Selected"),3)]),(0,s._)("td",U9,[(0,s._)("div",null,[(0,s.Wm)(o,{onUpdate:e[0]||(e[0]=e=>t.$emit("update",e)),item:a.item},null,8,["item"])])])])}const P9={class:"tw-h-full"},A9={class:"tw-flex tw-items-center tw-gap-2"},W9=["href"],$9={key:0};function E9(t,e,a,r,i,l){const o=(0,s.up)("UpdatePopup");return(0,s.wg)(),(0,s.iD)("div",P9,[(0,s._)("div",A9,[(0,s._)("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+a.item.phone.replace("+","").replace("-","").replace(" ",""),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-green-500/20 hover:tw-bg-green-500/10 hover:tw-border-green-500/70 tw-duration-300 tw-text-green-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-whatsapp")])),_:1})],8,W9),(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.popup=!0),class:"tw-px-2 tw-py-1 tw-w-[25px] tw-h-[25px] tw-border tw-border-solid tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-text-orange-500/80 tw-rounded-md tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"x-small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-pencil-outline")])),_:1})])]),i.popup?((0,s.wg)(),(0,s.iD)("div",$9,[(0,s.Wm)(o,{onUpdate:e[1]||(e[1]=e=>t.$emit("update",e)),visible:i.popup,"onUpdate:visible":e[2]||(e[2]=t=>i.popup=t),item:a.item},null,8,["visible","item"])])):(0,s.kq)("",!0)])}const q9={class:"tw-mx-auto tw-w-[95%] md:tw-max-w-[800px] tw-overflow-hidden tw-h-fit dark:tw-bg-neutral-900 tw-bg-white tw-border tw-border-solid dark:tw-border-neutral-700 tw-border-neutral-300 tw-shadow-md tw-my-5 tw-rounded-lg"},O9=(0,s._)("div",{class:"tw-p-4 tw-text-lg tw-border-b tw-border-solid tw-font-medium tw-flex dark:tw-text-neutral-400 tw-text-neutral-500 tw-items-center tw-gap-4 dark:tw-bg-neutral-800 tw-bg-gray-50"}," Order Informations ",-1),T9={class:"tw-bg-white tw-p-4"},V9={class:"tw-grid tw-gap-6 tw-gap-y-5 tw-grid-cols-1 md:tw-grid-cols-2"},F9={class:"tw-col-span-2 md:tw-col-span-1"},I9=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Client Name",-1),R9={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},j9={class:"tw-col-span-2 md:tw-col-span-1"},N9=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Phone Number",-1),M9={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},H9={class:"tw-col-span-2 md:tw-col-span-1"},Y9=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"City",-1),Z9={class:"tw-relative"},K9=(0,s._)("option",{value:null,disabled:""},"Choose a City",-1),B9=["value"],Q9=["value"],G9=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),J9={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},X9={class:"tw-col-span-2 md:tw-col-span-1"},ttt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Address",-1),ett={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},att={class:"tw-col-span-2"},rtt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),stt={class:"tw-relative"},itt=["value"],ltt=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),ott={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},ntt={key:0,class:"md:tw-col-span-1 tw-col-span-2"},dtt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Date",-1),wtt={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},ctt={key:1,class:"md:tw-col-span-1 tw-col-span-2"},utt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Reported Note",-1),ptt={class:"tw-col-span-2"},mtt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900 dark:tw-text-white"},"Note",-1),htt={key:0,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},gtt={class:"md:tw-col-span-1 tw-col-span-2"},ftt={class:"md:tw-col-span-1 tw-col-span-2"},vtt=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),ytt={class:"tw-relative"},xtt=["value"],_tt=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),btt={class:"tw-col-span-2"},ktt={class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},Ctt={key:0,class:"tw-text-red-400 tw-text-xs"},Dtt={class:"tw-flex tw-justify-end tw-items-center tw-p-4 tw-gap-3 dark:tw-bg-neutral-900 tw-bg-gray-50 tw-border-t tw-border-solid"},Stt=["disabled"],ztt=(0,s._)("span",null,"Update",-1);function Utt(t,e,a,i,l,o){const n=(0,s.up)("OrderAffectation"),d=(0,s.up)("OrderItems"),w=(0,s.up)("popup-new");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(w,{visible:a.visible,closeable:!1,onCancel:o.cancel},{default:(0,s.w5)((()=>[(0,s._)("div",q9,[O9,(0,s._)("div",T9,[(0,s._)("div",V9,[(0,s._)("div",F9,[I9,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.itemCopy.fullname=t),onInput:e[1]||(e[1]=t=>l.errors.fullname=null),type:"text",class:(0,Q.C_)([[l.errors.fullname&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),placeholder:"John",required:""},null,34),[[r.nr,l.itemCopy.fullname]]),l.errors.fullname?((0,s.wg)(),(0,s.iD)("label",R9,(0,Q.zw)(l.errors.fullname),1)):(0,s.kq)("",!0)]),(0,s._)("div",j9,[N9,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.itemCopy.phone=t),onInput:e[3]||(e[3]=t=>l.errors.phone=null),class:(0,Q.C_)([[l.errors.phone&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"123-45-678",required:""},null,34),[[r.nr,l.itemCopy.phone]]),l.errors.phone?((0,s.wg)(),(0,s.iD)("label",M9,(0,Q.zw)(l.errors.phone),1)):(0,s.kq)("",!0)]),(0,s._)("div",H9,[Y9,(0,s._)("div",Z9,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.itemCopy.city=t),onChange:e[5]||(e[5]=t=>l.errors.city=null),class:(0,Q.C_)([[l.errors.city&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 tw-pr-7"])},[K9,(0,s._)("option",{value:l.itemCopy.city,disabled:""},(0,Q.zw)(l.itemCopy.city),9,B9),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cities,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.name,key:t.id},(0,Q.zw)(t.name),9,Q9)))),128))],34),[[r.bM,l.itemCopy.city]]),G9]),l.errors.city?((0,s.wg)(),(0,s.iD)("label",J9,(0,Q.zw)(l.errors.city),1)):(0,s.kq)("",!0)]),(0,s._)("div",X9,[ttt,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.itemCopy.adresse=t),onInput:e[7]||(e[7]=t=>l.errors.adresse=null),class:(0,Q.C_)([[l.errors.adresse&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"text",placeholder:"Address",required:""},null,34),[[r.nr,l.itemCopy.adresse]]),l.errors.adresse?((0,s.wg)(),(0,s.iD)("label",ett,(0,Q.zw)(l.errors.adresse),1)):(0,s.kq)("",!0)]),(0,s._)("div",att,[rtt,(0,s._)("div",stt,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>l.itemCopy.followup_confirmation=t),onChange:e[9]||(e[9]=t=>l.errors.followup_confirmation=null),class:(0,Q.C_)([[l.errors.followup_confirmation&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmationsFollowup,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:(0,Q.C_)([t.text,!t.value&&"!tw-text-green-500"]),key:t.id},(0,Q.zw)(t.name),11,itt)))),128))],34),[[r.bM,l.itemCopy.followup_confirmation]]),ltt]),l.errors.followup_confirmation?((0,s.wg)(),(0,s.iD)("label",ott,(0,Q.zw)(l.errors.followup_confirmation),1)):(0,s.kq)("",!0)]),"reporter"==l.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",ntt,[dtt,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>l.itemCopy.reported_agente_date=t),onInput:e[11]||(e[11]=t=>l.errors.reported_agente_date=null),class:(0,Q.C_)([[l.errors.reported_agente_date&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),type:"date",required:""},null,34),[[r.nr,l.itemCopy.reported_agente_date]]),l.errors.reported_agente_date?((0,s.wg)(),(0,s.iD)("label",wtt,(0,Q.zw)(l.errors.reported_agente_date),1)):(0,s.kq)("",!0)])):(0,s.kq)("",!0),"reporter"==l.itemCopy.followup_confirmation?((0,s.wg)(),(0,s.iD)("div",ctt,[utt,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>l.itemCopy.reported_agente_note=t),rows:"1",class:"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500",placeholder:"Enter a note"},null,512),[[r.nr,l.itemCopy.reported_agente_note]])])):(0,s.kq)("",!0),(0,s._)("div",ptt,[mtt,(0,s.wy)((0,s._)("textarea",{"onUpdate:modelValue":e[13]||(e[13]=t=>l.itemCopy.note=t),onInput:e[14]||(e[14]=t=>l.errors.note=null),class:(0,Q.C_)([[l.errors.note&&"!tw-border-red-400"],"tw-bg-gray-50 tw-border tw-border-solid focus:tw-outline-none tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"]),rows:"3",placeholder:"Enter a note"},null,34),[[r.nr,l.itemCopy.note]]),l.errors.note?((0,s.wg)(),(0,s.iD)("label",htt,(0,Q.zw)(l.errors.note),1)):(0,s.kq)("",!0)]),(0,s._)("div",gtt,[(0,s.Wm)(n,{item:l.itemCopy,error:l.errors.affectation,"onUpdate:error":e[15]||(e[15]=t=>l.errors.affectation=t),affectation:l.itemCopy.affectation,"onUpdate:affectation":e[16]||(e[16]=t=>l.itemCopy.affectation=t)},null,8,["item","error","affectation"])]),(0,s._)("div",ftt,[vtt,(0,s._)("div",ytt,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>l.itemCopy.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.upsells,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([t.text]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,xtt)))),128))],512),[[r.bM,l.itemCopy.upsell]]),_tt])]),(0,s._)("div",btt,[(0,s._)("label",ktt,[(0,s.Uk)("Order Items "),l.errors.items?((0,s.wg)(),(0,s.iD)("span",Ctt," # "+(0,Q.zw)(l.errors.items),1)):(0,s.kq)("",!0)]),(0,s._)("div",null,[(0,s.Wm)(d,{order:l.itemCopy,error:l.errors.items,products:l.products,"products-fetched":l.products_fetched,items:l.itemCopy.items,"onUpdate:items":e[18]||(e[18]=t=>l.itemCopy.items=t)},null,8,["order","error","products","products-fetched","items"])])])])]),(0,s._)("div",Dtt,[(0,s._)("button",{onClick:e[19]||(e[19]=(...t)=>o.cancel&&o.cancel(...t)),class:"tw-py-2 tw-px-7 tw-rounded tw-text-sm tw-border tw-border-solid tw-border-tansparent dark:tw-border-neutral-900 hover:tw-border-neutral-400 dark:hover:tw-border-neutral-500 hover:tw-bg-gray-300 tw-bg-gray-200 dark:tw-bg-neutral-600 tw-duration-300 tw-text-neutral-900 dark:tw-text-neutral-300"}," Cancel "),(0,s._)("button",{onClick:e[20]||(e[20]=(...t)=>o.handleUpdate&&o.handleUpdate(...t)),disabled:l.isLoading,class:"tw-py-2 tw-px-7 tw-flex tw-items-center tw-rounded tw-text-sm tw-bg-orange-400 tw-border tw-border-solid tw-border-tansparent hover:tw-border-orange-600 dark:tw-border-neutral-900 dark:hover:tw-border-orange-500 hover:tw-bg-orange-500/80 dark:hover:tw-bg-orange-400 tw-duration-300 tw-text-white"},[(0,s.Wm)(X.t,{size:"small",class:(0,Q.C_)(["tw-duration-300 tw-animate-spin tw-overflow-hidden tw-max-w-0 tw-mr-0",[l.isLoading&&"!tw-max-w-[50px] !tw-mr-3"]])},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-loading")])),_:1},8,["class"]),ztt],8,Stt)])])])),_:1},8,["visible","onCancel"])])}const Ltt=(t,e)=>e.fullname?e.phone?e.adresse?e.note||"annuler"!=e.followup_confirmation?!!Ptt(t,e.items):(t.errors.note="Add Cancelation note !",!1):(t.errors.adresse="Address is required",!1):(t.errors.phone="Phone Number is required",!1):(t.errors.fullname="Client Name is required",!1),Ptt=(t,e)=>{if(!e.length)return t.errors.items="You should add one order item at least.",!1;let a=!0;return e.forEach((e=>0==e.product_id?(t.errors.items="Product is required for order item",a=!1,!1):0==e.product_variation_id?(t.errors.items="Select a product variation",a=!1,!1):0==e.quantity?(t.errors.items="Items quantity cannot be 0",a=!1,!1):void 0)),a},Att=(t,e)=>{t.$alert({title:"Updated Successfully",type:"success"});const a=e.data.order;t.$emit("update",a),t.isLoading=!1,t.cancel(),t.errors={}},Wtt=(t,e)=>{t.$alert({title:e.message,type:"error"}),"VALIDATION_ERROR"==e.code&&(t.errors=e.errors),t.isLoading=!1},$tt=(t,e)=>{t.isLoading=!0,t.errors={},Zl.update(e.id,e).then((e=>Att(t,e.data))).catch((e=>Wtt(t,e.response.data))).finally((()=>t.isLoading=!1))},Ett={key:0,class:"tw-col-span-12 tw-rounded-lg tw-text-center tw-p-5 tw-text-gray-700 tw-bg-gray-50"},qtt={key:1,class:"md:tw-col-span-12 tw-col-span-12"},Ott={class:"tw-max-w-full tw-overflow-auto"},Ttt={class:"tw-text-xs tw-text-gray-700 tw-uppercase !tw-rounded-t-lg tw-border tw-border-solid"},Vtt={class:"tw-bg-gray-50"},Ftt={class:"tw-w-fit tw-flex tw-whitespace-nowrap tw-capitalize"},Itt={key:0},Rtt=(0,s._)("td",{colspan:"3"},null,-1),jtt=(0,s._)("td",null,[(0,s._)("div",{class:"tw-p-2"},[(0,s._)("p",null,"Total: ")])],-1),Ntt={colspan:"2",class:"tw-p-2"},Mtt={class:"tw-p-2 tw-py-1 tw-text-sm tw-text-green-500 tw-w-24 tw-font-medium tw-block focus:tw-outline-none tw-shadow-sm tw-border-gray-300 tw-rounded tw-bg-gray-50 focus:tw-ring-orange-500 focus:tw-border-orange-500 dark:tw-bg-gray-700 dark:tw-border-gray-600 dark:tw-placeholder-gray-400 dark:tw-text-white dark:focus:tw-ring-orange-500 dark:focus:tw-border-orange-500"},Htt={colspan:"6"},Ytt={class:"tw-flex tw-justify-end tw-items-center tw-py-3"},Ztt=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"tw-w-5 tw-h-5"},[(0,s._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Ktt=(0,s._)("span",null,"Add Item",-1),Btt=[Ztt,Ktt],Qtt={key:1},Gtt={colspan:"6"},Jtt={class:"tw-scale-75 tw-p-5"};function Xtt(t,e,a,r,i,l){const o=(0,s.up)("ItemRow"),n=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[a.items.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",Ett," No Order items ")),a.items.length?((0,s.wg)(),(0,s.iD)("div",qtt,[(0,s._)("div",Ott,[((0,s.wg)(),(0,s.iD)("table",{key:a.items.length,class:"tw-w-full tw-text-sm tw-text-left tw-text-gray-500"},[(0,s._)("thead",Ttt,[(0,s._)("tr",Vtt,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(["product","","variation","quantity","price","actions"],(t=>(0,s._)("th",{class:(0,Q.C_)([["actions"==t&&"!tw-w-[40px]"],"tw-px-6 tw-py-3 text-truncate"]),key:t,scope:"col"},[(0,s._)("div",Ftt,(0,Q.zw)(t),1)],2))),64))])]),a.productsFetched?((0,s.wg)(),(0,s.iD)("tbody",Itt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.items,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,item:t,products:a.products,onDelete:l.deleteItem,onUpdate:l.updateItem},null,8,["item","products","onDelete","onUpdate"])))),128)),(0,s._)("tr",null,[Rtt,jtt,(0,s._)("td",Ntt,[(0,s._)("div",Mtt,[(0,s._)("p",null,(0,Q.zw)(i.currency)+" "+(0,Q.zw)(l.price),1)])])]),(0,s._)("tr",null,[(0,s._)("td",Htt,[(0,s._)("div",Ytt,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>l.addItem&&l.addItem(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-400 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},Btt)])])])])):((0,s.wg)(),(0,s.iD)("tbody",Qtt,[(0,s._)("tr",null,[(0,s._)("td",Gtt,[(0,s._)("div",Jtt,[(0,s.Wm)(n)])])])]))]))])])):(0,s.kq)("",!0)])}var tet={components:{ItemRow:i$},props:{items:{required:!0,default:[]},error:{required:!1,default:null},products:{required:!0},productsFetched:{required:!0,default:!1},order:{required:!0}},data(){return{currency:R}},computed:{price(){return Mi(this.order)}},methods:{updateItem(t){const e=this.items.map((e=>e.id==t.id?t:e));this.$emit("update:items",e)},deleteItem(t){const e=this.items.filter((e=>e.id!=t));this.$emit("update:items",e)},addItem(){const t=this.items.length>0?this.items[this.items.length-1]:1,e=t?t.id+1:1,a={id:e,quantity:0,price:0,product_variation_id:0,product_id:0},r=[...this.items,a];this.$emit("update:items",r)}},mounted(){}};const eet=(0,d.Z)(tet,[["render",Xtt]]);var aet=eet;const ret=(0,s._)("label",{class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),set={key:0,class:"tw-relative"},iet=["value","disabled"],oet=(0,s._)("option",{value:""},"Choose a Delivery",-1),net=["value"],det=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),wet={key:1,class:"tw-block tw-mb-2 tw-text-xs tw-font-medium tw-text-red-400 dark:tw-text-white"},cet={key:2,class:"tw-relative"},uet={class:"tw-absolute tw-scale-75 tw-left-1/2 tw-top-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-z-10"},pet=(0,s._)("select",{disabled:"",class:"tw-opacity-30 tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[(0,s._)("option",{value:null,selected:""},"Loading...")],-1),met=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},null,-1);function het(t,e,a,r,i,l){const o=(0,s.up)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[ret,i.fetched?((0,s.wg)(),(0,s.iD)("div",set,[(0,s._)("select",{value:a.affectation,onChange:e[0]||(e[0]=(...t)=>l.handleChange&&l.handleChange(...t)),disabled:"reconfirmer"!=a.item.followup_confirmation,class:(0,Q.C_)([[a.error&&"!tw-border-red-400","reconfirmer"!=a.item.followup_confirmation&&"tw-cursor-not-allowed"],"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"])},[oet,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.availableDeliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,key:t.id},(0,Q.zw)(t.name),9,net)))),128))],42,iet),det])):(0,s.kq)("",!0),i.fetched&&a.error?((0,s.wg)(),(0,s.iD)("label",wet,(0,Q.zw)(a.error),1)):(0,s.kq)("",!0),i.fetched?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",cet,[(0,s._)("div",uet,[(0,s.Wm)(o)]),pet,met]))])}var get={props:{affectation:{required:!0},error:{required:!1,default:null},item:{required:!0}},data(){return{deliveries:[],fetched:!1}},computed:{availableDeliveries(){return this.deliveries.filter((t=>t.has.some((t=>this.item.items.some((e=>e.product_id==t))))))},delivery(){return this.deliveries.find((t=>t.id==this.affectation))}},watch:{"item.confirmation":{deep:!0,handler(){}},"item.items":{deep:!0,handler(){if(!this.affectation)return!1;this.delivery.has.some((t=>this.item.items.some((e=>e.product_id==t))))||this.$emit("update:affectation",null)}}},methods:{getDeliveries(){this.fetched=!1,K.allDeliveries().then((t=>{"SUCCESS"==t?.data.code&&(this.deliveries=t.data.data.deliveries,this.fetched=!0)})).catch(this.$handleApiError)},handleChange(t){this.$emit("update:affectation",t.target.value),this.$emit("update:error",null)}},mounted(){this.getDeliveries()}};const fet=(0,d.Z)(get,[["render",het]]);var vet=fet,yet={components:{OrderItems:aet,OrderAffectation:vet},props:{visible:{required:!0},item:{required:!0}},data(){return{confirmationsFollowup:Zn,upsells:Kn,isLoading:!1,products_fetched:null,products:null,itemCopy:null,errors:{fullname:null,phone:null,city:null,adresse:null,note:null,reported_agente_date:null,affectation:null,items:null}}},computed:{cities(){return this.$store.getters["city/cities"]}},methods:{handleUpdate(){const t=Ltt(this,this.itemCopy);if(!t)return!1;$tt(this,this.itemCopy)},cancel(){if(this.isLoading)return!1;this.$emit("update:visible",!1)},getProducts(){this.products_fetched=!1,er.allForOrder().then((t=>{"SUCCESS"==t.data.code?this.products=t.data.data.products:this.products=[],this.products_fetched=!0})).catch(this.$handleApiError)}},mounted(){this.itemCopy=JSON.parse(JSON.stringify(this.item)),this.getProducts()}};const xet=(0,d.Z)(yet,[["render",Utt]]);var _et=xet,bet={components:{UpdatePopup:_et},props:{item:{required:!0}},data(){return{popup:!1,isLoading:!1}},methods:{handle(){}}};const ket=(0,d.Z)(bet,[["render",E9]]);var Cet=ket,Det={components:{TableActions:Cet},props:{item:{required:!0}},data(){return{moment:cA()}},computed:{confirmation(){return Zn.find((t=>t.value==this.item.followup_confirmation))},deliveryState(){return Bn.find((t=>t.value==this.item.delivery))}},methods:{}};const zet=(0,d.Z)(Det,[["render",L9]]);var Uet=zet,Let={components:{TablePaginationNoNums:m9,TableRow:Uet},props:{items:{default:[]},loading:{type:Boolean,default:!0},from:{type:Number,default:1},to:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}}};const Pet=(0,d.Z)(Let,[["render",J7]]);var Aet=Pet;const Wet={class:"tw-mt-6 tw-mb-4 md:tw-flex md:tw-items-center md:tw-justify-between"},$et={class:"tw-inline-flex tw-overflow-hidden tw-bg-white tw-border tw-divide-x tw-rounded-lg darkx:tw-bg-gray-900 rtl:tw-flex-row-reverse darkx:tw-border-gray-700 darkx:tw-divide-gray-700"},Eet=(0,s._)("button",{class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 tw-bg-gray-100 sm:tw-text-sm darkx:tw-bg-gray-800 darkx:tw-text-gray-300"}," View all ",-1),qet=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M9 5a1 1 0 1 0 0 2a1 1 0 0 0 0-2zM6.17 5a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 0 1 0-2h1.17zM15 11a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h7.17zM9 17a1 1 0 1 0 0 2a1 1 0 0 0 0-2zm-2.83 0a3.001 3.001 0 0 1 5.66 0H19a1 1 0 1 1 0 2h-7.17a3.001 3.001 0 0 1-5.66 0H5a1 1 0 1 1 0-2h1.17z"})],-1),Oet=[qet],Tet=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M10 2c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1s1-.4 1-1V3c0-.6-.4-1-1-1zM5 12c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1s1-.4 1-1v-8c0-.6-.4-1-1-1zm10-4c-.6 0-1 .4-1 1v12c0 .6.4 1 1 1s1-.4 1-1V9c0-.6-.4-1-1-1zm5 8c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1s1-.4 1-1v-4c0-.6-.4-1-1-1z"})],-1),Vet=[Tet],Fet=["disabled"],Iet=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4.75 10.75h-3m12.5-2c0 3-2.798 5.5-6.25 5.5c-3.75 0-6.25-3.5-6.25-3.5v3.5m9.5-9h3m-12.5 2c0-3 2.798-5.5 6.25-5.5c3.75 0 6.25 3.5 6.25 3.5v-3.5"})],-1),Ret=[Iet],jet={class:"tw-relative"},Net=["value"],Met=(0,s.uE)('<option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="50">50</option><option value="100">100</option><option value="200">200</option>',6),Het=[Met],Yet=(0,s._)("div",{class:"tw-pointer-events-none tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-px-2 tw-text-gray-700"},[(0,s._)("svg",{class:"tw-fill-current tw-h-4 tw-w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[(0,s._)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1),Zet={class:"tw-relative tw-flex tw-items-center tw-mt-4 md:tw-mt-0"},Ket=["value"],Bet={class:"tw-overflow-hidden tw-col-span-1"},Qet={class:"tw-overflow-hidden tw-col-span-1"};function Get(t,e,a,i,l,o){const n=(0,s.up)("FiltersWrapper"),d=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",Wet,[(0,s._)("div",$et,[Eet,(0,s._)("button",{onClick:e[0]||(e[0]=t=>l.showFilters=!l.showFilters),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Oet),a.activeStatistics&&a.statistics?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[1]||(e[1]=t=>l.showStatistics=!l.showStatistics),class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Vet)):(0,s.kq)("",!0),(0,s._)("button",{onClick:e[2]||(e[2]=e=>t.$emit("fresh")),disabled:a.loading,class:"tw-px-5 tw-py-2 tw-text-xs tw-font-medium tw-border-solid tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Ret,8,Fet),(0,s._)("div",jet,[(0,s._)("select",{onChange:e[3]||(e[3]=e=>t.$emit("perPageChange",e.target.value)),value:a.perPage,class:"tw-h-full tw-px-5 tw-py-2 tw-w-20 focus:tw-outline-none tw-text-xs tw-font-medium tw-text-gray-600 tw-transition-colors tw-duration-200 sm:tw-text-sm darkx:hover:tw-bg-gray-800 darkx:tw-text-gray-300 hover:tw-bg-gray-100"},Het,40,Net),Yet])]),(0,s._)("div",Zet,[(0,s._)("input",{type:"text",placeholder:"Search",value:a.search,onInput:e[4]||(e[4]=e=>t.$emit("update:search",e.target.value)),onKeyup:e[5]||(e[5]=(0,r.D2)((e=>t.$emit("filter")),["enter"])),class:"tw-block tw-w-full tw-py-1.5 tw-pl-5 tw-text-gray-700 tw-bg-white tw-border tw-border-solid tw-border-gray-200 tw-rounded-lg md:tw-w-80 placeholder-gray-400/70 tw-pr-11 rtl:tw-pr-11 rtl:tw-pl-5 darkx:tw-bg-gray-900 darkx:tw-text-gray-300 darkx:tw-border-gray-600 focus:tw-border-orange-400 darkx:focus:tw-border-orange-300 focus:tw-ring-orange-300 focus:tw-outline-none focus:tw-ring focus:tw-ring-opacity-40"},null,40,Ket),(0,s._)("button",{onClick:e[6]||(e[6]=e=>t.$emit("filter")),class:"tw-absolute tw-right-0 tw-px-2 tw-py-1 tw-w-[38px] tw-h-[36px] tw-border-solid tw-rounded-r-lg tw-border-l tw-text-orange-500/80 tw-border-orange-500/20 hover:tw-bg-orange-500/10 hover:tw-border-orange-500/70 tw-duration-300 tw-flex tw-items-center tw-justify-center"},[(0,s.Wm)(X.t,{size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-magnify")])),_:1})])])]),(0,s._)("div",{class:(0,Q.C_)([[l.showFilters?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",Bet,[(0,s.Wm)(n,{onFilter:e[7]||(e[7]=e=>t.$emit("filter")),filters:a.filters,onUpdate:e[8]||(e[8]=e=>t.$emit("update:filters",e))},null,8,["filters"])])],2),a.statistics?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,Q.C_)([[l.showStatistics?"tw-grid-rows-[1fr]":"tw-grid-rows-[0fr]"],"tw-grid tw-duration-300 tw-transition-all"])},[(0,s._)("div",Qet,[(0,s.Wm)(d,{statistics:a.statistics},null,8,["statistics"])])],2)):(0,s.kq)("",!0)])}const Jet={class:"tw-mb-4"},Xet={class:"tw-grid tw-grid-cols-12 tw-gap-4"},tat={class:"tw-h-full tw-w-full tw-p-3 tw-rounded tw-space-y-2 tw-border tw-border-solid"},eat={class:"tw-flex tw-items-center tw-justify-between"},aat={class:"tw-text-xl tw-font-bold tw-text-gray-900"},rat={class:"tw-px-2 tw-py-1 tw-font-medium tw-text-sm tw-rounded tw-bg-white tw-text-gray-900"};function sat(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",Jet,[(0,s._)("div",Xet,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.visible,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"md:tw-col-span-3 tw-col-span-12"},[(0,s._)("div",tat,[(0,s._)("p",{class:(0,Q.C_)(["tw-text-sm tw-font-bold tw-w-fit tw-h-fit tw-px-2 tw-rounded",[l.getConfirmation(t.confirmation).textLight,l.getConfirmation(t.confirmation).bgLight]])},(0,Q.zw)(t.name),3),(0,s._)("div",eat,[(0,s._)("span",aat,(0,Q.zw)(t.total),1),(0,s._)("span",rat,(0,Q.zw)(t.percent)+"%",1)])])])))),128))])])}var iat={props:{statistics:{required:!0}},computed:{visible(){return this.statistics.show.includes("*")?this.statistics.data:this.statistics.data.filter((t=>this.statistics.show.includes(t.followup_confirmation)))}},methods:{getConfirmation(t){return Zn.find((e=>e.value==t))}}};const lat=(0,d.Z)(iat,[["render",sat]]);var oat=lat;const nat={class:"tw-mb-4"},dat={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},wat={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},cat=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Created",-1),uat=["value"],pat={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},mat=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),hat=["value"],gat=(0,s._)("option",{value:"all",selected:""},"All",-1),fat=["value"],vat={class:"md:tw-col-span-4 tw-col-span-12 tw-rounded"},yat=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery Status",-1),xat=["value"],_at=(0,s._)("option",{value:"all",selected:""},"All",-1),bat=["value"],kat=(0,s._)("button",{class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},[(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})]),(0,s._)("span",null,"Filter")],-1),Cat=[kat];function Dat(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",nat,[(0,s._)("div",dat,[(0,s._)("div",wat,[cat,(0,s._)("input",{value:a.filters.created_at,type:"date",onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,created_at:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,uat)]),(0,s._)("div",pat,[mat,(0,s._)("select",{value:a.filters.followup_confirmation,onChange:e[1]||(e[1]=e=>t.$emit("update",{...a.filters,followup_confirmation:e.target.value})),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[gat,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.confirmationsFollowup,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,fat)))),128))],40,hat)]),(0,s._)("div",vat,[yat,(0,s._)("select",{onChange:e[2]||(e[2]=e=>t.$emit("update",{...a.filters,delivery:e.target.value})),value:a.filters.delivery,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[_at,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.value,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,bat)))),128))],40,xat)]),(0,s.kq)("",!0),(0,s._)("div",{onClick:e[3]||(e[3]=e=>t.$emit("filter")),class:"tw-col-span-12 tw-flex tw-justify-end"},Cat)])])}var Sat={props:{filters:{required:!0,default:{}}},data(){return{confirmationsFollowup:Zn,deliveryStatus:Bn,deliveries:[{id:1,value:"annuler",name:"Cancelled"},{id:2,value:"pas-de-reponse",name:"No Answer"}]}}};const zat=(0,d.Z)(Sat,[["render",Dat]]);var Uat=zat,Lat={components:{IndexStatistics:oat,FiltersWrapper:Uat},props:{perPage:{type:Number,default:10},statistics:{default:null},activeStatistics:{type:Boolean,default:!1},loading:{default:!0},search:{default:""},filters:{required:!0}},data(){return{showFilters:!1,showStatistics:!1}}};const Pat=(0,d.Z)(Lat,[["render",Get]]);var Aat=Pat,Wat={components:{IndexTable:Aet,IndexFilters:Aat},data(){return{fetching:!0,items:[],statistics:null,first_page_url:null,lase_page_url:null,next_page_url:null,prev_page_url:null,last_page:1,from:1,to:1,total:0,totalOrders:0,links:null,search:"",sort_by:"created_at",sort_order:"desc",per_page:10,current_page:1,filters:{followup_confirmation:"all",delivery:"all",created_at:"all"}}},methods:{paginateOrders(){const t="?page="+this.current_page,e={sort_by:this.sort_by,sort_order:this.sort_order,per_page:this.per_page,current_page:this.current_page,search:this.search,filters:this.filters};return this.fetching=!0,Zl.paginate(t,e).then((({data:t})=>{const e=t.data.orders;this.setOptions(e),this.statistics=this.search?this.statistics:t.data.statistics})).then((()=>{this.fetching=!1}))},setOptions(t){this.items=t.data,this.first_page_url=Hi(t.first_page_url),this.lase_page_url=Hi(t.last_page_url),this.next_page_url=Hi(t.next_page_url),this.prev_page_url=Hi(t.prev_page_url),this.last_page=parseInt(t.last_page),this.from=parseInt(t.from),this.to=parseInt(t.to),this.per_page=parseInt(t.per_page),this.total=parseInt(t.total),this.totalOrders=this.search?this.totalOrders:parseInt(t.total),this.links=t.links},handleNext(){},handlePrev(){},handleItemUpdate(t){this.items=this.items.map((e=>e.id==t.id?t:e))},handlePageChange(t){this.current_page=t,this.paginateOrders()},handlePerPageChange(t){this.per_page=parseInt(t),this.handlePageChange(1)},handleSortOrderChange(){this.sort_order="asc"==this.sort_order?"desc":"asc",this.paginateOrders()}},mounted(){this.paginateOrders()}};const $at=(0,d.Z)(Wat,[["render",b7]]);var Eat=$at,qat={path:"/followup",name:"followup",component:sr,meta:{module:"dashboard"},children:[{name:"followup/index",path:"",component:Eat,meta:{module:"followup",title:"Follow Up Orders",gate:"follow_up_orders"}}]};const Oat={class:"tw-pb-40"},Tat={class:"tw-space-y-3"};function Vat(t,e,a,r,i,l){const o=(0,s.up)("OnlineUsers"),n=(0,s.up)("IndexFilters"),d=(0,s.up)("IndexRevenue"),w=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",Oat,[(0,s._)("div",Tat,[(0,s.Wm)(o),(0,s.Wm)(n,{onUpdate:e[0]||(e[0]=t=>i.filters=t),onFilter:l.handleFilter},null,8,["onFilter"]),(0,s.Wm)(d,{statistics:i.statistics,fetching:i.fetching},null,8,["statistics","fetching"]),(0,s.Wm)(w,{statistics:i.statistics,fetching:i.fetching},null,8,["statistics","fetching"])])])}const Fat={class:"tw-bg-white tw-p-5"},Iat={class:"tw-flex tw-items-center tw-justify-between"},Rat=(0,s._)("h1",{class:"tw-mb-3 tw-text-xl tw-font-medium"},"Users",-1),jat={class:"tw-relative tw-flex tw-items-center"},Nat=(0,s._)("span",{class:"tw-text-xs tw-absolute tw-right-0 tw-top-0 -tw-translate-y-full tw-whitespace-nowrap"},"Show All",-1),Mat={class:"tw-relative tw-inline-flex tw-items-center tw-cursor-pointer tw-scale-75"},Hat=(0,s._)("div",{class:"tw-w-11 tw-h-6 tw-bg-gray-200 peer-focus:tw-outline-none peer-focus:tw-ring-4 peer-focus:tw-ring-orange-200 dark:peer-focus:tw-ring-orange-500 tw-rounded-full tw-peer dark:tw-bg-neutral-600 peer-checked:after:tw-translate-x-full peer-checked:after:tw-border-white after:tw-content-[''] after:tw-absolute after:tw-top-[2px] after:tw-left-[2px] after:tw-bg-white after:tw-border-gray-300 after:tw-border after:tw-rounded-full after:tw-h-5 after:tw-w-5 after:tw-transition-all dark:tw-border-gray-600 peer-checked:tw-bg-orange-500"},null,-1),Yat={key:0,class:""},Zat={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Kat=(0,s._)("div",{class:"tw-w-[120px] tw-h-[55px] tw-bg-neutral-300/10 tw-animate-pulse tw-rounded tw-border tw-grid tw-grid-cols-12"},null,-1),Bat=[Kat],Qat={key:1,class:"tw-min-h-[50px]"},Gat={class:"tw-flex tw-items-center tw-flex-wrap tw-gap-2"},Jat={class:"py-2 px-3 tw-rounded tw-bg-white tw-shadow-sm tw-grid tw-grid-cols-12 tw-relative tw-overflow-hidden"},Xat={class:"tw-col-span-12 tw-flex tw-items-center tw-gap-2 tw-font-medium tw-capitalize tw-text-sm tw-text-neutral-600 tw-whitespace-nowrap"},trt={key:0,class:"tw-w-full tw-pt-1 tw-rounded-full tw-bg-red-400 tw-absolute tw-top-0 tw-right-0"},ert={key:1,class:"tw-w-full tw-pt-1 tw-rounded-full tw-bg-green-500 tw-absolute tw-top-0 tw-right-0"},art={key:2,class:"tw-w-full tw-pt-1 tw-rounded-full tw-bg-yellow-400 tw-absolute tw-top-0 tw-right-0"},rrt={class:"tw-font-bold"},srt={class:"tw-col-span-12 tw-whitespace-nowrap tw-text-xs tw-mt-1"},irt={key:0,class:"tw-text-red-500 tw-flex tw-items-center tw-gap-2"},lrt={key:1},ort={key:0,class:"tw-text-green-500 tw-flex tw-items-center tw-gap-2"},nrt={key:1,class:"tw-flex tw-items-center tw-gap-2"};function drt(t,e,a,i,l,o){return(0,s.wg)(),(0,s.iD)("div",Fat,[(0,s._)("div",Iat,[Rat,(0,s._)("div",jat,[Nat,(0,s._)("label",Mat,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>l.showAll=t),class:"tw-sr-only tw-peer"},null,512),[[r.e8,l.showAll]]),Hat])])]),l.isLoaded?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Yat,[(0,s._)("div",Zat,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t},Bat))),64))])])),l.isLoaded?((0,s.wg)(),(0,s.iD)("div",Qat,[(0,s._)("div",Gat,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.users,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.id},[(0,s._)("div",Jat,[(0,s._)("div",Xat,[t.last_action?1==o.isOnline(o.lastSeen(t.last_action))?((0,s.wg)(),(0,s.iD)("div",ert)):((0,s.wg)(),(0,s.iD)("div",art)):((0,s.wg)(),(0,s.iD)("div",trt)),(0,s._)("span",rrt,(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),1)]),(0,s._)("div",srt,[t.last_action?((0,s.wg)(),(0,s.iD)("div",lrt,[1==o.isOnline(o.lastSeen(t.last_action))?((0,s.wg)(),(0,s.iD)("div",ort," Online ")):((0,s.wg)(),(0,s.iD)("div",nrt,(0,Q.zw)(o.lastSeen(t.last_action)),1))])):((0,s.wg)(),(0,s.iD)("div",irt," Never Connected "))])])])))),128))])])):(0,s.kq)("",!0)])}var wrt={components:{},data(){return{isLoaded:!1,showAll:!1}},computed:{users(){return this.showAll?this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name)).sort(((t,e)=>e.last_action?cA()(t.last_action).isAfter(e.last_action)?-1:1:-1)):this.$store.getters["user/users"].filter((t=>"admin"!=t.role_name)).sort(((t,e)=>e.last_action?cA()(t.last_action).isAfter(e.last_action)?-1:1:-1)).slice(0,8)}},methods:{getUsers(){K.all().then((t=>{if("SHOW_ALL_USERS"==t?.data.code){const e=t.data.data.users;this.$store.dispatch("user/setUsers",e),this.isLoaded=!0}})).catch(this.$handleApiError)},lastSeen(t){let e=Date.parse(t.replace("-","/"))/1e3;return(0,Kr.x)(e)},isOnline(t){let e=["Just Now","1 minute ago","2 minute ago"];return e.includes(t)}},mounted(){this.getUsers()}};const crt=(0,d.Z)(wrt,[["render",drt]]);var urt=crt;const prt={class:"tw-bg-white"},mrt={class:"tw-flex tw-items-center tw-gap-2 tw-bg-gray-50 tw-p-2 tw-pt-0 tw-rounded-b tw-w-fit"},hrt={class:"tw-p-5"};function grt(t,e,a,r,i,l){const o=(0,s.up)("ConfirmationTab"),n=(0,s.up)("DeliveryTab");return(0,s.wg)(),(0,s.iD)("div",prt,[(0,s._)("div",mrt,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.active=1),class:(0,Q.C_)([[1==i.active?"tw-bg-white tw-shadow-orange-300":"tw-bg-gray-100 hover:tw-bg-white"],"tw-px-5 tw-py-2.5 tw-duration-300 tw-font-medium tw-shadow tw-rounded tw-text-gray-600"])}," Confirmations ",2),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.active=2),class:(0,Q.C_)([[2==i.active?"tw-bg-white tw-shadow-orange-300":"tw-bg-gray-100 hover:tw-bg-white"],"tw-px-5 tw-py-2.5 tw-duration-300 tw-font-medium tw-shadow tw-rounded tw-text-gray-600"])}," Delivery ",2)]),(0,s._)("div",hrt,[1==i.active?((0,s.wg)(),(0,s.j4)(o,{key:0,statistics:a.statistics,fetching:a.fetching},null,8,["statistics","fetching"])):(0,s.kq)("",!0),2==i.active?((0,s.wg)(),(0,s.j4)(n,{key:1,statistics:a.statistics,fetching:a.fetching},null,8,["statistics","fetching"])):(0,s.kq)("",!0)])])}const frt={key:0,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},vrt=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),yrt=[vrt],xrt={key:1,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"};function _rt(t,e,a,r,i,l){const o=(0,s.up)("DashboardCard");return(0,s.wg)(),(0,s.iD)("div",null,[a.fetching?((0,s.wg)(),(0,s.iD)("div",frt,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},yrt))),64))])):((0,s.wg)(),(0,s.iD)("div",xrt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.statistics.confirmations,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))]))])}const brt={class:"tw-flex tw-justify-between"},krt={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Crt={class:"tw-text-gray-500 tw-uppercase tw-text-xs tw-font-bold"},Drt={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Srt={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function zrt(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",{style:(0,Q.j5)({borderColor:a.color}),class:"tw-bg-white tw-border tw-border-dashed tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},[(0,s._)("div",brt,[(0,s._)("div",null,[(0,s._)("div",krt,[(0,s._)("p",Crt,(0,Q.zw)(a.title),1),void 0!=a.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-sm tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,Q.j5)({background:a.color})},(0,Q.zw)(a.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",Drt,[(0,s._)("span",Srt,(0,Q.zw)(a.value),1)])]),(0,s._)("div",{style:(0,Q.j5)({background:a.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(X.t,{style:(0,Q.j5)(["Orders"==a.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(a.icon),1)])),_:1},8,["style"])],4)])],4)])}var Urt={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const Lrt=(0,d.Z)(Urt,[["render",zrt]]);var Prt=Lrt,Art={components:{DashboardCard:Prt},props:{statistics:{required:!0},fetching:{required:!0}}};const Wrt=(0,d.Z)(Art,[["render",_rt]]);var $rt=Wrt;const Ert={key:0,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},qrt=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),Ort=[qrt],Trt={key:1,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"};function Vrt(t,e,a,r,i,l){const o=(0,s.up)("DashboardCard");return(0,s.wg)(),(0,s.iD)("div",null,[a.fetching?((0,s.wg)(),(0,s.iD)("div",Ert,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},Ort))),64))])):((0,s.wg)(),(0,s.iD)("div",Trt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.statistics.delivery,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))]))])}var Frt={components:{DashboardCard:Prt},props:{statistics:{required:!0},fetching:{required:!0}}};const Irt=(0,d.Z)(Frt,[["render",Vrt]]);var Rrt=Irt,jrt={components:{ConfirmationTab:$rt,DeliveryTab:Rrt},props:{statistics:{required:!0},fetching:{required:!0}},data(){return{active:1}}};const Nrt=(0,d.Z)(jrt,[["render",grt]]);var Mrt=Nrt;const Hrt={class:"tw-bg-white tw-p-5"},Yrt=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-mb-3 tw-text-xl tw-font-medium"},"Filters")],-1),Zrt={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},Krt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Brt=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),Qrt=(0,s._)("option",{value:"all",selected:""},"All",-1),Grt=["value"],Jrt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Xrt=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),tst=(0,s._)("option",{value:"all",selected:""},"All",-1),est=["value"],ast={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},rst=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),sst=(0,s._)("option",{value:"all",selected:""},"All",-1),ist=(0,s._)("option",{value:"oui",class:"tw-capitalize"},"Yes",-1),lst=(0,s._)("option",{value:"non",class:"tw-capitalize"},"Non",-1),ost=[sst,ist,lst],nst={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},dst=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),wst=(0,s._)("span",null,"Clear",-1),cst=[dst,wst],ust=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),pst=(0,s._)("span",null,"Filter",-1),mst=[ust,pst];function hst(t,e,a,i,l,o){const n=(0,s.up)("DateFilter"),d=(0,s.up)("AgentFilter"),w=(0,s.up)("AffectationFilter"),c=(0,s.up)("ProductFilter");return(0,s.wg)(),(0,s.iD)("div",Hrt,[Yrt,(0,s._)("div",Zrt,[(0,s.Wm)(n,{from:l.filters.created_from,"onUpdate:from":e[0]||(e[0]=t=>l.filters.created_from=t),to:l.filters.created_to,"onUpdate:to":e[1]||(e[1]=t=>l.filters.created_to=t),label:"Created"},null,8,["from","to"]),(0,s.Wm)(n,{from:l.filters.dropped_from,"onUpdate:from":e[2]||(e[2]=t=>l.filters.dropped_from=t),to:l.filters.dropped_to,"onUpdate:to":e[3]||(e[3]=t=>l.filters.dropped_to=t),label:"Dropped"},null,8,["from","to"]),(0,s.Wm)(d,{filters:l.filters,onUpdate:e[4]||(e[4]=t=>l.filters=t)},null,8,["filters"]),(0,s._)("div",Krt,[Brt,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.filters.confirmation=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Qrt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,Grt)))),128))],512),[[r.bM,l.filters.confirmation]])]),(0,s.Wm)(w,{filters:l.filters,onUpdate:e[6]||(e[6]=t=>l.filters=t)},null,8,["filters"]),(0,s._)("div",Jrt,[Xrt,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.filters.delivery=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[tst,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,est)))),128))],512),[[r.bM,l.filters.delivery]])]),(0,s.Wm)(c,{filters:l.filters,onUpdate:e[8]||(e[8]=t=>l.filters=t)},null,8,["filters"]),(0,s._)("div",ast,[rst,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>l.filters.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},ost,512),[[r.bM,l.filters.upsell]])]),(0,s._)("div",nst,[(0,s._)("button",{onClick:e[10]||(e[10]=(...t)=>o.clear&&o.clear(...t)),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},cst),(0,s._)("button",{onClick:e[11]||(e[11]=(...t)=>o.filter&&o.filter(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},mst)])])])}const gst={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},fst=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Affectation",-1),vst=["value"],yst=(0,s._)("option",{value:"all"},"All",-1),xst=(0,s._)("option",{value:""},"No Delivery",-1),_st=["value"];function bst(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",gst,[fst,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,affectation:e.target.value})),value:a.filters.affectation,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[yst,xst,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,_st)))),128))],40,vst)])}var kst={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},deliveries(){return this.fetched?this.users.filter((t=>"delivery"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const Cst=(0,d.Z)(kst,[["render",bst]]);var Dst=Cst;const Sst={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},zst=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Agent",-1),Ust=["value"],Lst=(0,s._)("option",{value:"all"},"All",-1),Pst=(0,s._)("option",{value:""},"No Agent",-1),Ast=["value"];function Wst(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",Sst,[zst,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,agente_id:e.target.value})),value:a.filters.agente_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Lst,Pst,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.agents,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.firstname)+" "+(0,Q.zw)(t.lastname),9,Ast)))),128))],40,Ust)])}var $st={props:{filters:{required:!0}},data(){return{}},computed:{users(){return this.$store.getters["user/users"]},agents(){return this.fetched?this.users.filter((t=>"agente"==t.role.name)):[]},fetched(){return this.$store.getters["user/fetched"]}}};const Est=(0,d.Z)($st,[["render",Wst]]);var qst=Est;const Ost={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Tst=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Product",-1),Vst=["value"],Fst=(0,s._)("option",{value:"all"},"All",-1),Ist=["value"];function Rst(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",Ost,[Tst,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,product_id:e.target.value})),value:a.filters.product_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Fst,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,Ist)))),128))],40,Vst)])}var jst={props:{filters:{required:!0}},data(){return{}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}}};const Nst=(0,d.Z)(jst,[["render",Rst]]);var Mst=Nst;const Hst={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Yst={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},Zst=(0,s.uE)('<option value="all" selected>All</option><option value="today" class="tw-capitalize">Today</option><option value="yesterday" class="tw-capitalize">Yesterday</option><option value="this-month" class="tw-capitalize">This Month</option><option value="last-month" class="tw-capitalize">Last Month</option><option value="custom" class="tw-capitalize">Custom</option>',6),Kst=[Zst],Bst={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Qst={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},Gst=["value"],Jst={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Xst={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},tit=["value"];function eit(t,e,a,i,l,o){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Hst,[(0,s._)("label",Yst,(0,Q.zw)(a.label),1),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.filterBy=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},Kst,512),[[r.bM,l.filterBy]])]),"custom"==l.filterBy?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",Bst,[(0,s._)("label",Qst,(0,Q.zw)(a.label)+" From",1),(0,s._)("input",{onInput:e[1]||(e[1]=t=>o.handleChange(t,"from")),value:a.from,type:"date",class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,Gst)]),(0,s._)("div",Jst,[(0,s._)("label",Xst,(0,Q.zw)(a.label)+" To",1),(0,s._)("input",{onInput:e[2]||(e[2]=t=>o.handleChange(t,"to")),value:a.to,type:"date",class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,tit)])],64)):(0,s.kq)("",!0)],64)}var ait={props:{from:{required:!0},to:{required:!0},label:{required:!0}},data(){return{filterBy:"all"}},watch:{filterBy(t){let e=null;switch(t){case"all":this.setFrom(null),this.setTo(null);break;case"today":e=cA()().format("YYYY-MM-DD"),this.setFrom(e),this.setTo(e);break;case"yesterday":e=cA()().subtract(1,"days").format("YYYY-MM-DD"),this.setFrom(e),this.setTo(e);break;case"this-month":var a=cA()().startOf("month").format("YYYY-MM-DD"),r=cA()().endOf("month").format("YYYY-MM-DD");this.setFrom(a),this.setTo(r);break;case"last-month":a=cA()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),r=cA()().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),this.setFrom(a),this.setTo(r);break;default:break}}},methods:{setFrom(t){this.$emit("update:from",t)},setTo(t){this.$emit("update:to",t)},handleChange(t,e){switch(e){case"from":this.setFrom(t.target.value);break;case"to":this.setTo(t.target.value);break;default:break}}}};const rit=(0,d.Z)(ait,[["render",eit]]);var sit=rit,iit={components:{AffectationFilter:Dst,AgentFilter:qst,ProductFilter:Mst,DateFilter:sit},props:{},data(){return{confirmations:Yn,deliveries:Bn,dateFilter:["",""],filters:{}}},watch:{filters:{deep:!0,handler(t){console.log(t)}}},methods:{clear(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",delivery:"all",product_id:"all"}},filter(){this.$emit("update",this.filters),this.$emit("filter")}},mounted(){this.clear(),this.filter()}};const lit=(0,d.Z)(iit,[["render",hst]]);var oit=lit;const nit={key:0},dit={class:"tw-bg-white tw-p-5 tw-grid tw-grid-cols-4 tw-gap-5"};function wit(t,e,a,r,i,l){const o=(0,s.up)("RevenueCard");return!a.fetching&&a.statistics.revenue?.length>0?((0,s.wg)(),(0,s.iD)("div",nit,[(0,s._)("div",dit,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.statistics.revenue,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,icon:t.icon,title:t.title,value:t.value,color:t.color},null,8,["icon","title","value","color"])))),128))])])):(0,s.kq)("",!0)}const cit={class:"tw-bg-white tw-border tw-border-solid tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},uit={class:"tw-flex tw-justify-between"},pit={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},mit={class:"tw-text-gray-500 tw-uppercase tw-text-xs tw-font-bold"},hit={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},git={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function fit(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",cit,[(0,s._)("div",uit,[(0,s._)("div",null,[(0,s._)("div",pit,[(0,s._)("p",mit,(0,Q.zw)(a.title),1),void 0!=a.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-sm tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,Q.j5)({background:a.color})},(0,Q.zw)(a.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",hit,[(0,s._)("span",git,(0,Q.zw)(l.format(a.value)),1)])]),(0,s._)("div",{style:(0,Q.j5)({background:a.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(X.t,{style:(0,Q.j5)(["Orders"==a.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(a.icon),1)])),_:1},8,["style"])],4)])])])}var vit={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}},methods:{format(t){return Intl.NumberFormat("en",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"long"}).format(t)}}};const yit=(0,d.Z)(vit,[["render",fit]]);var xit=yit,_it={components:{RevenueCard:xit},props:{statistics:{required:!0},fetching:{required:!0}}};const bit=(0,d.Z)(_it,[["render",wit]]);var kit=bit,Cit={components:{OnlineUsers:urt,IndexStatistics:Mrt,IndexFilters:oit,IndexRevenue:kit},data(){return{filters:null,statistics:null,fetching:!0}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleFilter(){this.fetching=!0,BL.statistics(this.filters).then((t=>{"SUCCESS"==t.data.code&&(this.statistics=t.data.data.statistics,this.fetching=!1)})).catch(this.$handleApiError)}},mounted(){"admin"!=this.user.role&&this.$router.push({name:"404"})}};const Dit=(0,d.Z)(Cit,[["render",Vat]]);var Sit=Dit;const zit={class:"tw-pb-40"},Uit={class:"tw-space-y-3"};function Lit(t,e,a,r,i,l){const o=(0,s.up)("IndexFilters"),n=(0,s.up)("IndexRevenue"),d=(0,s.up)("IndexStatistics");return(0,s.wg)(),(0,s.iD)("div",zit,[(0,s._)("div",Uit,[(0,s.Wm)(o,{onUpdate:e[0]||(e[0]=t=>i.filters=t),onFilter:l.handleFilter},null,8,["onFilter"]),(0,s.Wm)(n,{statistics:i.statistics,fetching:i.fetching},null,8,["statistics","fetching"]),(0,s.Wm)(d,{statistics:i.statistics,fetching:i.fetching},null,8,["statistics","fetching"])])])}const Pit={class:"tw-bg-white"},Ait={class:"tw-flex tw-items-center tw-gap-2 tw-bg-gray-50 tw-p-2 tw-pt-0 tw-rounded-b tw-w-fit"},Wit={class:"tw-p-5"};function $it(t,e,a,r,i,l){const o=(0,s.up)("ConfirmationTab"),n=(0,s.up)("DeliveryTab");return(0,s.wg)(),(0,s.iD)("div",Pit,[(0,s._)("div",Ait,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>i.active=1),class:(0,Q.C_)([[1==i.active?"tw-bg-white tw-shadow-orange-300":"tw-bg-gray-100 hover:tw-bg-white"],"tw-px-5 tw-py-2.5 tw-duration-300 tw-font-medium tw-shadow tw-rounded tw-text-gray-600"])}," Confirmations ",2),(0,s._)("button",{onClick:e[1]||(e[1]=t=>i.active=2),class:(0,Q.C_)([[2==i.active?"tw-bg-white tw-shadow-orange-300":"tw-bg-gray-100 hover:tw-bg-white"],"tw-px-5 tw-py-2.5 tw-duration-300 tw-font-medium tw-shadow tw-rounded tw-text-gray-600"])}," Delivery ",2)]),(0,s._)("div",Wit,[1==i.active?((0,s.wg)(),(0,s.j4)(o,{key:0,statistics:a.statistics,fetching:a.fetching},null,8,["statistics","fetching"])):(0,s.kq)("",!0),2==i.active?((0,s.wg)(),(0,s.j4)(n,{key:1,statistics:a.statistics,fetching:a.fetching},null,8,["statistics","fetching"])):(0,s.kq)("",!0)])])}const Eit={key:0,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},qit=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),Oit=[qit],Tit={key:1,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"};function Vit(t,e,a,r,i,l){const o=(0,s.up)("DashboardCard");return(0,s.wg)(),(0,s.iD)("div",null,[a.fetching?((0,s.wg)(),(0,s.iD)("div",Eit,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},Oit))),64))])):((0,s.wg)(),(0,s.iD)("div",Tit,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.statistics.confirmations,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))]))])}const Fit={class:"tw-flex tw-justify-between"},Iit={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Rit={class:"tw-text-gray-500 tw-uppercase tw-text-xs tw-font-bold"},jit={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},Nit={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function Mit(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",{style:(0,Q.j5)({borderColor:a.color}),class:"tw-bg-white tw-border tw-border-dashed tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},[(0,s._)("div",Fit,[(0,s._)("div",null,[(0,s._)("div",Iit,[(0,s._)("p",Rit,(0,Q.zw)(a.title),1),void 0!=a.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-sm tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,Q.j5)({background:a.color})},(0,Q.zw)(a.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",jit,[(0,s._)("span",Nit,(0,Q.zw)(a.value),1)])]),(0,s._)("div",{style:(0,Q.j5)({background:a.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(X.t,{style:(0,Q.j5)(["Orders"==a.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(a.icon),1)])),_:1},8,["style"])],4)])],4)])}var Hit={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}}};const Yit=(0,d.Z)(Hit,[["render",Mit]]);var Zit=Yit,Kit={components:{DashboardCard:Zit},props:{statistics:{required:!0},fetching:{required:!0}}};const Bit=(0,d.Z)(Kit,[["render",Vit]]);var Qit=Bit;const Git={key:0,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"},Jit=(0,s.uE)('<div class="tw-flex tw-justify-between tw-w-full"><div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-2.5 tw-bg-gray-200 tw-rounded-full tw-w-[50px] tw-mb-4"></div></div><div class="tw-flex tw-w-full tw-items-center tw-gap-2"><div class="tw-h-4 tw-bg-gray-200 tw-rounded-full tw-w-[30px] tw-mb-4"></div></div></div><div class="tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-bg-gray-200 tw-text-white"><div class="tw-bg-white tw-w-[25px] tw-h-[25px] tw-rounded"></div></div></div>',1),Xit=[Jit],tlt={key:1,class:"tw-grid tw-gap-2 lg:tw-grid-cols-4 sm:tw-grid-cols-2 tw-grid-cols-1"};function elt(t,e,a,r,i,l){const o=(0,s.up)("DashboardCard");return(0,s.wg)(),(0,s.iD)("div",null,[a.fetching?((0,s.wg)(),(0,s.iD)("div",Git,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(4,(t=>(0,s._)("div",{key:t,class:"tw-bg-white tw-animate-pulse tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-[90px]"},Xit))),64))])):((0,s.wg)(),(0,s.iD)("div",tlt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.statistics.delivery,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,color:t.color,icon:t.icon,title:t.title,symbol:t.symbol,percentage:t.percentage,value:t.value},null,8,["color","icon","title","symbol","percentage","value"])))),128))]))])}var alt={components:{DashboardCard:Zit},props:{statistics:{required:!0},fetching:{required:!0}}};const rlt=(0,d.Z)(alt,[["render",elt]]);var slt=rlt,ilt={components:{ConfirmationTab:Qit,DeliveryTab:slt},props:{statistics:{required:!0},fetching:{required:!0}},data(){return{active:1}}};const llt=(0,d.Z)(ilt,[["render",$it]]);var olt=llt;const nlt={class:"tw-bg-white tw-p-5"},dlt=(0,s._)("div",null,[(0,s._)("h1",{class:"tw-mb-3 tw-text-xl tw-font-medium"},"Filters")],-1),wlt={class:"tw-grid tw-grid-cols-12 tw-gap-4 tw-p-1"},clt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},ult=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Confirmation",-1),plt=(0,s._)("option",{value:"all",selected:""},"All",-1),mlt=["value"],hlt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},glt=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Delivery",-1),flt=(0,s._)("option",{value:"all",selected:""},"All",-1),vlt=["value"],ylt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},xlt=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Upsell",-1),_lt=(0,s._)("option",{value:"all",selected:""},"All",-1),blt=(0,s._)("option",{value:"oui",class:"tw-capitalize"},"Yes",-1),klt=(0,s._)("option",{value:"non",class:"tw-capitalize"},"Non",-1),Clt=[_lt,blt,klt],Dlt={class:"tw-col-span-12 tw-flex tw-justify-end tw-gap-2"},Slt=(0,s._)("svg",{class:"tw-stroke-gray-500",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"currentColor",d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"})],-1),zlt=(0,s._)("span",null,"Clear",-1),Ult=[Slt,zlt],Llt=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},[(0,s._)("path",{fill:"#fff",d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1),Plt=(0,s._)("span",null,"Filter",-1),Alt=[Llt,Plt];function Wlt(t,e,a,i,l,o){const n=(0,s.up)("DateFilter"),d=(0,s.up)("ProductFilter");return(0,s.wg)(),(0,s.iD)("div",nlt,[dlt,(0,s._)("div",wlt,[(0,s.Wm)(n,{from:l.filters.created_from,"onUpdate:from":e[0]||(e[0]=t=>l.filters.created_from=t),to:l.filters.created_to,"onUpdate:to":e[1]||(e[1]=t=>l.filters.created_to=t),label:"Created"},null,8,["from","to"]),(0,s.Wm)(n,{from:l.filters.dropped_from,"onUpdate:from":e[2]||(e[2]=t=>l.filters.dropped_from=t),to:l.filters.dropped_to,"onUpdate:to":e[3]||(e[3]=t=>l.filters.dropped_to=t),label:"Dropped"},null,8,["from","to"]),(0,s._)("div",clt,[ult,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.filters.confirmation=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[plt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.confirmations,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-green-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,mlt)))),128))],512),[[r.bM,l.filters.confirmation]])]),(0,s._)("div",hlt,[glt,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.filters.delivery=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[flt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(t=>((0,s.wg)(),(0,s.iD)("option",{class:(0,Q.C_)([[t.text,null==t.value&&"!tw-text-gray-500"],"tw-capitalize"]),value:t.value,key:t.id},(0,Q.zw)(t.name),11,vlt)))),128))],512),[[r.bM,l.filters.delivery]])]),(0,s.Wm)(d,{filters:l.filters,onUpdate:e[6]||(e[6]=t=>l.filters=t)},null,8,["filters"]),(0,s._)("div",ylt,[xlt,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.filters.upsell=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},Clt,512),[[r.bM,l.filters.upsell]])]),(0,s._)("div",Dlt,[(0,s._)("button",{onClick:e[8]||(e[8]=(...t)=>o.clear&&o.clear(...t)),class:"tw-flex tw-items-center tw-text-gray-500 tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-transition-colors tw-duration-200 tw-bg-gray-200 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-gray-300 darkx:hover:tw-bg-gray-500 darkx:tw-bg-gray-600"},Ult),(0,s._)("button",{onClick:e[9]||(e[9]=(...t)=>o.filter&&o.filter(...t)),class:"tw-flex tw-items-center tw-justify-center tw-px-5 tw-py-2 tw-text-sm tw-tracking-wide tw-text-white tw-transition-colors tw-duration-200 tw-bg-orange-500 tw-rounded-lg shrink-0 sm:tw-w-auto tw-gap-x-2 hover:tw-bg-orange-600 darkx:hover:tw-bg-orange-500 darkx:tw-bg-orange-600"},Alt)])])])}const $lt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Elt=(0,s._)("label",{for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},"Product",-1),qlt=["value"],Olt=(0,s._)("option",{value:"all"},"All",-1),Tlt=["value"];function Vlt(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",$lt,[Elt,(0,s._)("select",{onChange:e[0]||(e[0]=e=>t.$emit("update",{...a.filters,product_id:e.target.value})),value:a.filters.product_id,class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},[Olt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.products,(t=>((0,s.wg)(),(0,s.iD)("option",{value:t.id,class:"tw-capitalize",key:t.id},(0,Q.zw)(t.name),9,Tlt)))),128))],40,qlt)])}var Flt={props:{filters:{required:!0}},data(){return{}},computed:{products(){return this.$store.getters["product/products"]},fetched(){return this.$store.getters["product/fetched"]}}};const Ilt=(0,d.Z)(Flt,[["render",Vlt]]);var Rlt=Ilt;const jlt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Nlt={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},Mlt=(0,s.uE)('<option value="all" selected>All</option><option value="today" class="tw-capitalize">Today</option><option value="yesterday" class="tw-capitalize">Yesterday</option><option value="this-month" class="tw-capitalize">This Month</option><option value="last-month" class="tw-capitalize">Last Month</option><option value="custom" class="tw-capitalize">Custom</option>',6),Hlt=[Mlt],Ylt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Zlt={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},Klt=["value"],Blt={class:"md:tw-col-span-3 tw-col-span-12 tw-rounded"},Qlt={for:"countries",class:"tw-block tw-mb-2 tw-text-sm tw-font-medium tw-text-gray-900"},Glt=["value"];function Jlt(t,e,a,i,l,o){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",jlt,[(0,s._)("label",Nlt,(0,Q.zw)(a.label),1),(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.filterBy=t),class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},Hlt,512),[[r.bM,l.filterBy]])]),"custom"==l.filterBy?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("div",Ylt,[(0,s._)("label",Zlt,(0,Q.zw)(a.label)+" From",1),(0,s._)("input",{onInput:e[1]||(e[1]=t=>o.handleChange(t,"from")),value:a.from,type:"date",class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,Klt)]),(0,s._)("div",Blt,[(0,s._)("label",Qlt,(0,Q.zw)(a.label)+" To",1),(0,s._)("input",{onInput:e[2]||(e[2]=t=>o.handleChange(t,"to")),value:a.to,type:"date",class:"tw-bg-gray-50 tw-border-solid tw-outline-none tw-border tw-border-gray-300 tw-text-gray-900 tw-text-sm tw-rounded-lg focus:tw-ring-orange-500 focus:tw-border-orange-500 tw-block tw-w-full tw-p-2.5"},null,40,Glt)])],64)):(0,s.kq)("",!0)],64)}var Xlt={props:{from:{required:!0},to:{required:!0},label:{required:!0}},data(){return{filterBy:"all"}},watch:{filterBy(t){let e=null;switch(t){case"all":this.setFrom(null),this.setTo(null);break;case"today":e=cA()().format("YYYY-MM-DD"),this.setFrom(e),this.setTo(e);break;case"yesterday":e=cA()().subtract(1,"days").format("YYYY-MM-DD"),this.setFrom(e),this.setTo(e);break;case"this-month":var a=cA()().startOf("month").format("YYYY-MM-DD"),r=cA()().endOf("month").format("YYYY-MM-DD");this.setFrom(a),this.setTo(r);break;case"last-month":a=cA()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),r=cA()().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),this.setFrom(a),this.setTo(r);break;default:break}}},methods:{setFrom(t){this.$emit("update:from",t)},setTo(t){this.$emit("update:to",t)},handleChange(t,e){switch(e){case"from":this.setFrom(t.target.value);break;case"to":this.setTo(t.target.value);break;default:break}}}};const tot=(0,d.Z)(Xlt,[["render",Jlt]]);var eot=tot,aot={components:{ProductFilter:Rlt,DateFilter:eot},props:{},data(){return{confirmations:Yn,deliveries:Bn,dateFilter:["",""],filters:{}}},watch:{filters:{deep:!0,handler(t){console.log(t)}}},methods:{clear(){this.filters={created_from:null,created_to:null,dropped_from:null,dropped_to:null,affectation:"all",agente_id:"all",upsell:"all",confirmation:"all",delivery:"all",product_id:"all"}},filter(){this.$emit("update",this.filters),this.$emit("filter")}},mounted(){this.clear(),this.filter()}};const rot=(0,d.Z)(aot,[["render",Wlt]]);var sot=rot;const iot={key:0},lot={class:"tw-bg-white tw-p-5 tw-grid tw-grid-cols-4 tw-gap-5"};function oot(t,e,a,r,i,l){const o=(0,s.up)("RevenueCard");return!a.fetching&&a.statistics.revenue?.length>0?((0,s.wg)(),(0,s.iD)("div",iot,[(0,s._)("div",lot,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.statistics.revenue,(t=>((0,s.wg)(),(0,s.j4)(o,{key:t.id,icon:t.icon,title:t.title,value:t.value,color:t.color},null,8,["icon","title","value","color"])))),128))])])):(0,s.kq)("",!0)}const not={class:"tw-bg-white tw-border tw-border-solid tw-shadow-sm tw-rounded-lg tw-p-5 tw-h-fit"},dot={class:"tw-flex tw-justify-between"},wot={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},cot={class:"tw-text-gray-500 tw-uppercase tw-text-xs tw-font-bold"},uot={class:"tw-flex tw-w-full tw-items-center tw-gap-2"},pot={class:"tw-text-gray-700 tw-text-xl tw-font-bold"};function mot(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",not,[(0,s._)("div",dot,[(0,s._)("div",null,[(0,s._)("div",wot,[(0,s._)("p",cot,(0,Q.zw)(a.title),1),void 0!=a.percentage?((0,s.wg)(),(0,s.iD)("span",{key:0,class:"tw-text-sm tw-font-medium tw-rounded tw-px-1 tw-text-white",style:(0,Q.j5)({background:a.color})},(0,Q.zw)(a.percentage.toFixed(2))+"%",5)):(0,s.kq)("",!0)]),(0,s._)("div",uot,[(0,s._)("span",pot,(0,Q.zw)(l.format(a.value)),1)])]),(0,s._)("div",{style:(0,Q.j5)({background:a.color}),class:"tw-p-2 tw-rounded-full tw-flex tw-items-center tw-justify-center tw-w-[50px] tw-h-[50px] tw-text-white"},[(0,s.Wm)(X.t,{style:(0,Q.j5)(["Orders"==a.title&&{color:"#2ee1ff"}]),size:"x-large"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(a.icon),1)])),_:1},8,["style"])],4)])])])}var hot={props:{icon:{required:!0},title:{required:!0},value:{required:!0},symbol:{default:"",required:!1},percentage:{required:!1},color:{required:!0,default:"#6b7280"}},methods:{format(t){return Intl.NumberFormat("en",{style:"currency",currency:"USD",notation:"compact",compactDisplay:"long"}).format(t)}}};const got=(0,d.Z)(hot,[["render",mot]]);var fot=got,vot={components:{RevenueCard:fot},props:{statistics:{required:!0},fetching:{required:!0}}};const yot=(0,d.Z)(vot,[["render",oot]]);var xot=yot,_ot={components:{IndexStatistics:olt,IndexFilters:sot,IndexRevenue:xot},data(){return{filters:null,statistics:null,fetching:!0}},computed:{user(){return this.$store.getters["user/user"]}},methods:{handleFilter(){this.fetching=!0,v5.statistics(this.filters).then((t=>{"SUCCESS"==t.data.code&&(this.statistics=t.data.data.statistics,this.fetching=!1)})).catch(this.$handleApiError)}},mounted(){"seller"!=this.user.role&&this.$router.push({name:"404"})}};const bot=(0,d.Z)(_ot,[["render",Lit]]);var kot=bot,Cot={name:"dashboards",path:"/dashboards",component:sr,meta:{module:"dashboards",gate:"all"},children:[{name:"dashboards/admin",path:"admin",component:Sit,meta:{module:"dashboards",subModule:"dashboards/admin",title:"Dashboard",gate:"all"}},{name:"dashboards/seller",path:"seller",component:kot,meta:{module:"dashboards",subModule:"dashboards/seller",title:"Dashboard",gate:"all"}}]};const Dot=(0,s._)("div",{class:"mb-5 tw-flex tw-justify-between tw-items-center"},[(0,s._)("div",null,[(0,s._)("h1",{class:"tw-text-gray-700 font-weight-medium tw-text-md md:tw-text-lg"},"Page not found")])],-1),Sot={class:"py-5 px-5 tw-border bg-white tw-w-full tw-flex tw-items-center tw-justify-center tw-rounded-md tw-min-h-[500px]"},zot={class:"tw-flex tw-items-center tw-flex-col"},Uot=(0,s._)("div",{class:"md:tw-text-6xl tw-text-4xl tw-font-black text-primary-color"},"404",-1),Lot={class:"tw-w-fit tw-flex tw-items-center md:tw-text-2xl tw-text-xl mt-md-5 mt-3 tw-gap-2"},Pot=(0,s._)("div",{class:"tw-max-w-[400px] tw-text-center md:tw-text-lg tw-text-sm mt-5"}," The page you requested was not found or you don't have the permission to access it. ",-1);function Aot(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[Dot,(0,s._)("div",Sot,[(0,s._)("div",zot,[Uot,(0,s._)("div",Lot,[(0,s.Wm)(X.t,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-alert-circle")])),_:1}),(0,s.Uk)(" Oops! Page not found! ")]),Pot])])])}var Wot={};const $ot=(0,d.Z)(Wot,[["render",Aot]]);var Eot=$ot;const qot={class:"py-5 px-5 tw-border bg-white tw-w-full tw-rounded-md"};function Oot(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",qot,[(0,s._)("div",null,[(0,s.Wm)(G.T,{onClick:l.sendRequest,loading:i.isLoading,variant:"flat",color:"primary-color"},{default:(0,s.w5)((()=>[(0,s.Uk)("Send Request")])),_:1},8,["onClick","loading"])])])])}const Tot="api/orders/count",Vot="get";var Fot={name:"Orders from Youcan",sheet_id:"QSDfFsqdDSQDfrsqFDSRHTRzer",sheet_name:"Youcan-Orders",auto_fetch:!0},Iot={data(){return{isLoading:!1,test:Fot}},methods:{async sendRequest(){switch(this.isLoading=!0,await Y.getCookie(),Vot){case"get":M.get(Tot).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"post":M.post(Tot,Fot).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;case"delete":M["delete"](Tot).then((t=>{console.log("---- Success Response ----"),console.log(`---- Code ${t.status} ----`),console.log(t.data)}),(t=>{this.$handleApiError(t),console.log("---- Failed Response ----"),console.log(`---- Code ${t?.response.status} ----`),console.log(t?.response?.data)})).finally((()=>this.isLoading=!1));break;default:break}}}};const Rot=(0,d.Z)(Iot,[["render",Oot]]);var jot=Rot;const Not=[Vt,cp,Cot,cx,fC,jq,SM,MY,vQ,TG,XJ,Q0,o5,qat,m7,{name:"default",path:"/test",component:sr,children:[{name:"test",path:"",component:jot,meta:{title:"Test abro m3a rasek",module:"test",gate:"all"}}]},{name:"not-found",path:"/404",component:sr,meta:{title:"Not Found"},children:[{name:"404",path:"",component:Eot}]},{name:"catch-all",path:"/:pathMatch(.*)",beforeEnter:(t,e,a)=>a({name:"404"}),meta:{title:"Not Found"}}],Mot=(0,u.p7)({history:(0,u.PO)("/"),routes:Not});Mot.beforeEach(B);var Hot=Mot,Yot=(a(9773),a(8957));const Zot={colors:{"primary-color":"#FF9F43","secondary-color":"#1B2850","primary-indigo":"#1B2850","primary-orange":"#FF9F43","primary-blue":"#00CFE8","primary-green":"#28C76F"}};var Kot=(0,Yot.Rd)({theme:{defaultTheme:"customTheme",themes:{customTheme:Zot}}});const Bot={install(t){t.config.globalProperties.$can=function(t){const e=this.$store.getters["user/permissions"];return e.includes(t)}}};var Qot=Bot;const Got={install(t){t.config.globalProperties.$alert=function(t){this.$store.dispatch("alert/toggleAlert",t)}}};var Jot=Got;const Xot={install(t){t.config.globalProperties.$handleApiError=function(e){const a=e?.response?.data?.code;let r="error",s="Something wrong happened. Try again",i=!0;const l=["VALIDATION_ERROR","NOT_ACTIVE_ERROR","INVALID_CREDENTIALS","PERMISSION_DENIED"];switch(l.includes(a)&&(i=!1),console.log(e),"ERR_NETWORK"==e.code&&(s="Network error. Check your connection"),a){case"NOT_ALLOWED":s="Your are not allowed to this resources";break;case"ERROR":s=e?.response?.data.message;break;case"NOT_AUTHENTICATED":s="Your session expired",setTimeout((()=>{t.config.globalProperties.$store.dispatch("user/logout"),t.config.globalProperties.$router.push("/login")}),2e3);break;case"NOT_FOUND":i=!1,t.config.globalProperties.$router.push({name:"404"});break;default:break}return i&&t.config.globalProperties.$alert({type:r,title:s}),e}}};var tnt=Xot,ent=a(7025);const ant=t=>((0,s.dD)("data-v-ff4afcd0"),t=t(),(0,s.Cn)(),t),rnt={class:"tw-min-h-[500px] tw-flex tw-items-center tw-justify-center tw-bg-white tw-rounded-md tw-border"},snt=ant((()=>(0,s._)("div",{class:"tw-w-[40px] tw-h-[40px] tw-animate-spin loading tw-border-4 tw-border-x-transparent tw-border-t-transparent tw-rounded-full"},null,-1))),int=[snt];function lnt(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",rnt,int)}var ont={};const nnt=(0,d.Z)(ont,[["render",lnt],["__scopeId","data-v-ff4afcd0"]]);var dnt=nnt;const wnt={class:"tw-flex tw-justify-center tw-items-center"},cnt=(0,s._)("div",{class:"tw-relative tw-w-8 tw-h-8 tw-animate-spin tw-rounded-full tw-bg-gradient-to-r tw-from-purple-400 tw-via-blue-500 tw-to-red-400"},[(0,s._)("div",{class:"tw-absolute tw-top-1/2 tw-left-1/2 tw-transform tw--translate-x-1/2 tw--translate-y-1/2 tw-w-7 tw-h-7 tw-bg-white tw-rounded-full tw-border-2 tw-border-white"})],-1),unt=[cnt];function pnt(t,e,a,r,i,l){return(0,s.wg)(),(0,s.iD)("div",wnt,unt)}var mnt={};const hnt=(0,d.Z)(mnt,[["render",pnt]]);var gnt=hnt;const fnt={key:0},vnt={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"},ynt={name:"body",class:"tw-z-[50999] tw-bg-white md:tw-min-w-[300px] md:tw-max-w-[800px] tw-flex tw-flex-col md:tw-min-h-[170px] tw-shadow-lg tw-rounded-lg tw-py-3 tw-px-5"},xnt=["innerHTML"],_nt={key:1,class:"tw-text-lg tw-text-gray-700"},bnt={class:"tw-flex tw-gap-3 tw-justify-end mt-5"};function knt(t,e,a,r,i,l){return a.visible?((0,s.wg)(),(0,s.iD)("div",fnt,[((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s._)("div",null,[(0,s._)("div",vnt,[(0,s._)("div",ynt,[(0,s._)("div",{class:(0,Q.C_)(["tw-font-medium tw-text-lg mb-5 tw-text-start",l.currentType.class])},[(0,s.Wm)(X.t,{size:"small",class:"mr-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,Q.zw)(l.currentType.icon),1)])),_:1}),(0,s._)("span",null,(0,Q.zw)(a.title),1)],2),a.body?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"tw-text-center tw-text-lg tw-text-gray-700",innerHTML:a.body},null,8,xnt)):((0,s.wg)(),(0,s.iD)("div",_nt,[(0,s.WI)(t.$slots,"default")])),(0,s.Wm)(ea.C),(0,s._)("div",bnt,[(0,s.Wm)(G.T,{variant:"flat",color:"grey",onClick:e[0]||(e[0]=t=>l.resolve(!1))},{default:(0,s.w5)((()=>[(0,s.Uk)("Cancel")])),_:1}),a.noConfirm?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(G.T,{key:0,loading:a.loading,variant:"flat",color:a.btnColor?a.btnColor:"red",onClick:e[1]||(e[1]=t=>l.resolve(!0))},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirm")])),_:1},8,["loading","color"]))])]),(0,s._)("div",{onClick:e[2]||(e[2]=t=>l.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":a.visible}])},null,2)],512)])]))])):(0,s.kq)("",!0)}var Cnt={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("resolved",t)}},computed:{currentType(){return this.types[this.type]}}};const Dnt=(0,d.Z)(Cnt,[["render",knt]]);var Snt=Dnt;const znt={key:0},Unt={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function Lnt(t,e,a,i,l,o){return a.visible?((0,s.wg)(),(0,s.iD)("div",znt,[((0,s.wg)(),(0,s.j4)(s.lR,{to:".my-application"},[(0,s._)("div",null,[(0,s._)("div",Unt,[(0,s._)("div",{name:"body",onClick:e[0]||(e[0]=(0,r.iM)((t=>o.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] tw-overflow-y-auto tw-max-h-screen tw-flex tw-flex-col md:tw-min-h-[170px]"},[(0,s.WI)(t.$slots,"default")]),(0,s._)("div",{onClick:e[1]||(e[1]=t=>o.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-bg-neutral-900/50 tw-opacity-0",{"!tw-opacity-100":a.visible}])},null,2)],512)])]))])):(0,s.kq)("",!0)}var Pnt={props:["visible","loading","title","body","type","noConfirm","btnColor"],data(){return{show:!0,types:{warning:{class:"tw-text-orange-400",icon:"mdi-alert-circle-outline"},info:{class:"tw-text-blue-400",icon:"mdi-information-outline"}}}},watch:{visible(t){this.show=t}},methods:{resolve(t){this.$emit("cancel",t)}},computed:{currentType(){return this.types[this.type]}}};const Ant=(0,d.Z)(Pnt,[["render",Lnt]]);var Wnt=Ant,$nt=a(4679),Ent=a(5781),qnt=a.n(Ent),Ont=a(2583);const Tnt={key:0},Vnt={ref:"popup",class:"tw-fixed tw-top-0 tw-left-0 tw-z-[50999] tw-right-0 tw-bottom-0 tw-flex tw-items-center tw-justify-center"};function Fnt(t,e,a,i,l,o){return a.visible?((0,s.wg)(),(0,s.iD)("div",Tnt,[((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s._)("div",null,[(0,s._)("div",Vnt,[(0,s.Wm)(Ont.v,null,{default:(0,s.w5)((()=>[l.showContent?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:e[0]||(e[0]=(0,r.iM)((t=>o.resolve(!1)),["self"])),class:"tw-z-[50999] tw-w-full md:tw-min-w-[300px] !tw-overflow-auto !tw-max-h-screen"},[(0,s.WI)(t.$slots,"default")])):(0,s.kq)("",!0)])),_:3}),(0,s._)("div",{onClick:e[1]||(e[1]=t=>o.resolve(!1)),class:(0,Q.C_)(["tw-duration-300 tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full tw-backdrop-blur-sm tw-opacity-0",{"!tw-opacity-100":a.visible}])},null,2)],512)])]))])):(0,s.kq)("",!0)}var Int={props:{visible:{required:!0,default:!1},closeable:{required:!1,default:!0}},data(){return{showContent:!1}},watch:{visible(t){t?setTimeout((()=>{this.showContent=t}),0):this.showContent=t}},methods:{resolve(t){this.closeable&&this.$emit("cancel",t)}},computed:{},mounted(){document.body.style.overflow="hidden",document.body.style.height="100vh",this.showContent=this.visible},unmounted(){document.body.style.height="none",document.body.style.overflow="visible"}};const Rnt=(0,d.Z)(Int,[["render",Fnt]]);var jnt=Rnt;(0,r.ri)(c).use(Hot).use(T).use(Kot).use(Qot).use(Jot).use(tnt).use(ent.Z).component("LoadingAnimation",dnt).component("Loading",gnt).component("Popup",Snt).component("PopupFull",Wnt).component("VueDatePicker",$nt.Z).component("downloadCsv",qnt()).component("popupNew",jnt).mount("#app")}},e={};function a(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=t,function(){var t=[];a.O=function(e,r,s,i){if(!r){var l=1/0;for(w=0;w<t.length;w++){r=t[w][0],s=t[w][1],i=t[w][2];for(var o=!0,n=0;n<r.length;n++)(!1&i||l>=i)&&Object.keys(a.O).every((function(t){return a.O[t](r[n])}))?r.splice(n--,1):(o=!1,i<l&&(l=i));if(o){t.splice(w--,1);var d=s();void 0!==d&&(e=d)}}return e}i=i||0;for(var w=t.length;w>0&&t[w-1][2]>i;w--)t[w]=t[w-1];t[w]=[r,s,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};a.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);a.r(i);var l={};t=t||[null,e({}),e([]),e(e)];for(var o=2&s&&r;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((function(t){l[t]=function(){return r[t]}}));return l["default"]=function(){return r},a.d(i,l),i}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,r){return a.f[r](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{128:"65a19ac7",269:"6bcf28cc",617:"ac7ccd9f"}[t]+".js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="production:";a.l=function(r,s,i,l){if(t[r])t[r].push(s);else{var o,n;if(void 0!==i)for(var d=document.getElementsByTagName("script"),w=0;w<d.length;w++){var c=d[w];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==e+i){o=c;break}}o||(n=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",e+i),o.src=r),t[r]=[s];var u=function(e,a){o.onerror=o.onload=null,clearTimeout(p);var s=t[r];if(delete t[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((function(t){return t(a)})),e)return e(a)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),n&&document.head.appendChild(o)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p="/"}(),function(){var t={143:0};a.f.j=function(e,r){var s=a.o(t,e)?t[e]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((function(a,r){s=t[e]=[a,r]}));r.push(s[2]=i);var l=a.p+a.u(e),o=new Error,n=function(r){if(a.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+l+")",o.name="ChunkLoadError",o.type=i,o.request=l,s[1](o)}};a.l(l,n,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,i,l=r[0],o=r[1],n=r[2],d=0;if(l.some((function(e){return 0!==t[e]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(n)var w=n(a)}for(e&&e(r);d<l.length;d++)i=l[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(w)},r=self["webpackChunkproduction"]=self["webpackChunkproduction"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(5279)}));r=a.O(r)})();
//# sourceMappingURL=app.c556bf5a.js.map